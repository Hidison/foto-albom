/*! For license information please see main.c5f84f90.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Se)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,It=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function $n(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Pr=Rr[Or];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ni=Si(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ni),Ei(Ci)}function Pi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Ii(Ci,e)):Ei(Ni),Ii(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,qi),i}finally{kt=t,ji=!1}}return null}var zi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){zi[Ki++]=Hi,zi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=zi[--Ki],zi[Ki]=null,Hi=zi[--Ki],zi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ii(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return qo(2048,8,e,t)}function Go(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ou,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Sc(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Ju=s):_s(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,$u=u,Yu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{is(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var xs,Ss=Math.ceil,Es=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ds=0,Os=Si(0),Ps=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,Bs=0,qs=1/0,zs=null,Ks=!1,Gs=null,Hs=null,Ws=!1,Qs=null,$s=0,Ys=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Ps&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Xe()+500,Vi&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(zs=null,qs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,zs),t);break}wc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,zs),r);break}wc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,zs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Xe()+500,Vi&&qi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&qi()}}function fc(){Ds=Os.current,Ei(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Oc(e.current,null),Rs=Ds=t,Ps=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ps=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(zs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ps}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=xs(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Is.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ps=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ps&&(Ps=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Is.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Ys++:(Ys=0,Xs=e):Ys=0,qi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ps||3===Ps&&(130023424&Rs)===Rs&&500>Xe()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),za(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(qs=Xe()+500,qi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,S=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:S,optional:x,repeat:_,partial:w,asterisk:!!b,pattern:E?c(E):b?".*":"[^"+s(S)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){m(A,0)};function O(e){E=e,S||(S=!0,x())}function P(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".aecba129.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="foto-albom:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfoto_albom=self.webpackChunkfoto_albom||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Rt},SDK_VERSION:function(){return Bn},_DEFAULT_ENTRY_NAME:function(){return Cn},_addComponent:function(){return Dn},_addOrOverwriteComponent:function(){return On},_apps:function(){return An},_clearComponents:function(){return Fn},_components:function(){return Rn},_getProvider:function(){return Ln},_registerComponent:function(){return Pn},_removeServiceInstance:function(){return Mn},deleteApp:function(){return Gn},getApp:function(){return zn},getApps:function(){return Kn},initializeApp:function(){return qn},onLog:function(){return Qn},registerVersion:function(){return Wn},setLogLevel:function(){return $n}});var t=n(791),r=n(250),i=n(248),a=n(327),o=n(164);var u=function(e){e()},s=function(){return u},c=(0,t.createContext)(null);function l(){return(0,t.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=h(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var v=p();n(110),n(900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var k=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=m(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);g((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||c;return t.createElement(s.Provider,{value:o},i)};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(){return n().store}}var w=b();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?w:b(e);return function(){return t().dispatch}}var x,S=_();function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,E(e,t)}!function(e){h=e}(a.useSyncExternalStoreWithSelector),function(e){e}(i.useSyncExternalStore),x=o.unstable_batchedUpdates,u=x;var T=n(7),C=n.n(T);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function A(e){return"/"===e.charAt(0)}function R(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var D=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&A(e),o=t&&A(t),u=a||o;if(e&&A(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?R(i,l):".."===f?(R(i,l),c++):c&&(R(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&A(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function O(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var P=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=O(t),i=O(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},L="Invariant failed";function M(e,t){if(!e)throw new Error(L)}function F(e){return"/"===e.charAt(0)?e:"/"+e}function U(e){return"/"===e.charAt(0)?e.substr(1):e}function V(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function j(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function B(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function q(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=N({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=D(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function z(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var K=!("undefined"===typeof window||!window.document||!window.document.createElement);function G(e,t){t(window.confirm(e))}var H="popstate",W="hashchange";function Q(){try{return window.history.state||{}}catch(e){return{}}}function $(e){void 0===e&&(e={}),K||M(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?G:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?j(F(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&(a=V(a,f)),q(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=z();function v(e){N(T,e),T.length=t.length,p.notifyListeners(T.location,T.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||k(h(e.state))}function m(){k(h(Q()))}var g=!1;function k(e){if(g)g=!1,v();else{p.confirmTransitionTo(e,"POP",s,(function(t){t?v({action:"POP",location:e}):function(e){var t=T.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(g=!0,x(i))}(e)}))}}var b=h(Q()),w=[b.key];function _(e){return f+B(e)}function x(e){t.go(e)}var S=0;function E(e){1===(S+=e)&&1===e?(window.addEventListener(H,y),r&&window.addEventListener(W,m)):0===S&&(window.removeEventListener(H,y),r&&window.removeEventListener(W,m))}var I=!1;var T={length:t.length,action:"POP",location:b,createHref:_,push:function(e,r){var i="PUSH",a=q(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=w.indexOf(T.location.key),l=w.slice(0,c+1);l.push(a.key),w=l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=q(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=w.indexOf(T.location.key);-1!==c&&(w[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return I||(E(1),I=!0),function(){return I&&(I=!1,E(-1)),t()}},listen:function(e){var t=p.appendListener(e);return E(1),function(){E(-1),t()}}};return T}var Y="hashchange",X={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+U(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:U,decodePath:F},slash:{encodePath:F,decodePath:F}};function J(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Z(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function ee(e){window.location.replace(J(window.location.href)+"#"+e)}function te(e){void 0===e&&{},K||M(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?G:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?j(F(e.basename)):"",s=X[o],c=s.encodePath,l=s.decodePath;function f(){var e=l(Z());return u&&V(e,u),q(e)}var h=z();function d(e){N(E,e),E.length=t.length,h.notifyListeners(E.location,E.action)}var p=!1,v=null;function y(){var e=Z(),t=c(e);if(e!==t)ee(t);else{var n=f(),r=E.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(v===B(n))return;null,function(e){if(p)!1,d();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=E.location,n=b.lastIndexOf(B(t));-1===n&&0;var r=b.lastIndexOf(B(e));-1===r&&0;var i=n-r;i&&(!0,w(i))}(e)}))}}(n)}}var m=Z(),g=c(m);m!==g&&ee(g);var k=f(),b=[B(k)];function w(e){t.go(e)}var _=0;function x(e){1===(_+=e)&&1===e?window.addEventListener(Y,y):0===_&&window.removeEventListener(Y,y)}var S=!1;var E={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&J(window.location.href),n+"#"+c(u+B(e))},push:function(e,t){var n="PUSH",r=q(e,void 0,void 0,E.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=B(r),i=c(u+t);if(Z()!==i){t,function(e){window.location.hash=e}(i);var a=b.lastIndexOf(B(E.location)),o=b.slice(0,a+1);o.push(t),o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=q(e,void 0,void 0,E.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=B(r),i=c(u+t);Z()!==i&&(t,ee(i));var a=b.indexOf(B(E.location));-1!==a&&(b[a]=t),d({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&!1;var t=h.setPrompt(e);return S||(x(1),!0),function(){return S&&(!1,x(-1)),t()}},listen:function(e){var t=h.appendListener(e);return x(1),function(){x(-1),t()}}};return E}function ne(e,t,n){return Math.min(Math.max(e,t),n)}function re(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=z();function l(e){N(y,e),y.length=y.entries.length,c.notifyListeners(y.location,y.action)}function f(){return Math.random().toString(36).substr(2,s)}var h=ne(o,0,i.length-1),d=i.map((function(e){return q(e,void 0,"string"===typeof e?f():e.key||f())})),p=B;function v(e){var t=ne(y.index+e,0,y.entries.length-1),r=y.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var y={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,t){var r="PUSH",i=q(e,t,f(),y.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=q(e,t,f(),y.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,l({action:r,location:i}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return y}var ie=n(239),ae=n.n(ie);n(228);function oe(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ue=1073741823,se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function ce(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var le=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return se[e]=(se[e]||0)+1}()+"__",o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=ce(t.props.value),t}I(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):ue,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=C().object.isRequired,r);var u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}I(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?ue:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?ue:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=C().object,i),{Provider:o,Consumer:u}},fe=function(e){var t=le();return t.displayName=e,t},he=fe("Router-History"),de=fe("Router"),pe=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}I(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(de.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(he.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var ve=function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var ye={},me=0;function ge(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(ye[e])return ye[e];var t=ae().compile(e);return me<1e4&&(ye[e]=t,me++),t}(e)(t,{pretty:!0})}function ke(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(de.Consumer,null,(function(e){e||M(!1);var i=e.history,o=e.staticContext,u=a?i.push:i.replace,s=q(n?"string"===typeof r?ge(r,n.params):N({},r,{pathname:ge(r.pathname,n.params)}):r);return o?(u(s),null):t.createElement(ve,{onMount:function(){u(s)},onUpdate:function(e,t){var n=q(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&P(e.state,t.state)})(n,N({},s,{key:n.key}))||u(s)},to:r})}))}var be={},we=0;function _e(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=be[n]||(be[n]={});if(r[e])return r[e];var i=[],a={regexp:ae()(e,i,t),keys:i};return we<1e4&&(r[e]=a,we++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var xe=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(de.Consumer,null,(function(n){n||M(!1);var r=e.props.location||n.location,i=N({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?_e(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(de.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function Se(e){return"/"===e.charAt(0)?e:"/"+e}function Ee(e,t){if(!e)return t;var n=Se(e);return 0!==t.pathname.indexOf(n)?t:N({},t,{pathname:t.pathname.substr(n.length)})}function Ie(e){return"string"===typeof e?e:B(e)}function Te(e){return function(){M(!1)}}function Ce(){}t.Component;var Ne=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(de.Consumer,null,(function(n){n||M(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?_e(a.pathname,N({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);t.useContext;var Ae=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=$(t.props),t}return I(n,e),n.prototype.render=function(){return t.createElement(pe,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var Re=function(e,t){return"function"===typeof e?e(t):e},De=function(e,t){return"string"===typeof e?q(e,null,null,t):e},Oe=function(e){return e},Pe=t.forwardRef;"undefined"===typeof Pe&&(Pe=Oe);var Le=Pe((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=oe(e,["innerRef","navigate","onClick"]),u=o.target,s=N({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=Oe!==Pe&&n||r,t.createElement("a",s)}));var Me=Pe((function(e,n){var r=e.component,i=void 0===r?Le:r,a=e.replace,o=e.to,u=e.innerRef,s=oe(e,["component","replace","to","innerRef"]);return t.createElement(de.Consumer,null,(function(e){e||M(!1);var r=e.history,c=De(Re(o,e.location),e.location),l=c?r.createHref(c):"",f=N({},s,{href:l,navigate:function(){var t=Re(o,e.location),n=B(e.location)===B(De(t));(a||n?r.replace:r.push)(t)}});return Oe!==Pe?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),Fe=function(e){return e},Ue=t.forwardRef;"undefined"===typeof Ue&&(Ue=Fe);Ue((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,d=e.strict,p=e.style,v=e.to,y=e.innerRef,m=oe(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(de.Consumer,null,(function(e){e||M(!1);var r=f||e.location,a=De(Re(v,r),r),g=a.pathname,k=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=k?_e(r.pathname,{path:k,exact:c,sensitive:h,strict:d}):null,w=!!(l?l(b,r):b),_="function"===typeof s?s(w):s,x="function"===typeof p?p(w):p;w&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(_,o),x=N({},x,u));var S=N({"aria-current":w&&i||null,className:_,style:x,to:a},m);return Fe!==Ue?S.ref=n||y:S.innerRef=y,t.createElement(Me,S)}))}));var Ve="Header_header__HXQOm",je="Header_header__container__urE9T",Be="Header_header__container_auth__XtHIy",qe="Header_header__container_auth_reg__coF+Z",ze="Header_header__title__kU4tG",Ke="Header_header__exit_button__svgm3";function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function He(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ge(e)););return e}function We(){return We="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=He(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},We.apply(this,arguments)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function Ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Je(e,t){if(t&&("object"===Xe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qe(e)}function Ze(e){var t=Ye();return function(){var n,r=Ge(e);if(t){var i=Ge(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Je(this,n)}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){if(e){if("string"===typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function nt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function rt(){rt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Xe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){at(a,r,i,o,u,"next",e)}function u(e){at(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e){var t=function(e,t){if("object"!==Xe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xe(t)?t:String(t)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function lt(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ft(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t,n){return(t=st(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e,t,n){return dt=Ye()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&E(i,n.prototype),i},dt.apply(null,arguments)}function pt(e){var t="function"===typeof Map?new Map:void 0;return pt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return dt(e,arguments,Ge(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,e)},pt(e)}var vt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},yt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},mt=function(e){return function(e){var t=vt(e);return yt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},gt=function(e){try{return yt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function kt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&bt(n)&&(e[n]=kt(e[n],t[n]));return e}function bt(e){return"__proto__"!==e}function wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _t(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function xt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var St=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Et=function(){try{return St()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&gt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},It=function(e){var t,n;return null===(n=null===(t=Et())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Tt=function(){var e;return null===(e=Et())||void 0===e?void 0:e.config},Ct=function(e){var t;return null===(t=Et())||void 0===t?void 0:t["_".concat(e)]},Nt=function(){function e(){var t=this;ut(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return lt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function At(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mt(JSON.stringify({alg:"none",type:"JWT"})),mt(JSON.stringify(a)),""].join(".")}var Rt=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Qe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Qe(a),Dt.prototype.create),a}return lt(n)}(pt(Error)),Dt=function(){function e(t,n,r){ut(this,e),this.service=t,this.serviceName=n,this.errors=r}return lt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ot(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Rt(n,a,t);return o}}]),e}();function Ot(e,t){return e.replace(Pt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Pt=/\{\$([^}]+)}/g;function Lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ft(u)&&Ft(s)){if(!Mt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ft(e){return null!==e&&"object"===typeof e}function Ut(e){for(var t=[],n=function(){var e=it(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Vt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=it(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function jt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Bt(e,t){var n=new qt(e,t);return n.subscribe.bind(n)}var qt=function(){function e(t,n){var r=this;ut(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return lt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=nt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=zt),void 0===r.error&&(r.error=zt),void 0===r.complete&&(r.complete=zt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function zt(){}function Kt(e){return e&&e._delegate?e._delegate:e}var Gt=function(){function e(t,n,r){ut(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return lt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ht="[DEFAULT]",Wt=function(){function e(t,n){ut(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return lt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Nt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ht})}catch(s){}var t,n=nt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=it(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ft(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ft(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=nt(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=it(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(fS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ht?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(fS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;return this.component?this.component.multipleInstances?e:Ht:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Qt,$t,Yt=function(){function e(t){ut(this,e),this.name=t,this.providers=new Map}return lt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Wt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Xt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}($t||($t={}));var Jt={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},Zt=$t.INFO,en=(ht(Qt={},$t.DEBUG,"log"),ht(Qt,$t.VERBOSE,"log"),ht(Qt,$t.INFO,"info"),ht(Qt,$t.WARN,"warn"),ht(Qt,$t.ERROR,"error"),Qt),tn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=en[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},nn=function(){function e(t){ut(this,e),this.name=t,this._logLevel=Zt,this._logHandler=tn,this._userLogHandler=null,Xt.push(this)}return lt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in $t))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Jt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$t.DEBUG].concat(t)),this._logHandler.apply(this,[this,$t.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$t.VERBOSE].concat(t)),this._logHandler.apply(this,[this,$t.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$t.INFO].concat(t)),this._logHandler.apply(this,[this,$t.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$t.WARN].concat(t)),this._logHandler.apply(this,[this,$t.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$t.ERROR].concat(t)),this._logHandler.apply(this,[this,$t.ERROR].concat(t))}}]),e}();function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on,un;var sn=new WeakMap,cn=new WeakMap,ln=new WeakMap,fn=new WeakMap,hn=new WeakMap;var dn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ln.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function pn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(un||(un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(mn(this),n),yn(sn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(e.apply(mn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[mn(this),t].concat(r));return ln.set(a,t.sort?t.sort():[t]),yn(a)}}function vn(e){return"function"===typeof e?pn(e):(e instanceof IDBTransaction&&function(e){if(!cn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));cn.set(e,t)}}(e),t=e,(on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,dn):e);var t}function yn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(yn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&sn.set(t,e)})).catch((function(){})),hn.set(t,e),t}(e);if(fn.has(e))return fn.get(e);var t=vn(e);return t!==e&&(fn.set(e,t),hn.set(t,e)),t}var mn=function(e){return hn.get(e)};var gn,kn,bn=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],_n=new Map;function xn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(_n.get(t))return _n.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=wn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||bn.includes(n))){var a=function(){var e=ot(rt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return _n.set(t,a),a}}}dn=function(e){return an(an({},e),{},{get:function(t,n,r){return xn(t,n)||e.get(t,n,r)},has:function(t,n){return!!xn(t,n)||e.has(t,n)}})}(dn);var Sn=function(){function e(t){ut(this,e),this.container=t}return lt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var En="@firebase/app",In="0.9.0",Tn=new nn("@firebase/app"),Cn="[DEFAULT]",Nn=(ht(gn={},En,"fire-core"),ht(gn,"@firebase/app-compat","fire-core-compat"),ht(gn,"@firebase/analytics","fire-analytics"),ht(gn,"@firebase/analytics-compat","fire-analytics-compat"),ht(gn,"@firebase/app-check","fire-app-check"),ht(gn,"@firebase/app-check-compat","fire-app-check-compat"),ht(gn,"@firebase/auth","fire-auth"),ht(gn,"@firebase/auth-compat","fire-auth-compat"),ht(gn,"@firebase/database","fire-rtdb"),ht(gn,"@firebase/database-compat","fire-rtdb-compat"),ht(gn,"@firebase/functions","fire-fn"),ht(gn,"@firebase/functions-compat","fire-fn-compat"),ht(gn,"@firebase/installations","fire-iid"),ht(gn,"@firebase/installations-compat","fire-iid-compat"),ht(gn,"@firebase/messaging","fire-fcm"),ht(gn,"@firebase/messaging-compat","fire-fcm-compat"),ht(gn,"@firebase/performance","fire-perf"),ht(gn,"@firebase/performance-compat","fire-perf-compat"),ht(gn,"@firebase/remote-config","fire-rc"),ht(gn,"@firebase/remote-config-compat","fire-rc-compat"),ht(gn,"@firebase/storage","fire-gcs"),ht(gn,"@firebase/storage-compat","fire-gcs-compat"),ht(gn,"@firebase/firestore","fire-fst"),ht(gn,"@firebase/firestore-compat","fire-fst-compat"),ht(gn,"fire-js","fire-js"),ht(gn,"firebase","fire-js-all"),gn),An=new Map,Rn=new Map;function Dn(e,t){try{e.container.addComponent(t)}catch(n){Tn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function On(e,t){e.container.addOrOverwriteComponent(t)}function Pn(e){var t=e.name;if(Rn.has(t))return Tn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rn.set(t,e);var n,r=nt(An.values());try{for(r.s();!(n=r.n()).done;){Dn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ln(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cn;Ln(e,t).clearInstance(n)}function Fn(){Rn.clear()}var Un=(ht(kn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ht(kn,"bad-app-name","Illegal App name: '{$appName}"),ht(kn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ht(kn,"app-deleted","Firebase App named '{$appName}' already deleted"),ht(kn,"no-options","Need to provide options, when not being deployed to hosting via source."),ht(kn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ht(kn,"invalid-log-argument","First argument to `onLog` must be null or a function."),ht(kn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ht(kn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ht(kn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ht(kn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),kn),Vn=new Dt("app","Firebase",Un),jn=function(){function e(t,n,r){var i=this;ut(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",(function(){return i}),"PUBLIC"))}return lt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}]),e}(),Bn="9.15.0";function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Cn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Vn.create("bad-app-name",{appName:String(a)});if(n||(n=Tt()),!n)throw Vn.create("no-options");var o=An.get(a);if(o){if(Mt(n,o.options)&&Mt(i,o.config))return o;throw Vn.create("duplicate-app",{appName:a})}var u,s=new Yt(a),c=nt(Rn.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new jn(n,i,s);return An.set(a,f),f}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,t=An.get(e);if(!t&&e===Cn)return qn();if(!t)throw Vn.create("no-app",{appName:e});return t}function Kn(){return Array.from(An.values())}function Gn(e){return Hn.apply(this,arguments)}function Hn(){return(Hn=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!An.has(n)){e.next=6;break}return An.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e,t,n){var r,i=null!==(r=Nn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Tn.warn(u.join(" "))}Pn(new Gt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Qn(e,t){if(null!==e&&"function"!==typeof e)throw Vn.create("invalid-log-argument");!function(e,t){var n,r=nt(Xt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Jt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:$t[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function $n(e){var t;t=e,Xt.forEach((function(e){e.setLogLevel(t)}))}var Yn="firebase-heartbeat-store",Xn=null;function Jn(){return Xn||(Xn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=yn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(yn(u.result),e.oldVersion,e.newVersion,yn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Yn)}}).catch((function(e){throw Vn.create("idb-open",{originalErrorMessage:e.message})}))),Xn}function Zn(e){return er.apply(this,arguments)}function er(){return er=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn();case 3:return n=e.sent,e.abrupt("return",n.transaction(Yn).objectStore(Yn).get(rr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Rt?Tn.warn(e.t0.message):(r=Vn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Tn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),er.apply(this,arguments)}function tr(e,t){return nr.apply(this,arguments)}function nr(){return nr=ot(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn();case 3:return r=e.sent,i=r.transaction(Yn,"readwrite"),a=i.objectStore(Yn),e.next=8,a.put(n,rr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Rt?Tn.warn(e.t0.message):(o=Vn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Tn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),nr.apply(this,arguments)}function rr(e){return"".concat(e.name,"!").concat(e.options.appId)}var ir=function(){function e(t){var n=this;ut(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new sr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return lt(e,[{key:"triggerHeartbeat",value:function(){var e=ot(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ar(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ar(),n=or(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=mt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ar(){return(new Date).toISOString().substring(0,10)}function or(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=nt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),cr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),cr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ur,sr=function(){function e(t){ut(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return lt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ft(r.heartbeats),ft(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function cr(e){return mt(JSON.stringify({version:2,heartbeats:e})).length}ur="",Pn(new Gt("platform-logger",(function(e){return new Sn(e)}),"PRIVATE")),Pn(new Gt("heartbeat",(function(e){return new ir(e)}),"PRIVATE")),Wn(En,In,ur),Wn(En,In,"esm2017"),Wn("fire-js","");function lr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var fr;Object.create;function hr(){return ht({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var dr=hr,pr=new Dt("auth","Firebase",hr()),vr=new nn("@firebase/auth");function yr(e){if(vr.logLevel<=$t.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vr.error.apply(vr,["Auth (".concat(Bn,"): ").concat(e)].concat(n))}}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw br.apply(void 0,[e].concat(n))}function gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return br.apply(void 0,[e].concat(n))}function kr(e,t,n){var r=Object.assign(Object.assign({},dr()),ht({},t,n));return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ft(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ft(o)))}return pr.create.apply(pr,[e].concat(n))}function wr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw br.apply(void 0,[t].concat(r))}}function _r(e){var t="INTERNAL ASSERTION FAILED: "+e;throw yr(t),new Error(t)}function xr(e,t){e||_r(t)}var Sr=new Map;function Er(e){xr(e instanceof Function,"Expected a class definition");var t=Sr.get(e);return t?(xr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Sr.set(e,t),t)}function Ir(e,t){var n=Ln(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Mt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;mr(r,"already-initialized")}return n.initialize({options:t})}function Tr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Cr(){return"http:"===Nr()||"https:"===Nr()}function Nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ar(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Cr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Rr=function(){function e(t,n){ut(this,e),this.shortDelay=t,this.longDelay=n,xr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())||"object"===typeof navigator&&"ReactNative"===navigator.product}return lt(e,[{key:"get",value:function(){return Ar()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Dr(e,t){xr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Or=function(){function e(){ut(this,e)}return lt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void _r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void _r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void _r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Pr=(ht(fr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ht(fr,"MISSING_CUSTOM_TOKEN","internal-error"),ht(fr,"INVALID_IDENTIFIER","invalid-email"),ht(fr,"MISSING_CONTINUE_URI","internal-error"),ht(fr,"INVALID_PASSWORD","wrong-password"),ht(fr,"MISSING_PASSWORD","internal-error"),ht(fr,"EMAIL_EXISTS","email-already-in-use"),ht(fr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ht(fr,"INVALID_IDP_RESPONSE","invalid-credential"),ht(fr,"INVALID_PENDING_TOKEN","invalid-credential"),ht(fr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ht(fr,"MISSING_REQ_TYPE","internal-error"),ht(fr,"EMAIL_NOT_FOUND","user-not-found"),ht(fr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ht(fr,"EXPIRED_OOB_CODE","expired-action-code"),ht(fr,"INVALID_OOB_CODE","invalid-action-code"),ht(fr,"MISSING_OOB_CODE","internal-error"),ht(fr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ht(fr,"INVALID_ID_TOKEN","invalid-user-token"),ht(fr,"TOKEN_EXPIRED","user-token-expired"),ht(fr,"USER_NOT_FOUND","user-token-expired"),ht(fr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ht(fr,"INVALID_CODE","invalid-verification-code"),ht(fr,"INVALID_SESSION_INFO","invalid-verification-id"),ht(fr,"INVALID_TEMPORARY_PROOF","invalid-credential"),ht(fr,"MISSING_SESSION_INFO","missing-verification-id"),ht(fr,"SESSION_EXPIRED","code-expired"),ht(fr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ht(fr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ht(fr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ht(fr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ht(fr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ht(fr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ht(fr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ht(fr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ht(fr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ht(fr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ht(fr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),fr),Lr=new Rr(3e4,6e4);function Mr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Fr(e,t,n,r){return Ur.apply(this,arguments)}function Ur(){return Ur=ot(rt().mark((function e(t,n,r,i){var a,o=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Vr(t,a,ot(rt().mark((function e(){var a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ut(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Or.fetch()(zr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}function Vr(e,t,n){return jr.apply(this,arguments)}function jr(){return(jr=ot(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Pr),n),e.prev=2,a=new Kr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Gr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=it(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Gr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Gr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Gr(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw kr(t,d,h);case 34:mr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Rt)){e.next=41;break}throw e.t0;case 41:mr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Br(e,t,n,r){return qr.apply(this,arguments)}function qr(){return qr=ot(rt().mark((function e(t,n,r,i){var a,o,u=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Fr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&mr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function zr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Dr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Kr=function(){function e(t){var n=this;ut(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(gr(n.auth,"network-request-failed"))}),Lr.get())}))}return lt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Gr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=gr(e,t,r);return i.customData._tokenResponse=n,i}function Hr(e,t){return Wr.apply(this,arguments)}function Wr(){return(Wr=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(e,t){return $r.apply(this,arguments)}function $r(){return($r=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Xr(){return Xr=ot(rt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Kt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,wr((a=Zr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Yr(Jr(a.auth_time)),issuedAtTime:Yr(Jr(a.iat)),expirationTime:Yr(Jr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Jr(e){return 1e3*Number(e)}function Zr(e){var t=it(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return yr("JWT malformed, contained fewer than 3 sections"),null;try{var a=gt(r);return a?JSON.parse(a):(yr("Failed to decode base64 JWT payload"),null)}catch(o){return yr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=ot(rt().mark((function e(t,n){var r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Rt&&ni(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ti.apply(this,arguments)}function ni(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ri=function(){function e(t){ut(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return lt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ii=function(){function e(t,n){ut(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return lt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ai(e){return oi.apply(this,arguments)}function oi(){return oi=ot(rt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ei(t,Qr(r,{idToken:i}));case 6:wr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ci(o.providerUserInfo):[],s=si(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ii(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),oi.apply(this,arguments)}function ui(){return(ui=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kt(t),e.next=3,ai(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function si(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ft(n),ft(t))}function ci(e){return e.map((function(e){var t=e.providerId,n=lr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function li(e,t){return fi.apply(this,arguments)}function fi(){return(fi=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(t,{},ot(rt().mark((function e(){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=zr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Or.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hi=function(){function e(){ut(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return lt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){wr(e.idToken,"internal-error"),wr("undefined"!==typeof e.idToken,"internal-error"),wr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Zr(e);return wr(t,"internal-error"),wr("undefined"!==typeof t.exp,"internal-error"),wr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ot(rt().mark((function e(t){var n,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],wr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,li(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return _r("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(wr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(wr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(wr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function di(e,t){wr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var pi=function(){function e(t){ut(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=lr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ri(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ft(a.providerData):[],this.metadata=new ii(a.createdAt||void 0,a.lastLoginAt||void 0)}return lt(e,[{key:"getIdToken",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(wr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Xr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ui.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ot(rt().mark((function e(t){var n,r,i=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ai(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ei(this,Hr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;wr(k&&x,t,"internal-error");var S=hi.fromJSON(this.name,x);wr("string"===typeof k,t,"internal-error"),di(f,t.name),di(h,t.name),wr("boolean"===typeof b,t,"internal-error"),wr("boolean"===typeof w,t,"internal-error"),di(d,t.name),di(p,t.name),di(v,t.name),di(y,t.name),di(m,t.name),di(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ot(rt().mark((function t(n,r){var i,a,o,u=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new hi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ai(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),vi=function(){function e(){ut(this,e),this.type="NONE",this.storage={}}return lt(e,[{key:"_isAvailable",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();vi.type="NONE";var yi=vi;function mi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var gi=function(){function e(t,n,r){ut(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=mi(this.userKey,a.apiKey,o),this.fullPersistenceKey=mi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return lt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?pi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ot(rt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Er(yi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Er(yi),u=mi(i,n.config.apiKey,n.name),s=null,c=nt(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=pi._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ki(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ei(t))return"Blackberry";if(Ii(t))return"Webos";if(wi(t))return"Safari";if((t.includes("chrome/")||_i(t))&&!t.includes("edge/"))return"Chrome";if(Si(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/firefox\//i.test(e)}function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/crios\//i.test(e)}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iemobile/i.test(e)}function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/android/i.test(e)}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/blackberry/i.test(e)}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/webos/i.test(e)}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ci(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return Ti(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ni(){return function(){var e=wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return Ti(e)||Si(e)||Ii(e)||Ei(e)||/windows phone/i.test(e)||xi(e)}function Ri(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ki(wt());break;case"Worker":t="".concat(ki(wt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Bn,"/").concat(r)}var Di=function(){function e(t){ut(this,e),this.auth=t,this.queue=[]}return lt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ot(rt().mark((function e(t){var n,r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=nt(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=nt(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Oi=function(){function e(t,n,r){ut(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Li(this),this.idTokenSubscription=new Li(this),this.beforeStateQueue=new Di(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return lt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(ot(rt().mark((function r(){var i,a;return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,gi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ot(rt().mark((function e(t){var n,r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return wr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ai(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Kt(t):null)&&wr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ot(rt().mark((function e(t){var n,r=this,i=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&wr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ot(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Er(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return wr(n=t&&Er(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,gi.create(this,[Er(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ot(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return wr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ri(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ot(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ht({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pi(e){return Kt(e)}var Li=function(){function e(t){var n=this;ut(this,e),this.auth=t,this.observer=null,this.addObserver=Bt((function(e){return n.observer=e}))}return lt(e,[{key:"next",get:function(){return wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Mi(e,t,n){var r=Pi(e);wr(r._canInitEmulator,r,"emulator-config-failed"),wr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Fi(t),o=function(e){var t=Fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ui(r.substr(a.length+1))}}var o=it(r.split(":"),2);return{host:o[0],port:Ui(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ui(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Vi=function(){function e(t,n){ut(this,e),this.providerId=t,this.signInMethod=n}return lt(e,[{key:"toJSON",value:function(){return _r("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return _r("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return _r("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return _r("not implemented")}}]),e}();function ji(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(e,t){return zi.apply(this,arguments)}function zi(){return(zi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPassword",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return(Gi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qi=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ut(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return lt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",qi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ki(t,{email:this._email,oobCode:this._password}));case 5:mr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ji(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Hi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:mr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Vi);function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithIdp",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xi=function(e){$e(n,e);var t=Ze(n);function n(){var e;return ut(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return lt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return $i(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$i(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$i(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ut(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=lr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Vi);function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:sendVerificationCode",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(){return(ta=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Gr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var na=ht({},"USER_NOT_FOUND","user-not-found");function ra(){return(ra=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,r),na));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this,"phone","phone")).params=e,r}return lt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ea.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ta.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ra.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Vi);var aa=function(){function e(t){var n,r,i,a,o,u;ut(this,e);var s=Vt(jt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);wr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return lt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Vt(jt(e)).link,n=t?Vt(jt(t)).deep_link_id:null,r=Vt(jt(e)).deep_link_id;return(r?Vt(jt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(fS){return null}}}]),e}();var oa=function(){function e(){ut(this,e),this.providerId=e.PROVIDER_ID}return lt(e,null,[{key:"credential",value:function(e,t){return Qi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=aa.parseLink(t);return wr(n,"argument-error"),Qi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();oa.PROVIDER_ID="password",oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ua=function(){function e(t){ut(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return lt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),sa=function(e){$e(n,e);var t=Ze(n);function n(){var e;return ut(this,n),(e=t.apply(this,arguments)).scopes=[],e}return lt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ft(this.scopes)}}]),n}(ua),ca=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.call(this,"facebook.com")}return lt(n,null,[{key:"credential",value:function(e){return Xi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(fS){return null}}}]),n}(sa);ca.FACEBOOK_SIGN_IN_METHOD="facebook.com",ca.PROVIDER_ID="facebook.com";var la=function(e){$e(n,e);var t=Ze(n);function n(){var e;return ut(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return lt(n,null,[{key:"credential",value:function(e,t){return Xi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(fS){return null}}}]),n}(sa);la.GOOGLE_SIGN_IN_METHOD="google.com",la.PROVIDER_ID="google.com";var fa=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.call(this,"github.com")}return lt(n,null,[{key:"credential",value:function(e){return Xi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(fS){return null}}}]),n}(sa);fa.GITHUB_SIGN_IN_METHOD="github.com",fa.PROVIDER_ID="github.com";var ha=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.call(this,"twitter.com")}return lt(n,null,[{key:"credential",value:function(e,t){return Xi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(fS){return null}}}]),n}(sa);function da(e,t){return pa.apply(this,arguments)}function pa(){return(pa=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signUp",Mr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ha.TWITTER_SIGN_IN_METHOD="twitter.com",ha.PROVIDER_ID="twitter.com";var va=function(){function e(t){ut(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return lt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ot(rt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,pi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ya(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ot(rt().mark((function t(n,r,i){var a;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ya(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ya(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var ma=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a){var o,u;return ut(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Qe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return lt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Rt);function ga(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ma._fromErrorAndOperation(e,n,t,r);throw n}))}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=ot(rt().mark((function e(t,n){var r,i,a=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ei,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",va._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e,t){return _a.apply(this,arguments)}function _a(){return _a=ot(rt().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ei(t,ga(i,a,n,t),r);case 6:return wr((o=e.sent).idToken,i,"internal-error"),wr(u=Zr(o.idToken),i,"internal-error"),s=u.sub,wr(t.uid===s,i,"user-mismatch"),e.abrupt("return",va._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&mr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_a.apply(this,arguments)}function xa(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=ot(rt().mark((function e(t,n){var r,i,a,o,u=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ga(t,i,n);case 4:return a=e.sent,e.next=7,va._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ea(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xa(Pi(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(){return(Ta=ot(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pi(t),e.next=3,da(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,va._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t,n,r){return Kt(e).onIdTokenChanged(t,n,r)}function Na(e,t,n){return Kt(e).beforeAuthStateChanged(t,n)}function Aa(e,t){return Fr(e,"POST","/v2/accounts/mfaEnrollment:start",Mr(e,t))}new WeakMap;var Ra="__sak",Da=function(){function e(t,n){ut(this,e),this.storageRetriever=t,this.type=n}return lt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ra,"1"),this.storage.removeItem(Ra),Promise.resolve(!0)):Promise.resolve(!1)}catch(fS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Oa=function(e){$e(n,e);var t=Ze(n);function n(){var e;return ut(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=wt();return wi(e)||Ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ai(),e._shouldAllowMigration=!0,e}return lt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ni()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ot(rt().mark((function e(t,r){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(Ge(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ot(rt().mark((function e(t){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(Ge(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(Ge(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Da);Oa.type="LOCAL";var Pa=Oa,La=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return lt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Da);La.type="SESSION";var Ma=La;function Fa(e){return Promise.all(e.map(function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ua=function(){function e(t){ut(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return lt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ot(rt().mark((function e(t){var n,r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Fa(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Va(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ua.receivers=[];var ja=function(){function e(t){ut(this,e),this.target=t,this.handlers=new Set}return lt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Va("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ba(){return window}function qa(){return"undefined"!==typeof Ba().WorkerGlobalScope&&"function"===typeof Ba().importScripts}function za(){return Ka.apply(this,arguments)}function Ka(){return(Ka=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ga(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ha="firebaseLocalStorageDb",Wa="firebaseLocalStorage",Qa="fbase_key",$a=function(){function e(t){ut(this,e),this.request=t}return lt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ya(e,t){return e.transaction([Wa],t?"readwrite":"readonly").objectStore(Wa)}function Xa(){var e=indexedDB.deleteDatabase(Ha);return new $a(e).toPromise()}function Ja(){var e=indexedDB.open(Ha,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Wa,{keyPath:Qa})}catch(r){n(r)}})),e.addEventListener("success",ot(rt().mark((function n(){var r;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Wa)){n.next=12;break}return r.close(),n.next=5,Xa();case 5:return n.t0=t,n.next=8,Ja();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Za(e,t,n){return eo.apply(this,arguments)}function eo(){return eo=ot(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ya(t,!0).put((ht(i={},Qa,n),ht(i,"value",r),i)),e.abrupt("return",new $a(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return no=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ya(t,!1).get(n),e.next=3,new $a(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(e,t){var n=Ya(e,!0).delete(t);return new $a(n).toPromise()}var io=function(){function e(){ut(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return lt(e,[{key:"_openDb",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ja();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ot(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ua._getInstance(qa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ot(rt().mark((function e(n,r){var i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ot(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ja(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ga()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ja();case 5:return t=e.sent,e.next=8,Za(t,Ra,"1");case 8:return e.next=10,ro(t,Ra);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ot(rt().mark((function e(t,n){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Za(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return to(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ot(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ro(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ya(e,!1).getAll();return new $a(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=nt(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();io.type="LOCAL";var ao=io;function oo(e,t){return Fr(e,"POST","/v2/accounts/mfaSignIn:start",Mr(e,t))}function uo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=gr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function so(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}so("rcb"),new Rr(3e4,6e4);var co="recaptcha";function lo(e,t,n){return fo.apply(this,arguments)}function fo(){return fo=ot(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,wr("string"===typeof a,t,"argument-error"),wr(r.type===co,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return wr("enroll"===u.type,t,"internal-error"),e.next=13,Aa(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return wr("signin"===u.type,t,"internal-error"),wr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,oo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ji(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),fo.apply(this,arguments)}var ho=function(){function e(t){ut(this,e),this.providerId=e.PROVIDER_ID,this.auth=Pi(t)}return lt(e,[{key:"verifyPhoneNumber",value:function(e,t){return lo(this.auth,e,Kt(t))}}],[{key:"credential",value:function(e,t){return ia._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ia._fromTokenResponse(n,r):null}}]),e}();function po(e,t){return t?Er(t):(wr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ho.PROVIDER_ID="phone",ho.PHONE_SIGN_IN_METHOD="phone";var vo=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this,"custom","custom")).params=e,r}return lt(n,[{key:"_getIdTokenResponse",value:function(e){return $i(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return $i(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return $i(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Vi);function yo(e){return xa(e.auth,new vo(e),e.bypassAuthState)}function mo(e){var t=e.auth,n=e.user;return wr(n,t,"internal-error"),wa(n,new vo(e),e.bypassAuthState)}function go(e){return ko.apply(this,arguments)}function ko(){return(ko=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,wr(r=t.user,n,"internal-error"),e.abrupt("return",ka(r,new vo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ut(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return lt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ot(rt().mark((function t(n,r){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ot(rt().mark((function e(t){var n,r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yo;case"linkViaPopup":case"linkViaRedirect":return go;case"reauthViaPopup":case"reauthViaRedirect":return mo;default:mr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),wo=new Rr(2e3,1e4);var _o=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a,o){var u;return ut(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Qe(u),u}return lt(n,[{key:"executeNotNull",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return wr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ot(rt().mark((function e(){var t,n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xr(1===this.filter.length,"Popup operations only handle one event"),t=Va(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(gr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(gr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(gr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,wo.get())}()}}]),n}(bo);_o.currentPopupAction=null;var xo=new Map,So=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ut(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return lt(n,[{key:"execute",value:function(){var e=ot(rt().mark((function e(){var t,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Eo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,We(Ge(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:xo.set(this.auth._key(),t);case 21:return this.bypassAuthState||xo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ot(rt().mark((function e(t){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",We(Ge(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",We(Ge(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(bo);function Eo(e,t){return Io.apply(this,arguments)}function Io(){return Io=ot(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=No(n),i=Co(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function To(e,t){xo.set(e._key(),t)}function Co(e){return Er(e._redirectPersistence)}function No(e){return mi("pendingRedirect",e.config.apiKey,e.name)}function Ao(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=ot(rt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Pi(t),a=po(i,n),o=new So(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}var Do=function(){function e(t){ut(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return lt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Po(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Po(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(gr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Oo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Oo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Po(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Lo(e){return Mo.apply(this,arguments)}function Mo(){return Mo=ot(rt().mark((function e(t){var n,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Fr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}var Fo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uo=/^https?/;function Vo(){return(Vo=ot(rt().mark((function e(t){var n,r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lo(t);case 4:n=e.sent,r=n.authorizedDomains,i=nt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!jo(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:mr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function jo(e){var t=Tr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Uo.test(r))return!1;if(Fo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bo=new Rr(3e4,6e4);function qo(){var e=Ba().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ft(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var zo=null;function Ko(e){return zo=zo||function(e){return new Promise((function(t,n){var r,i,a;function o(){qo(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){qo(),n(gr(e,"network-request-failed"))},timeout:Bo.get()})}if(null===(i=null===(r=Ba().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ba().gapi)||void 0===a?void 0:a.load)){var u=so("iframefcb");return Ba()[u]=function(){gapi.load?o():n(gr(e,"network-request-failed"))},uo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw zo=null,e}))}(e),zo}var Go=new Rr(5e3,15e3),Ho={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qo(e){var t=e.config;wr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Dr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Bn},i=Wo.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ut(r).slice(1))}function $o(e){return Yo.apply(this,arguments)}function Yo(){return Yo=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ko(t);case 2:return n=e.sent,wr(r=Ba().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qo(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ho,dontclear:!0},(function(e){return new Promise(function(){var n=ot(rt().mark((function n(r,i){var a,o,u;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ba().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=gr(t,"network-request-failed"),o=Ba().setTimeout((function(){i(a)}),Go.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}var Xo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jo="_blank",Zo="http://localhost",eu=function(){function e(t){ut(this,e),this.window=t,this.associatedEvent=null}return lt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function tu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Xo),{width:r.toString(),height:i.toString(),top:a,left:o}),c=wt().toLowerCase();n&&(u=_i(c)?Jo:n),bi(c)&&(t=t||Zo,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=it(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Ci(c)&&"_self"!==u)return nu(t||"",u),new eu(null);var f=window.open(t||"",u,l);wr(f,e,"popup-blocked");try{f.focus()}catch(h){}return new eu(f)}function nu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ru="__/auth/handler",iu="emulator/auth/handler";function au(e,t,n,r,i,a){wr(e.config.authDomain,e,"auth-domain-config-required"),wr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bn,eventId:i};if(t instanceof ua){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=it(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof sa){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ru);return Dr(t,iu)}(e),"?").concat(Ut(d).slice(1))}var ou="webStorageSupport",uu=function(){function e(){ut(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ma,this._completeRedirectFn=Ao,this._overrideRedirectResult=To}return lt(e,[{key:"_openPopup",value:function(){var e=ot(rt().mark((function e(t,n,r,i){var a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=au(t,n,r,Tr(),i),e.abrupt("return",tu(t,o,Va()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ot(rt().mark((function e(t,n,r,i){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=au(t,n,r,Tr(),i),Ba().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(xr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(t);case 2:return n=e.sent,r=new Do(t),n.register("authEvent",(function(e){return wr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ou,{type:ou},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ou];void 0!==i&&t(!!i),mr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ai()||wi()||Ti()}}]),e}(),su=uu,cu=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this,"phone")).credential=e,r}return lt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Fr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Mr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Fr(e,"POST","/v2/accounts/mfaSignIn:finalize",Mr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){ut(this,e),this.factorId=t}return lt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _r("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){ut(this,e)}return lt(e,null,[{key:"assertion",value:function(e){return cu._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var lu="@firebase/auth",fu="0.21.0",hu=function(){function e(t){ut(this,e),this.auth=t,this.internalListeners=new Map}return lt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var du,pu=Ct("authIdTokenMaxAge")||300,vu=null,yu=function(e){return function(){var t=ot(rt().mark((function t(n){var r,i,a;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>pu)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,vu!==a){t.next=12;break}return t.abrupt("return");case 12:return vu=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn(),t=Ln(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Ir(e,{popupRedirectResolver:su,persistence:[ao,Pa,Ma]}),r=Ct("authTokenSyncURL");if(r){var i=yu(r);Na(n,i,(function(){return i(n.currentUser)})),Ca(n,(function(e){return i(e)}))}var a=It("auth");return a&&Mi(n,"http://".concat(a)),n}du="Browser",Pn(new Gt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){wr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),wr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:du,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ri(du)},i=new Oi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Pn(new Gt("auth-internal",(function(e){return function(e){return new hu(e)}(Pi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(lu,fu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(du)),Wn(lu,fu,"esm2017");var gu="SET_VALUES",ku="SET_ERRORS",bu="SET_VALID",wu="SET_AUTH",_u="SET_MODAL_VISIBLE",xu="SET_MODAL_IMG_VISIBLE",Su="SET_SELECTED_FOTO",Eu="SET_IS_FILE_LOADING",Iu="GET_USER",Tu="GET_USER_FAILED",Cu="GET_USER_SUCCESS",Nu="LOGOUT",Au="LOGOUT_FAILED",Ru="LOGOUT_SUCCESS",Du=function(){return function(e){e({type:_u,payload:!1}),e({type:xu,payload:!1})}};var Ou=function(){return function(e){e({type:Iu}),function(e,t,n,r){Kt(e).onAuthStateChanged(t,n,r)}(mu(),(function(t){t?e({type:Cu,payload:t}):function(e){e({type:Tu})}(e)}))}};var Pu,Lu=function(){return function(e){e({type:Nu}),function(e){return Kt(e).signOut()}(mu()).then((function(){e({type:Ru}),e({type:wu,payload:!1}),e({type:Cu,payload:null})})).catch((function(t){!function(e){e({type:Au})}(e)}))}},Mu=n(184),Fu=function(){var e=S(),t=v((function(e){return e.user})),n=t.currentUser,r=t.getUserRequest;return(0,Mu.jsx)("header",{className:Ve,children:(0,Mu.jsxs)("div",{className:je,children:[(0,Mu.jsx)(Me,{to:"/foto-albom/",className:ze,children:(0,Mu.jsx)("h1",{children:"Fire Gram"})}),r?(0,Mu.jsx)(Mu.Fragment,{}):n?(0,Mu.jsxs)("div",{children:[(0,Mu.jsx)("span",{children:n.email}),(0,Mu.jsx)("button",{onClick:function(){e(Lu())},className:Ke,children:"\u0412\u044b\u0439\u0442\u0438"})]}):(0,Mu.jsxs)("div",{children:[(0,Mu.jsx)(Me,{to:"/foto-albom/login",className:Be,children:"\u0412\u043e\u0439\u0442\u0438"}),(0,Mu.jsx)(Me,{to:"/foto-albom/register",className:"".concat(Be," ").concat(qe),children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})})},Uu={},Vu="main_table__-AQiY",ju="main_header__title_container__63uCB",Bu="main_header__subtitle__4eNXr",qu="main_header__text__Op1mL",zu="main_header__button__91iMi",Ku=function(){function e(t,n){var r=this;ut(this,e),this._delegate=t,this.firebase=n,Dn(t,new Gt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return lt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Gn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Dn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){On(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Gu=(ht(Pu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ht(Pu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Pu),Hu=new Dt("app-compat","Firebase",Gu);var Wu=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=qn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Lt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Wn,setLogLevel:$n,onLog:Qn,apps:null,SDK_VERSION:Bn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Pn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Hu.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&kt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Lt(n,e=e||Cn))throw Hu.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Ku);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){kt(n,e)},createSubscribe:Bt,ErrorFactory:Dt,deepExtend:kt}),n}(),Qu=new nn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Qu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var $u=self.firebase.SDK_VERSION;$u&&$u.indexOf("LITE")>=0&&Qu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yu=Wu;!function(e){Wn("@firebase/app-compat","0.2.0",e)}();Yu.registerVersion("firebase","9.15.0","app-compat");var Xu="firebasestorage.googleapis.com",Ju="storageBucket",Zu=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ut(this,n),(i=t.call(this,es(e),"Firebase Storage: ".concat(r," (").concat(es(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Qe(i),n.prototype),i}return lt(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return es(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Rt);function es(e){return"storage/"+e}function ts(){return new Zu("unknown","An unknown error occurred, please check the error payload for server response.")}function ns(){return new Zu("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function rs(){return new Zu("canceled","User canceled the upload/download.")}function is(){return new Zu("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function as(e){return new Zu("invalid-argument",e)}function os(){return new Zu("app-deleted","The Firebase app was deleted.")}function us(e){return new Zu("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ss(e,t){return new Zu("invalid-format","String does not match format '"+e+"': "+t)}function cs(e){throw new Zu("internal-error","Internal error: "+e)}var ls,fs=function(){function e(t,n){ut(this,e),this.bucket=t,this.path_=n}return lt(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Zu("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Xu?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Zu("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),hs=function(){function e(t){ut(this,e),this.promise_=Promise.reject(t)}return lt(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function ds(e){return"string"===typeof e||e instanceof String}function ps(e){return vs()&&e instanceof Blob}function vs(){return"undefined"!==typeof Blob&&!_t()}function ys(e,t,n,r){if(r<t)throw as("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw as("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ms(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function gs(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function ks(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ls||(ls={}));var bs=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];ut(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return lt(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=ts();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?os():rs());else i(ns())}};this.canceled_?t(0,new ws(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new ws(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===ls.NO_ERROR,a=r.getStatus();if(n&&!ks(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new ws(o,r))}else{var u=r.getErrorCode()===ls.ABORT;t(!1,new ws(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),ws=lt((function e(t,n,r){ut(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function _s(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function xs(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Ss(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Es(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Is(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=gs(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return Ss(c,t),_s(c,n),xs(c,a),Es(c,r),new bs(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function Ts(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Cs(){for(var e=Ts(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(vs())return new Blob(n);throw new Zu("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Ns(e){if("undefined"===typeof atob)throw new Zu("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var As={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Rs=lt((function e(t,n){ut(this,e),this.data=t,this.contentType=n||null}));function Ds(e,t){switch(e){case As.RAW:return new Rs(Os(t));case As.BASE64:case As.BASE64URL:return new Rs(Ps(e,t));case As.DATA_URL:return new Rs(function(e){var t=new Ls(e);return t.base64?Ps(As.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw ss(As.DATA_URL,"Malformed data URL.")}return Os(t)}(t.rest)}(t),new Ls(t).contentType)}throw ts()}function Os(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ps(e,t){switch(e){case As.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ss(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case As.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw ss(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Ns(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw ss(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Ls=lt((function e(t){ut(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw ss(As.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Ms=function(){function e(t,n){ut(this,e);var r=0,i="";ps(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return lt(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(ps(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(vs()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Cs.apply(null,i))}var a=n.map((function(e){return ds(e)?Ds(As.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Fs(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Us(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vs(e,t){return t}var js=lt((function e(t,n,r,i){ut(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Vs})),Bs=null;function qs(){if(Bs)return Bs;var e=[];e.push(new js("bucket")),e.push(new js("generation")),e.push(new js("metageneration")),e.push(new js("name","fullPath",!0));var t=new js("name");t.xform=function(e,t){return function(e){return!ds(e)||e.length<2?e:Us(e)}(t)},e.push(t);var n=new js("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new js("timeCreated")),e.push(new js("updated")),e.push(new js("md5Hash",null,!0)),e.push(new js("cacheControl",null,!0)),e.push(new js("contentDisposition",null,!0)),e.push(new js("contentEncoding",null,!0)),e.push(new js("contentLanguage",null,!0)),e.push(new js("contentType",null,!0)),e.push(new js("metadata","customMetadata",!0)),Bs=e}function zs(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new fs(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Ks(e,t,n){var r=Fs(t);return null===r?null:zs(e,r,n)}function Gs(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var Hs="prefixes",Ws="items";function Qs(e,t,n){var r=Fs(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Hs]){var i,a=nt(n[Hs]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new fs(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[Ws]){var s,c=nt(n[Ws]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new fs(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var $s=lt((function e(t,n,r,i){ut(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Ys(e){if(!e)throw ts()}function Xs(e,t){return function(n,r){var i=Ks(e,r,t);return Ys(null!==i),i}}function Js(e,t){return function(n,r){var i=Ks(e,r,t);return Ys(null!==i),function(e,t,n,r){var i=Fs(t);if(null===i)return null;if(!ds(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return ms("/b/"+o(i)+"/o/"+o(a),n,r)+gs({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Zs(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Zu("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Zu("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Zu("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Zu("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ec(e){var t=Zs(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Zu("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function tc(e,t,n){var r=ms(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new $s(r,"GET",Xs(e,n),i);return a.errorHandler=ec(t),a}function nc(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=ms(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new $s(o,"GET",function(e,t){return function(n,r){var i=Qs(e,t,r);return Ys(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Zs(t),s}function rc(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ic(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=rc(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Gs(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Ms.getBlob(c,r,l);if(null===f)throw is();var h={name:s.fullPath},d=ms(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new $s(d,"POST",Xs(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Zs(t),v}var ac=lt((function e(t,n,r,i){ut(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function oc(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ys(!1)}return Ys(!!n&&-1!==(t||["active"]).indexOf(n)),n}var uc=262144;function sc(e,t,n,r,i,a,o,u){var s=new ac(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Zu("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw is();var v=t.maxUploadRetryTime,y=new $s(n,"POST",(function(e,n){var i,o=oc(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Xs(t,a)(e,n):null,new ac(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=Zs(e),y}var cc={STATE_CHANGED:"state_changed"},lc={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fc(e){switch(e){case"running":case"pausing":case"canceling":return lc.RUNNING;case"paused":return lc.PAUSED;case"success":return lc.SUCCESS;case"canceled":return lc.CANCELED;default:return lc.ERROR}}var hc=lt((function e(t,n,r){ut(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function dc(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var pc=function(){function e(){var t=this;ut(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ls.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ls.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ls.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return lt(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw cs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw cs("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw cs("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw cs("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw cs("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),vc=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(pc);function yc(){return new vc}var mc=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ut(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=qs(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(ks(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=ns()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return lt(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=it(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=rc(t,r,i),u={name:o.fullPath},s=ms(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Gs(o,n),f=e.maxUploadRetryTime,h=new $s(s,"POST",(function(e){var t;oc(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Ys(!1)}return Ys(ds(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Zs(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,yc,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new $s(n,"POST",(function(e){var t=oc(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Ys(!1)}n||Ys(!1);var i=Number(n);return Ys(!isNaN(i)),new ac(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Zs(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,yc,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=uc*this._chunkMultiplier,n=new ac(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=sc(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,yc,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(uc*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=tc(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,yc,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=ic(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,yc,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=rs(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=fc(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new hc(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(fc(this._state)){case lc.SUCCESS:dc(this._resolve.bind(null,this.snapshot))();break;case lc.CANCELED:case lc.ERROR:dc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(fc(this._state)){case lc.RUNNING:case lc.PAUSED:e.next&&dc(e.next.bind(e,this.snapshot))();break;case lc.SUCCESS:e.complete&&dc(e.complete.bind(e))();break;default:e.error&&dc(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),gc=function(){function e(t,n){ut(this,e),this._service=t,this._location=n instanceof fs?n:fs.makeFromUrl(n,t.host)}return lt(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new fs(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Us(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new fs(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw us(e)}}]),e}();function kc(e,t,n){return bc.apply(this,arguments)}function bc(){return(bc=ot(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,wc(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ft(u.prefixes)),(a=n.items).push.apply(a,ft(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,kc(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wc(e,t){null!=t&&"number"===typeof t.maxResults&&ys("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=nc(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,yc)}function _c(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=ms(t.fullServerUrl(),e.host,e._protocol),a=Gs(n,r),o=e.maxOperationRetryTime,u=new $s(i,"PATCH",Xs(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=ec(t),u}(e.storage,e._location,t,qs());return e.storage.makeRequestWithTokens(n,yc)}function xc(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=ms(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new $s(r,"GET",Js(e,n),i);return a.errorHandler=ec(t),a}(e.storage,e._location,qs());return e.storage.makeRequestWithTokens(t,yc).then((function(e){if(null===e)throw new Zu("no-download-url","The given file does not have any download URLs.");return e}))}function Sc(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=ms(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new $s(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ec(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,yc)}function Ec(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new fs(e._location.bucket,n);return new gc(e.storage,r)}function Ic(e,t){if(e instanceof Ac){var n=e;if(null==n._bucket)throw new Zu("no-default-bucket","No default bucket found. Did you set the '"+Ju+"' property when initializing the app?");var r=new gc(n,n._bucket);return null!=t?Ic(r,t):r}return void 0!==t?Ec(e,t):e}function Tc(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ac)return new gc(e,t);throw as("To use ref(service, url), the first argument must be a Storage instance.")}return Ic(e,t)}function Cc(e,t){var n=null===t||void 0===t?void 0:t[Ju];return null==n?null:fs.makeFromBucketSpec(n,e)}function Nc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:At(i,e.app.options.projectId))}var Ac=function(){function e(t,n,r,i,a){ut(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Xu,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fs.makeFromBucketSpec(i,this._host):Cc(this._host,this.app.options)}return lt(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=fs.makeFromBucketSpec(this._url,e):this._bucket=Cc(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ys("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ys("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ot(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ot(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new gc(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new hs(os());var o=Is(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=it(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Rc="@firebase/storage",Dc="0.10.0",Oc="storage";function Pc(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new mc(e,new Ms(t),n)}(e=Kt(e),t,n)}function Lc(e){return function(e){e._throwIfRoot("getMetadata");var t=tc(e.storage,e._location,qs());return e.storage.makeRequestWithTokens(t,yc)}(e=Kt(e))}function Mc(e){return function(e){var t={prefixes:[],items:[]};return kc(e,t).then((function(){return t}))}(e=Kt(e))}function Fc(e,t){return Tc(e=Kt(e),t)}function Uc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Nc(e,t,n,r)}function Vc(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Ac(r,i,a,n,Bn)}Pn(new Gt(Oc,Vc,"PUBLIC").setMultipleInstances(!0)),Wn(Rc,Dc,""),Wn(Rc,Dc,"esm2017");var jc=function(){function e(t,n,r){ut(this,e),this._delegate=t,this.task=n,this.ref=r}return lt(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Bc=function(){function e(t,n){ut(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return lt(e,[{key:"snapshot",get:function(){return new jc(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new jc(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new jc(e,i,i._ref))}:{next:t.next?function(e){return t.next(new jc(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),qc=function(){function e(t,n){ut(this,e),this._delegate=t,this._service=n}return lt(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new zc(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new zc(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),zc=function(){function e(t,n){ut(this,e),this._delegate=t,this.storage=n}return lt(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Ec(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Bc(Pc(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:As.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Ds(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Bc(new mc(this._delegate,new Ms(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Mc(this._delegate).then((function(t){return new qc(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return wc(e=Kt(e),t)}(this._delegate,e||void 0).then((function(e){return new qc(e,t.storage)}))}},{key:"getMetadata",value:function(){return Lc(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return _c(e=Kt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return xc(Kt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Sc(Kt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw us(e)}}]),e}(),Kc=function(){function e(t,n){ut(this,e),this.app=t,this._delegate=n}return lt(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Gc(e))throw as("ref() expected a child path but got a URL, use refFromURL instead.");return new zc(Fc(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Gc(e))throw as("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fs.makeFromUrl(e,this._delegate.host)}catch(t){throw as("refFromUrl() expected a valid full URL but got an invalid one.")}return new zc(Fc(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Uc(this._delegate,e,t,n)}}]),e}();function Gc(e){return/^[A-Za-z]+:\/\//.test(e)}function Hc(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Kc(r,i)}!function(e){var t={TaskState:lc,TaskEvent:cc,StringFormat:As,Storage:Kc,Reference:zc};e.INTERNAL.registerComponent(new Gt("storage-compat",Hc,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.2.0")}(Yu);var Wc,Qc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$c={},Yc=Yc||{},Xc=Qc||self;function Jc(){}function Zc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function el(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var tl="closure_uid_"+(1e9*Math.random()>>>0),nl=0;function rl(e,t,n){return e.call.apply(e.bind,arguments)}function il(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function al(e,t,n){return(al=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rl:il).apply(null,arguments)}function ol(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ul(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sl(){this.s=this.s,this.o=this.o}sl.prototype.s=!1,sl.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,tl)&&e[tl]||(e[tl]=++nl))},sl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ll(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zc(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function hl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hl.prototype.h=function(){this.defaultPrevented=!0};var dl=function(){if(!Xc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xc.addEventListener("test",Jc,t),Xc.removeEventListener("test",Jc,t)}catch(n){}return e}();function pl(e){return/^[\s\xa0]*$/.test(e)}var vl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yl(e,t){return e<t?-1:e>t?1:0}function ml(){var e=Xc.navigator;return e&&(e=e.userAgent)?e:""}function gl(e){return-1!=ml().indexOf(e)}function kl(e){return kl[" "](e),e}kl[" "]=Jc;var bl,wl=gl("Opera"),_l=gl("Trident")||gl("MSIE"),xl=gl("Edge"),Sl=xl||_l,El=gl("Gecko")&&!(-1!=ml().toLowerCase().indexOf("webkit")&&!gl("Edge"))&&!(gl("Trident")||gl("MSIE"))&&!gl("Edge"),Il=-1!=ml().toLowerCase().indexOf("webkit")&&!gl("Edge");function Tl(){var e=Xc.document;return e?e.documentMode:void 0}e:{var Cl="",Nl=function(){var e=ml();return El?/rv:([^\);]+)(\)|;)/.exec(e):xl?/Edge\/([\d\.]+)/.exec(e):_l?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Il?/WebKit\/(\S+)/.exec(e):wl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nl&&(Cl=Nl?Nl[1]:""),_l){var Al=Tl();if(null!=Al&&Al>parseFloat(Cl)){bl=String(Al);break e}}bl=Cl}var Rl,Dl={};function Ol(){return function(e){var t=Dl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=vl(String(bl)).split("."),n=vl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yl(0==a[2].length,0==o[2].length)||yl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Xc.document&&_l){var Pl=Tl();Rl=Pl||(parseInt(bl,10)||void 0)}else Rl=void 0;var Ll=Rl;function Ml(e,t){if(hl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(El){e:{try{kl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ml.X.h.call(this)}}ul(Ml,hl);var Fl={2:"touch",3:"pen",4:"mouse"};Ml.prototype.h=function(){Ml.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ul="closure_listenable_"+(1e6*Math.random()|0),Vl=0;function jl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Vl,this.ba=this.ea=!1}function Bl(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ql(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function zl(e){var t={};for(var n in e)t[n]=e[n];return t}var Kl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Kl.length;a++)n=Kl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Hl(e){this.src=e,this.g={},this.h=0}function Wl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=cl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Bl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ql(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Hl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ql(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new jl(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var $l="closure_lm_"+(1e6*Math.random()|0),Yl={};function Xl(e,t,n,r,i){if(r&&r.once)return Zl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xl(e,t[a],n,r,i);return null}return n=uf(n),e&&e[Ul]?e.N(t,n,el(r)?!!r.capture:!!r,i):Jl(e,t,n,!1,r,i)}function Jl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=el(i)?!!i.capture:!!i,u=af(e);if(u||(e[$l]=u=new Hl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=rf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Zl(e,t[a],n,r,i);return null}return n=uf(n),e&&e[Ul]?e.O(t,n,el(r)?!!r.capture:!!r,i):Jl(e,t,n,!0,r,i)}function ef(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ef(e,t[a],n,r,i);else r=el(r)?!!r.capture:!!r,n=uf(n),e&&e[Ul]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ql(a=e.g[t],n,r,i))&&(Bl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=af(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ql(t,n,r,i)),(n=-1<e?t[e]:null)&&tf(n))}function tf(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ul])Wl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=af(t))?(Wl(n,e),0==n.h&&(n.src=null,t[$l]=null)):Bl(e)}}}function nf(e){return e in Yl?Yl[e]:Yl[e]="on"+e}function rf(e,t){if(e.ba)e=!0;else{t=new Ml(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&tf(e),e=n.call(r,t)}return e}function af(e){return(e=e[$l])instanceof Hl?e:null}var of="__closure_events_fn_"+(1e9*Math.random()>>>0);function uf(e){return"function"===typeof e?e:(e[of]||(e[of]=function(t){return e.handleEvent(t)}),e[of])}function sf(){sl.call(this),this.i=new Hl(this),this.P=this,this.I=null}function cf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new hl(t,e);else if(t instanceof hl)t.target=t.target||e;else{var i=t;Gl(t=new hl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=lf(o,r,!0,t)&&i}if(i=lf(o=t.g=e,r,!0,t)&&i,i=lf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=lf(o=t.g=n[a],r,!1,t)&&i}function lf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Wl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ul(sf,sl),sf.prototype[Ul]=!0,sf.prototype.removeEventListener=function(e,t,n,r){ef(this,e,t,n,r)},sf.prototype.M=function(){if(sf.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bl(n[r]);delete t.g[e],t.h--}}this.I=null},sf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},sf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ff=Xc.JSON.stringify;function hf(){var e=bf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var df,pf=function(){function e(){ut(this,e),this.h=this.g=null}return lt(e,[{key:"add",value:function(e,t){var n=vf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vf=new(function(){function e(t,n){ut(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return lt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new yf}),(function(e){return e.reset()})),yf=function(){function e(){ut(this,e),this.next=this.g=this.h=null}return lt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function mf(e){Xc.setTimeout((function(){throw e}),0)}function gf(e,t){df||function(){var e=Xc.Promise.resolve(void 0);df=function(){e.then(wf)}}(),kf||(df(),kf=!0),bf.add(e,t)}var kf=!1,bf=new pf;function wf(){for(var e;e=hf();){try{e.h.call(e.g)}catch(n){mf(n)}var t=vf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kf=!1}function _f(e,t){sf.call(this),this.h=e||1,this.g=t||Xc,this.j=al(this.lb,this),this.l=Date.now()}function xf(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Sf(e,t,n){if("function"===typeof e)n&&(e=al(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=al(e.handleEvent,e)}return 2147483647<Number(t)?-1:Xc.setTimeout(e,t||0)}function Ef(e){e.g=Sf((function(){e.g=null,e.i&&(e.i=!1,Ef(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ul(_f,sf),(Wc=_f.prototype).ca=!1,Wc.R=null,Wc.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),cf(this,"tick"),this.ca&&(xf(this),this.start()))}},Wc.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Wc.M=function(){_f.X.M.call(this),xf(this),delete this.g};var If=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return lt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ef(this)}},{key:"M",value:function(){We(Ge(n.prototype),"M",this).call(this),this.g&&(Xc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sl);function Tf(e){sl.call(this),this.h=e,this.g={}}ul(Tf,sl);var Cf=[];function Nf(e,t,n,r){Array.isArray(n)||(n&&(Cf[0]=n.toString()),n=Cf);for(var i=0;i<n.length;i++){var a=Xl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Af(e){ql(e.g,(function(e,t){this.g.hasOwnProperty(t)&&tf(e)}),e),e.g={}}function Rf(){this.g=!0}function Df(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ff(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Tf.prototype.M=function(){Tf.X.M.call(this),Af(this)},Tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rf.prototype.Aa=function(){this.g=!1},Rf.prototype.info=function(){};var Of={},Pf=null;function Lf(){return Pf=Pf||new sf}function Mf(e){hl.call(this,Of.Pa,e)}function Ff(e){var t=Lf();cf(t,new Mf(t))}function Uf(e,t){hl.call(this,Of.STAT_EVENT,e),this.stat=t}function Vf(e){var t=Lf();cf(t,new Uf(t,e))}function jf(e,t){hl.call(this,Of.Qa,e),this.size=t}function Bf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Xc.setTimeout((function(){e()}),t)}Of.Pa="serverreachability",ul(Mf,hl),Of.STAT_EVENT="statevent",ul(Uf,hl),Of.Qa="timingevent",ul(jf,hl);var qf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},zf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kf(){}function Gf(e){return e.h||(e.h=e.i())}function Hf(){}Kf.prototype.h=null;var Wf,Qf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function $f(){hl.call(this,"d")}function Yf(){hl.call(this,"c")}function Xf(){}function Jf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Tf(this),this.O=eh,e=Sl?125:void 0,this.T=new _f(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}ul($f,hl),ul(Yf,hl),ul(Xf,Kf),Xf.prototype.g=function(){return new XMLHttpRequest},Xf.prototype.i=function(){return{}},Wf=new Xf;var eh=45e3,th={},nh={};function rh(e,t,n){e.K=1,e.v=_h(mh(t)),e.s=n,e.P=!0,ih(e,null)}function ih(e,t){e.F=Date.now(),sh(e),e.A=mh(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Lh(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Zf,e.g=Md(e.l,n?t:null,!e.s),0<e.N&&(e.L=new If(al(e.La,e,e.g),e.N)),Nf(e.S,e.g,"readystatechange",e.ib),t=e.H?zl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Ff(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ah(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function oh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=uh(e,n))==nh){4==t&&(e.o=4,Vf(14),i=!1),Df(e.j,e.m,null,"[Incomplete Response]");break}if(r==th){e.o=4,Vf(15),Df(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Df(e.j,e.m,r,null),dh(e,r)}ah(e)&&r!=nh&&r!=th&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cd(t),t.K=!0,Vf(11))):(Df(e.j,e.m,n,"[Invalid Chunked Response]"),hh(e),fh(e))}function uh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?nh:(n=Number(t.substring(n,r)),isNaN(n)?th:(r+=1)+n>t.length?nh:(t=t.substr(r,n),e.C=r+n,t))}function sh(e){e.V=Date.now()+e.O,ch(e,e.O)}function ch(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Bf(al(e.gb,e),t)}function lh(e){e.B&&(Xc.clearTimeout(e.B),e.B=null)}function fh(e){0==e.l.G||e.I||Rd(e.l,e)}function hh(e){lh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,xf(e.T),Af(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function dh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||zh(n.h,e)))if(!e.J&&zh(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ad(n),bd(n)}Td(n),Vf(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Bf(al(n.cb,n),6e3));if(1>=qh(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Od(n,11)}else if((e.J||n.g==e)&&Ad(n),!pl(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Kh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,wh(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Ld(r,r.H?r.ka:null,r.V),d.J){Gh(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(lh(p),sh(p)),r.g=d}else Id(r);0<n.i.length&&_d(n)}else"stop"!=a[0]&&"close"!=a[0]||Od(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Od(n,7):kd(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Ff()}catch(a){}}function ph(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zc(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zc(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Wc=Jf.prototype).setTimeout=function(e){this.O=e},Wc.ib=function(e){e=e.target;var t=this.L;t&&3==dd(e)?t.l():this.La(e)},Wc.La=function(e){try{if(e==this.g)e:{var t=dd(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Sl||this.g&&(this.h.h||this.g.fa()||pd(this.g)))){this.I||4!=t||7==n||Ff(),lh(this);var r=this.g.aa();this.Y=r;t:if(ah(this)){var i=pd(this.g);e="";var a=i.length,o=4==dd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hh(this),fh(this);var u="";break t}this.h.i=new Xc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pl(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Vf(12),hh(this),fh(this);break e}Df(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dh(this,r)}this.P?(oh(this,t,u),Sl&&this.i&&3==t&&(Nf(this.S,this.T,"tick",this.hb),this.T.start())):(Df(this.j,this.m,u,null),dh(this,u)),4==t&&hh(this),this.i&&!this.I&&(4==t?Rd(this.l,this):(this.i=!1,sh(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Vf(12)):(this.o=0,Vf(13)),hh(this),fh(this)}}}catch(t){}},Wc.hb=function(){if(this.g){var e=dd(this.g),t=this.g.fa();this.C<t.length&&(lh(this),oh(this,e,t),this.i&&4!=e&&sh(this))}},Wc.cancel=function(){this.I=!0,hh(this)},Wc.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ff(),Vf(17)),hh(this),this.o=2,fh(this)):ch(this,this.V-e)};var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof yh){this.h=void 0!==t?t:e.h,gh(this,e.j),this.s=e.s,this.g=e.g,kh(this,e.m),this.l=e.l,t=e.i;var n=new Rh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bh(this,n),this.o=e.o}else e&&(n=String(e).match(vh))?(this.h=!!t,gh(this,n[1]||"",!0),this.s=xh(n[2]||""),this.g=xh(n[3]||"",!0),kh(this,n[4]),this.l=xh(n[5]||"",!0),bh(this,n[6]||"",!0),this.o=xh(n[7]||"")):(this.h=!!t,this.i=new Rh(null,this.h))}function mh(e){return new yh(e)}function gh(e,t,n){e.j=n?xh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bh(e,t,n){t instanceof Rh?(e.i=t,function(e,t){t&&!e.j&&(Dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Oh(this,t),Lh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Sh(t,Nh)),e.i=new Rh(t,e.h))}function wh(e,t,n){e.i.set(t,n)}function _h(e){return wh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Sh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Eh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Eh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Sh(t,Ih,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Sh(t,Ih,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Sh(n,"/"==n.charAt(0)?Ch:Th,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Sh(n,Ah)),e.join("")};var Ih=/[#\/\?@]/g,Th=/[#\?:]/g,Ch=/[#\?]/g,Nh=/[#\?@]/g,Ah=/#/g;function Rh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Oh(e,t){Dh(e),t=Mh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ph(e,t){return Dh(e),t=Mh(e,t),e.g.has(t)}function Lh(e,t,n){Oh(e,t),0<n.length&&(e.i=null,e.g.set(Mh(e,t),ll(n)),e.h+=n.length)}function Mh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Wc=Rh.prototype).add=function(e,t){Dh(this),this.i=null,e=Mh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Wc.forEach=function(e,t){Dh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Wc.oa=function(){Dh(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Wc.W=function(e){Dh(this);var t=[];if("string"===typeof e)Ph(this,e)&&(t=t.concat(this.g.get(Mh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Wc.set=function(e,t){return Dh(this),this.i=null,Ph(this,e=Mh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Wc.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Wc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Fh=lt((function e(t,n){ut(this,e),this.h=t,this.g=n}));function Uh(e){this.l=e||jh,Xc.PerformanceNavigationTiming?e=0<(e=Xc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Xc.g&&Xc.g.Ga&&Xc.g.Ga()&&Xc.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vh,jh=10;function Bh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qh(e){return e.h?1:e.g?e.g.size:0}function zh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Kh(e,t){e.g?e.g.add(t):e.h=t}function Gh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Hh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=nt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ll(e.i)}function Wh(){}function Qh(){this.g=new Wh}function $h(e,t,n){var r=n||"";try{ph(e,(function(e,n){var i=e;el(e)&&(i=ff(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Xh(e){this.l=e.ac||null,this.j=e.jb||!1}function Jh(e,t){sf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Zh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uh.prototype.cancel=function(){if(this.i=Hh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=nt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Wh.prototype.stringify=function(e){return Xc.JSON.stringify(e,void 0)},Wh.prototype.parse=function(e){return Xc.JSON.parse(e,void 0)},ul(Xh,Kf),Xh.prototype.g=function(){return new Jh(this.l,this.j)},Xh.prototype.i=(Vh={},function(){return Vh}),ul(Jh,sf);var Zh=0;function ed(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function td(e){e.readyState=4,e.l=null,e.j=null,e.A=null,nd(e)}function nd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Wc=Jh.prototype).open=function(e,t){if(this.readyState!=Zh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,nd(this)},Wc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Xc).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Wc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,td(this)),this.readyState=Zh},Wc.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,nd(this)),this.g&&(this.readyState=3,nd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Xc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ed(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Wc.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?td(this):nd(this),3==this.readyState&&ed(this)}},Wc.Va=function(e){this.g&&(this.response=this.responseText=e,td(this))},Wc.Ua=function(e){this.g&&(this.response=e,td(this))},Wc.ga=function(){this.g&&td(this)},Wc.setRequestHeader=function(e,t){this.v.append(e,t)},Wc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Wc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var rd=Xc.JSON.parse;function id(e){sf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ad,this.K=this.L=!1}ul(id,sf);var ad="",od=/^https?$/i,ud=["POST","PUT"];function sd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cd(e),fd(e)}function cd(e){e.D||(e.D=!0,cf(e,"complete"),cf(e,"error"))}function ld(e){if(e.h&&"undefined"!=typeof Yc&&(!e.C[1]||4!=dd(e)||2!=e.aa()))if(e.v&&4==dd(e))Sf(e.Ha,0,e);else if(cf(e,"readystatechange"),4==dd(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vh)[1]||null;if(!a&&Xc.self&&Xc.self.location){var o=Xc.self.location.protocol;a=o.substr(0,o.length-1)}i=!od.test(a?a.toLowerCase():"")}t=i}if(t)cf(e,"complete"),cf(e,"success");else{e.m=6;try{var u=2<dd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",cd(e)}}finally{fd(e)}}}function fd(e,t){if(e.g){hd(e);var n=e.g,r=e.C[0]?Jc:null;e.g=null,e.C=null,t||cf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function hd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Xc.clearTimeout(e.A),e.A=null)}function dd(e){return e.g?e.g.readyState:0}function pd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ad:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Jd){return null}}function vd(e){var t="";return ql(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function yd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wh(e,t,n))}function md(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function gd(e){this.Ca=0,this.i=[],this.j=new Rf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=md("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=md("baseRetryDelayMs",5e3,e),this.bb=md("retryDelaySeedMs",1e4,e),this.$a=md("forwardChannelMaxRetries",2,e),this.ta=md("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Uh(e&&e.concurrentRequestLimit),this.Fa=new Qh,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function kd(e){if(wd(e),3==e.G){var t=e.U++,n=mh(e.F);wh(n,"SID",e.I),wh(n,"RID",t),wh(n,"TYPE","terminate"),Sd(e,n),(t=new Jf(e,e.j,t,void 0)).K=2,t.v=_h(mh(n)),n=!1,Xc.navigator&&Xc.navigator.sendBeacon&&(n=Xc.navigator.sendBeacon(t.v.toString(),"")),!n&&Xc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Md(t.l,null),t.g.da(t.v)),t.F=Date.now(),sh(t)}Pd(e)}function bd(e){e.g&&(Cd(e),e.g.cancel(),e.g=null)}function wd(e){bd(e),e.u&&(Xc.clearTimeout(e.u),e.u=null),Ad(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Xc.clearTimeout(e.m),e.m=null)}function _d(e){Bh(e.h)||e.m||(e.m=!0,gf(e.Ja,e),e.C=0)}function xd(e,t){var n;n=t?t.m:e.U++;var r=mh(e.F);wh(r,"SID",e.I),wh(r,"RID",n),wh(r,"AID",e.T),Sd(e,r),e.o&&e.s&&yd(r,e.o,e.s),n=new Jf(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Ed(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Kh(e.h,n),rh(n,r,t)}function Sd(e,t){e.ia&&ql(e.ia,(function(e,n){wh(t,n,e)})),e.l&&ph({},(function(e,n){wh(t,n,e)}))}function Ed(e,t,n){n=Math.min(e.i.length,n);var r=e.l?al(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{$h(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Id(e){e.g||e.u||(e.Z=1,gf(e.Ia,e),e.A=0)}function Td(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Bf(al(e.Ia,e),Dd(e,e.A)),e.A++,!0)}function Cd(e){null!=e.B&&(Xc.clearTimeout(e.B),e.B=null)}function Nd(e){e.g=new Jf(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=mh(e.sa);wh(t,"RID","rpc"),wh(t,"SID",e.I),wh(t,"CI",e.L?"0":"1"),wh(t,"AID",e.T),wh(t,"TYPE","xmlhttp"),Sd(e,t),e.o&&e.s&&yd(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=_h(mh(t)),n.s=null,n.P=!0,ih(n,e)}function Ad(e){null!=e.v&&(Xc.clearTimeout(e.v),e.v=null)}function Rd(e,t){var n=null;if(e.g==t){Ad(e),Cd(e),e.g=null;var r=2}else{if(!zh(e.h,t))return;n=t.D,Gh(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;cf(r=Lf(),new jf(r,n)),_d(e)}else Id(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(qh(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Bf(al(e.Ja,e,t),Dd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Td(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Od(e,5);break;case 4:Od(e,10);break;case 3:Od(e,6);break;default:Od(e,2)}}function Dd(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Od(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=al(e.kb,e);n||(n=new yh("//www.google.com/images/cleardot.gif"),Xc.location&&"http"==Xc.location.protocol||gh(n,"https"),_h(n)),function(e,t){var n=new Rf;if(Xc.Image){var r=new Image;r.onload=ol(Yh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ol(Yh,n,r,"TestLoadImage: error",!1,t),r.onabort=ol(Yh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ol(Yh,n,r,"TestLoadImage: timeout",!1,t),Xc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vf(2);e.G=0,e.l&&e.l.va(t),Pd(e),wd(e)}function Pd(e){if(e.G=0,e.la=[],e.l){var t=Hh(e.h);0==t.length&&0==e.i.length||(fl(e.la,t),fl(e.la,e.i),e.h.i.length=0,ll(e.i),e.i.length=0),e.l.ua()}}function Ld(e,t,n){var r=n instanceof yh?mh(n):new yh(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),kh(r,r.m);else{var i=Xc.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new yh(null,void 0);r&&gh(a,r),t&&(a.g=t),i&&kh(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&wh(r,n,t),wh(r,"VER",e.ma),Sd(e,r),r}function Md(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new id(new Xh({jb:!0})):new id(e.ra)).Ka(e.H),t}function Fd(){}function Ud(){if(_l&&!(10<=Number(Ll)))throw Error("Environmental error: no available transport.")}function Vd(e,t){sf.call(this),this.g=new gd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!pl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qd(this)}function jd(e){$f.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Bd(){Yf.call(this),this.status=1}function qd(e){this.g=e}(Wc=id.prototype).Ka=function(e){this.L=e},Wc.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wf.g(),this.C=this.u?Gf(this.u):Gf(Wf),this.g.onreadystatechange=al(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void sd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=nt(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Xc.FormData&&e instanceof Xc.FormData,!(0<=cl(ud,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=nt(n);try{for(c.s();!(s=c.n()).done;){var l=it(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hd(this),0<this.B&&((this.K=function(e){return _l&&Ol()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=al(this.qa,this)):this.A=Sf(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){sd(this,u)}},Wc.qa=function(){"undefined"!=typeof Yc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cf(this,"timeout"),this.abort(8))},Wc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,cf(this,"complete"),cf(this,"abort"),fd(this))},Wc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fd(this,!0)),id.X.M.call(this)},Wc.Ha=function(){this.s||(this.F||this.v||this.l?ld(this):this.fb())},Wc.fb=function(){ld(this)},Wc.aa=function(){try{return 2<dd(this)?this.g.status:-1}catch(Vh){return-1}},Wc.fa=function(){try{return this.g?this.g.responseText:""}catch(Vh){return""}},Wc.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),rd(t)}},Wc.Ea=function(){return this.m},Wc.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Wc=gd.prototype).ma=8,Wc.G=1,Wc.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Jf(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Gl(n=zl(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ed(this,t,r),wh(i=mh(this.F),"RID",e),wh(i,"CVER",22),this.D&&wh(i,"X-HTTP-Session-Id",this.D),Sd(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(vd(n)))+"&"+r:this.o&&yd(i,this.o,n)),Kh(this.h,t),this.Ya&&wh(i,"TYPE","init"),this.O?(wh(i,"$req",r),wh(i,"SID","null"),t.Z=!0,rh(t,i,null)):rh(t,i,r),this.G=2}}else 3==this.G&&(e?xd(this,e):0==this.i.length||Bh(this.h)||xd(this))},Wc.Ia=function(){if(this.u=null,Nd(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Bf(al(this.eb,this),e)}},Wc.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vf(10),bd(this),Nd(this))},Wc.cb=function(){null!=this.v&&(this.v=null,bd(this),Td(this),Vf(19))},Wc.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Vf(2)):(this.j.info("Failed to ping google.com"),Vf(1))},(Wc=Fd.prototype).xa=function(){},Wc.wa=function(){},Wc.va=function(){},Wc.ua=function(){},Wc.Ra=function(){},Ud.prototype.g=function(e,t){return new Vd(e,t)},ul(Vd,sf),Vd.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Vf(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Ld(e,null,e.V),_d(e)},Vd.prototype.close=function(){kd(this.g)},Vd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ff(e),e=n);t.i.push(new Fh(t.ab++,e)),3==t.G&&_d(t)},Vd.prototype.M=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,Vd.X.M.call(this)},ul(jd,$f),ul(Bd,Yf),ul(qd,Fd),qd.prototype.xa=function(){cf(this.g,"a")},qd.prototype.wa=function(e){cf(this.g,new jd(e))},qd.prototype.va=function(e){cf(this.g,new Bd)},qd.prototype.ua=function(){cf(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,Vd.prototype.send=Vd.prototype.u,Vd.prototype.open=Vd.prototype.m,Vd.prototype.close=Vd.prototype.close,qf.NO_ERROR=0,qf.TIMEOUT=8,qf.HTTP_ERROR=6,zf.COMPLETE="complete",Hf.EventType=Qf,Qf.OPEN="a",Qf.CLOSE="b",Qf.ERROR="c",Qf.MESSAGE="d",sf.prototype.listen=sf.prototype.N,id.prototype.listenOnce=id.prototype.O,id.prototype.getLastError=id.prototype.Oa,id.prototype.getLastErrorCode=id.prototype.Ea,id.prototype.getStatus=id.prototype.aa,id.prototype.getResponseJson=id.prototype.Sa,id.prototype.getResponseText=id.prototype.fa,id.prototype.send=id.prototype.da,id.prototype.setWithCredentials=id.prototype.Ka;var zd=$c.createWebChannelTransport=function(){return new Ud},Kd=$c.getStatEventTarget=function(){return Lf()},Gd=$c.ErrorCode=qf,Hd=$c.EventType=zf,Wd=$c.Event=Of,Qd=$c.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},$d=$c.FetchXmlHttpFactory=Xh,Yd=$c.WebChannel=Hf,Xd=$c.XhrIo=id,Jd="@firebase/firestore",Zd=function(){function e(t){ut(this,e),this.uid=t}return lt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Zd.UNAUTHENTICATED=new Zd(null),Zd.GOOGLE_CREDENTIALS=new Zd("google-credentials-uid"),Zd.FIRST_PARTY=new Zd("first-party-uid"),Zd.MOCK_USER=new Zd("mock-user");var ep="9.15.0",tp=new nn("@firebase/firestore");function np(){return tp.logLevel}function rp(e){if(tp.logLevel<=$t.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.debug.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(ft(i)))}}function ip(e){if(tp.logLevel<=$t.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.error.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(ft(i)))}}function ap(e){if(tp.logLevel<=$t.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(op);tp.warn.apply(tp,["Firestore (".concat(ep,"): ").concat(e)].concat(ft(i)))}}function op(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ep,") INTERNAL ASSERTION FAILED: ")+e;throw ip(t),new Error(t)}function sp(e,t){e||up()}function cp(e,t){return e}var lp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fp=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return lt(n)}(Rt),hp=lt((function e(){var t=this;ut(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),dp=lt((function e(t,n){ut(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),pp=function(){function e(){ut(this,e)}return lt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vp=function(){function e(t){ut(this,e),this.token=t,this.changeListener=null}return lt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yp=function(){function e(t){ut(this,e),this.t=t,this.currentUser=Zd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return lt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){rp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(rp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sp("string"==typeof n.accessToken),new dp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sp(null===e||"string"==typeof e),new Zd(e)}}]),e}(),mp=function(){function e(t,n,r,i){ut(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Zd.FIRST_PARTY,this.p=new Map}return lt(e,[{key:"I",value:function(){return this.g?this.g():(sp(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),gp=function(){function e(t,n,r,i){ut(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return lt(e,[{key:"getToken",value:function(){return Promise.resolve(new mp(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kp=lt((function e(t){ut(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),bp=function(){function e(t){ut(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return lt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&rp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,rp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){rp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):rp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sp("string"==typeof t.token),e.A=t.token,new kp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function wp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _p=function(){function e(){ut(this,e)}return lt(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=wp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function xp(e,t){return e<t?-1:e>t?1:0}function Sp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ep(e){return e+"\0"}var Ip=function(){function e(t,n){if(ut(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fp(lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fp(lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fp(lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fp(lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return lt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xp(this.nanoseconds,e.nanoseconds):xp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Tp=function(){function e(t){ut(this,e),this.timestamp=t}return lt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ip(0,0))}},{key:"max",value:function(){return new e(new Ip(253402300799,999999999))}}]),e}(),Cp=function(){function e(t,n,r){ut(this,e),void 0===n?n=0:n>t.length&&up(),void 0===r?r=t.length-n:r>t.length-n&&up(),this.segments=t,this.offset=n,this.len=r}return lt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Np=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new fp(lp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ft(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cp),Ap=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rp=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ap.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fp(lp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new fp(lp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new fp(lp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new fp(lp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cp),Dp=function(){function e(t){ut(this,e),this.path=t}return lt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Np.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Np.fromString(t))}},{key:"fromName",value:function(t){return new e(Np.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Np.emptyPath())}},{key:"comparator",value:function(e,t){return Np.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Np(t.slice()))}}]),e}(),Op=lt((function e(t,n,r,i){ut(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pp(e){return e.fields.find((function(e){return 2===e.kind}))}function Lp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Op.UNKNOWN_ID=-1;var Mp=lt((function e(t,n){ut(this,e),this.fieldPath=t,this.kind=n}));var Fp=function(){function e(t,n){ut(this,e),this.sequenceNumber=t,this.offset=n}return lt(e,null,[{key:"empty",value:function(){return new e(0,jp.min())}}]),e}();function Up(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tp.fromTimestamp(1e9===r?new Ip(n+1,0):new Ip(n,r));return new jp(i,Dp.empty(),t)}function Vp(e){return new jp(e.readTime,e.key,-1)}var jp=function(){function e(t,n,r){ut(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return lt(e,null,[{key:"min",value:function(){return new e(Tp.min(),Dp.empty(),-1)}},{key:"max",value:function(){return new e(Tp.max(),Dp.empty(),-1)}}]),e}();function Bp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Dp.comparator(e.documentKey,t.documentKey))?n:xp(e.largestBatchId,t.largestBatchId)}var qp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zp=function(){function e(){ut(this,e),this.onCommittedListeners=[]}return lt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Kp(e){return Gp.apply(this,arguments)}function Gp(){return Gp=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===lp.FAILED_PRECONDITION&&t.message===qp){e.next=2;break}throw t;case 2:rp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}var Hp=function(){function e(t){var n=this;ut(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return lt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&up(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=nt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Wp=function(){function e(t,n){var r=this;ut(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new hp,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Yp(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=tv(e.target.error);r.P.reject(new Yp(t,n))}}return lt(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(rp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Jp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Yp(n,t)}}}]),e}(),Qp=function(){function e(t,n,r){ut(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(wt())&&ip("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return lt(e,[{key:"F",value:function(){var e=ot(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return rp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Yp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fp(lp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fp(lp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Yp(t,n))},i.onupgradeneeded=function(e){rp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){rp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ot(rt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(rt().mark((function e(){var n,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Wp.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Hp.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,rp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return rp("SimpleDb","Removing database:",e),Zp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!xt())return!1;if(e.N())return!0;var t=wt(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$p=function(){function e(t){ut(this,e),this.q=t,this.U=!1,this.K=null}return lt(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Zp(this.q.delete())}}]),e}(),Yp=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,lp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return lt(n)}(fp);function Xp(e){return"IndexedDbTransactionError"===e.name}var Jp=function(){function e(t){ut(this,e),this.store=t}return lt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(rp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zp(n)}},{key:"add",value:function(e){return rp("SimpleDb","ADD",this.store.name,e,e),Zp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Zp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),rp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return rp("SimpleDb","DELETE",this.store.name,e),Zp(this.store.delete(e))}},{key:"count",value:function(){return rp("SimpleDb","COUNT",this.store.name),Zp(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Hp((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Hp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){rp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Hp((function(n,r){t.onerror=function(e){var t=tv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Hp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $p(i),o=t(i.primaryKey,i.value,a);if(o instanceof Hp){var u=o.catch((function(e){return a.done(),Hp.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Hp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Zp(e){return new Hp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tv(e.target.error);n(t)}}))}var ev=!1;function tv(e){var t=Qp.D(wt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ev||(ev=!0,setTimeout((function(){throw r}),0)),r}}return e}var nv=function(){function e(t,n){ut(this,e),this.asyncQueue=t,this.et=n,this.task=null}return lt(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;rp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=rp,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Xp(e.t4)){e.next=17;break}rp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Kp(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),rv=function(){function e(t,n){ut(this,e),this.localStore=t,this.persistence=n}return lt(e,[{key:"st",value:function(){var e=ot(rt().mark((function e(){var t,n=this,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Hp.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return rp("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return rp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Vp(t);Bp(r,n)>0&&(n=r)})),new jp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),iv=function(){function e(t,n){var r=this;ut(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return lt(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();iv.at=-1;var av=lt((function e(t,n,r,i,a,o,u,s){ut(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ov=function(){function e(t,n){ut(this,e),this.projectId=t,this.database=n||"(default)"}return lt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function uv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function lv(e){return null==e}function fv(e){return 0===e&&1/e==-1/0}function hv(e){return"number"==typeof e&&Number.isInteger(e)&&!fv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var dv=function(e){function t(e){ut(this,t),this.binaryString=e}return lt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();dv.EMPTY_BYTE_STRING=new dv("");var pv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vv(e){if(sp(!!e),"string"==typeof e){var t=0,n=pv.exec(e);if(sp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:yv(e.seconds),nanos:yv(e.nanos)}}function yv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mv(e){return"string"==typeof e?dv.fromBase64String(e):dv.fromUint8Array(e)}function gv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kv(e){var t=e.mapValue.fields.__previous_value__;return gv(t)?kv(t):t}function bv(e){var t=vv(e.mapValue.fields.__local_write_time__.timestampValue);return new Ip(t.seconds,t.nanos)}var wv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_v={nullValue:"NULL_VALUE"};function xv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gv(e)?4:Fv(e)?9007199254740991:10:up()}function Sv(e,t){if(e===t)return!0;var n=xv(e);if(n!==xv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bv(e).isEqual(bv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=vv(e.timestampValue),r=vv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mv(e.bytesValue).isEqual(mv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yv(e.geoPointValue.latitude)===yv(t.geoPointValue.latitude)&&yv(e.geoPointValue.longitude)===yv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yv(e.integerValue)===yv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=yv(e.doubleValue),r=yv(t.doubleValue);return n===r?fv(n)===fv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sp(e.arrayValue.values||[],t.arrayValue.values||[],Sv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uv(n)!==uv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sv(n[i],r[i])))return!1;return!0}(e,t);default:return up()}}function Ev(e,t){return void 0!==(e.values||[]).find((function(e){return Sv(e,t)}))}function Iv(e,t){if(e===t)return 0;var n=xv(e),r=xv(t);if(n!==r)return xp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=yv(e.integerValue||e.doubleValue),r=yv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Tv(e.timestampValue,t.timestampValue);case 4:return Tv(bv(e),bv(t));case 5:return xp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=mv(e),r=mv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xp(n[i],r[i]);if(0!==a)return a}return xp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xp(yv(e.latitude),yv(t.latitude));return 0!==n?n:xp(yv(e.longitude),yv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Iv(n[i],r[i]);if(a)return a}return xp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===wv.mapValue&&t===wv.mapValue)return 0;if(e===wv.mapValue)return 1;if(t===wv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=xp(r[o],a[o]);if(0!==u)return u;var s=Iv(n[r[o]],i[a[o]]);if(0!==s)return s}return xp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw up()}}function Tv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xp(e,t);var n=vv(e),r=vv(t),i=xp(n.seconds,r.seconds);return 0!==i?i:xp(n.nanos,r.nanos)}function Cv(e){return Nv(e)}function Nv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=vv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?mv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Dp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=nt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Nv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=nt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Nv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):up();var t,n}function Av(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Rv(e){return!!e&&"integerValue"in e}function Dv(e){return!!e&&"arrayValue"in e}function Ov(e){return!!e&&"nullValue"in e}function Pv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Lv(e){return!!e&&"mapValue"in e}function Mv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return sv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Mv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Mv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Fv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uv(e){return"nullValue"in e?_v:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Av(ov.empty(),Dp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:up()}function Vv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Av(ov.empty(),Dp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?wv:up()}function jv(e,t){var n=Iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Bv(e,t){var n=Iv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var qv=lt((function e(t,n){ut(this,e),this.position=t,this.inclusive=n}));function zv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Dp.comparator(Dp.fromName(o.referenceValue),n.key):Iv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Kv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Sv(e.position[n],t.position[n]))return!1;return!0}var Gv=lt((function e(){ut(this,e)})),Hv=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Iv(t,this.value)):null!==t&&xv(this.value)===xv(t)&&this.matchesComparison(Iv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return up()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ny(e,t,r):"array-contains"===t?new oy(e,r):"in"===t?new uy(e,r):"not-in"===t?new sy(e,r):"array-contains-any"===t?new cy(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ry(e,n):new iy(e,n)}}]),n}(Gv),Wv=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return lt(n,[{key:"matches",value:function(e){return Qv(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=nt(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Gv);function Qv(e){return"and"===e.op}function $v(e){return"or"===e.op}function Yv(e){return Xv(e)&&Qv(e)}function Xv(e){var t,n=nt(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wv)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Jv(e){if(e instanceof Hv)return e.field.canonicalString()+e.op.toString()+Cv(e.value);var t=e.filters.map((function(e){return Jv(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Zv(e,t){return e instanceof Hv?function(e,t){return t instanceof Hv&&e.op===t.op&&e.field.isEqual(t.field)&&Sv(e.value,t.value)}(e,t):e instanceof Wv?function(e,t){return t instanceof Wv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Zv(n,t.filters[r])}),!0)}(e,t):void up()}function ey(e,t){var n=e.filters.concat(t);return Wv.create(n,e.op)}function ty(e){return e instanceof Hv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Cv(e.value))}(e):e instanceof Wv?function(e){return e.op.toString()+" {"+e.getFilters().map(ty).join(" ,")+"}"}(e):"Filter"}var ny=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this,e,r,i)).key=Dp.fromName(i.referenceValue),a}return lt(n,[{key:"matches",value:function(e){var t=Dp.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Hv),ry=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,"in",r)).keys=ay("in",r),i}return lt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hv),iy=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,"not-in",r)).keys=ay("not-in",r),i}return lt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hv);function ay(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Dp.fromName(e.referenceValue)}))}var oy=function(e){$e(n,e);var t=Ze(n);function n(e,r){return ut(this,n),t.call(this,e,"array-contains",r)}return lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Dv(t)&&Ev(t.arrayValue,this.value)}}]),n}(Hv),uy=function(e){$e(n,e);var t=Ze(n);function n(e,r){return ut(this,n),t.call(this,e,"in",r)}return lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ev(this.value.arrayValue,t)}}]),n}(Hv),sy=function(e){$e(n,e);var t=Ze(n);function n(e,r){return ut(this,n),t.call(this,e,"not-in",r)}return lt(n,[{key:"matches",value:function(e){if(Ev(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ev(this.value.arrayValue,t)}}]),n}(Hv),cy=function(e){$e(n,e);var t=Ze(n);function n(e,r){return ut(this,n),t.call(this,e,"array-contains-any",r)}return lt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Dv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ev(t.value.arrayValue,e)}))}}]),n}(Hv),ly=lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ut(this,e),this.field=t,this.dir=n}));function fy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var hy=function(){function e(t,n){ut(this,e),this.comparator=t,this.root=n||py.EMPTY}return lt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,py.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,py.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new dy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new dy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new dy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new dy(this.root,e,this.comparator,!0)}}]),e}(),dy=function(){function e(t,n,r,i){ut(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return lt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),py=function(){function e(t,n,r,i,a){ut(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return lt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw up();if(this.right.isRed())throw up();var e=this.left.check();if(e!==this.right.check())throw up();return e+(this.isRed()?0:1)}}]),e}();py.EMPTY=null,py.RED=!0,py.BLACK=!1,py.EMPTY=new(function(){function e(){ut(this,e),this.size=0}return lt(e,[{key:"key",get:function(){throw up()}},{key:"value",get:function(){throw up()}},{key:"color",get:function(){throw up()}},{key:"left",get:function(){throw up()}},{key:"right",get:function(){throw up()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new py(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var vy=function(){function e(t){ut(this,e),this.comparator=t,this.data=new hy(this.comparator)}return lt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new yy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new yy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),yy=function(){function e(t){ut(this,e),this.iter=t}return lt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function my(e){return e.hasNext()?e.getNext():void 0}var gy=function(){function e(t){ut(this,e),this.fields=t,t.sort(Rp.comparator)}return lt(e,[{key:"unionWith",value:function(t){var n,r=new vy(Rp.comparator),i=nt(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=nt(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=nt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Sp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),ky=function(){function e(t){ut(this,e),this.value=t}return lt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Lv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mv(t)}},{key:"setAll",value:function(e){var t=this,n=Rp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Mv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Lv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Sv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Lv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){sv(t,(function(t,n){return e[t]=n}));var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Mv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function by(e){var t=[];return sv(e.fields,(function(e,n){var r=new Rp([e]);if(Lv(n)){var i=by(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=nt(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new gy(t)}var wy=function(){function e(t,n,r,i,a,o,u){ut(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return lt(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Tp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ky.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ky.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Tp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Tp.min(),Tp.min(),Tp.min(),ky.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Tp.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Tp.min(),Tp.min(),ky.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Tp.min(),Tp.min(),ky.empty(),2)}}]),e}(),_y=lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ut(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function xy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _y(e,t,n,r,i,a,o)}function Sy(e){var t=cp(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Jv(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),lv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Cv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Cv(e)})).join(",")),t.ft=n}return t.ft}function Ey(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!fy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Zv(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kv(e.startAt,t.startAt)&&Kv(e.endAt,t.endAt)}function Iy(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ty(e,t){return e.filters.filter((function(e){return e instanceof Hv&&e.field.isEqual(t)}))}function Cy(e,t,n){var r,i=_v,a=!0,o=nt(Ty(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=_v,c=!0;switch(u.op){case"<":case"<=":s=Uv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=_v}jv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];jv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ny(e,t,n){var r,i=wv,a=!0,o=nt(Ty(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=wv,c=!0;switch(u.op){case">=":case">":s=Vv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=wv}Bv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Bv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Ay=lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ut(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function Ry(e,t,n,r,i,a,o,u){return new Ay(e,t,n,r,i,a,o,u)}function Dy(e){return new Ay(e)}function Oy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Py(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ly(e){var t,n=nt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function My(e){return null!==e.collectionGroup}function Fy(e){var t=cp(e);if(null===t.dt){t.dt=[];var n=Ly(t),r=Py(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new ly(n)),t.dt.push(new ly(Rp.keyField(),"asc"));else{var i,a=!1,o=nt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new ly(Rp.keyField(),s))}}}return t.dt}function Uy(e){var t=cp(e);if(!t._t)if("F"===t.limitType)t._t=xy(t.path,t.collectionGroup,Fy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=nt(Fy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ly(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new qv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new qv(t.startAt.position,t.startAt.inclusive):null;t._t=xy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Vy(e,t){t.getFirstInequalityField(),Ly(e);var n=e.filters.concat([t]);return new Ay(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jy(e,t,n){return new Ay(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function By(e,t){return Ey(Uy(e),Uy(t))&&e.limitType===t.limitType}function qy(e){return"".concat(Sy(Uy(e)),"|lt:").concat(e.limitType)}function zy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ty(e)})).join(", "),"]")),lv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Cv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Cv(e)})).join(",")),"Target(".concat(t,")")}(Uy(e)),"; limitType=").concat(e.limitType,")")}function Ky(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Dp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=nt(Fy(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=nt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fy(e),t))&&!(e.endAt&&!function(e,t,n){var r=zv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fy(e),t))}(e,t)}function Gy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hy(e){return function(t,n){var r,i=!1,a=nt(Fy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Wy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Wy(e,t,n){var r=e.field.isKeyField()?Dp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Iv(r,i):up()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return up()}}function Qy(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fv(t)?"-0":t}}function $y(e){return{integerValue:""+e}}function Yy(e,t){return hv(t)?$y(t):Qy(e,t)}var Xy=lt((function e(){ut(this,e),this._=void 0}));function Jy(e,t,n){return e instanceof tm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nm?rm(e,t):e instanceof im?am(e,t):function(e,t){var n=em(e,t),r=um(n)+um(e.gt);return Rv(n)&&Rv(e.gt)?$y(r):Qy(e.yt,r)}(e,t)}function Zy(e,t,n){return e instanceof nm?rm(e,t):e instanceof im?am(e,t):n}function em(e,t){return e instanceof om?Rv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var tm=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n)}(Xy),nm=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).elements=e,r}return lt(n)}(Xy);function rm(e,t){var n,r=sm(t),i=nt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Sv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var im=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).elements=e,r}return lt(n)}(Xy);function am(e,t){var n,r=sm(t),i=nt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Sv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var om=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return lt(n)}(Xy);function um(e){return yv(e.integerValue||e.doubleValue)}function sm(e){return Dv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var cm=lt((function e(t,n){ut(this,e),this.field=t,this.transform=n}));var lm=lt((function e(t,n){ut(this,e),this.version=t,this.transformResults=n})),fm=function(){function e(t,n){ut(this,e),this.updateTime=t,this.exists=n}return lt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function hm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var dm=lt((function e(){ut(this,e)}));function pm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Im(e.key,fm.none()):new km(e.key,e.data,fm.none());var n,r=e.data,i=ky.empty(),a=new vy(Rp.comparator),o=nt(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new bm(e.key,i,new gy(a.toArray()),fm.none())}function vm(e,t,n){e instanceof km?function(e,t,n){var r=e.value.clone(),i=_m(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bm?function(e,t,n){if(hm(e.precondition,t)){var r=_m(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(wm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ym(e,t,n,r){return e instanceof km?function(e,t,n,r){if(!hm(e.precondition,t))return n;var i=e.value.clone(),a=xm(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bm?function(e,t,n,r){if(!hm(e.precondition,t))return n;var i=xm(e.fieldTransforms,r,t),a=t.data;return a.setAll(wm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return hm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mm(e,t){var n,r=null,i=nt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=em(a.transform,o||null);null!=u&&(null===r&&(r=ky.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function gm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nm&&t instanceof nm||e instanceof im&&t instanceof im?Sp(e.elements,t.elements,Sv):e instanceof om&&t instanceof om?Sv(e.gt,t.gt):e instanceof tm&&t instanceof tm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var km=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ut(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dm),bm=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ut(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return lt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(dm);function wm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function _m(e,t,n){var r=new Map;sp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Zy(o,u,n[i]))}return r}function xm(e,t,n){var r,i=new Map,a=nt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Jy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sm,Em,Im=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dm),Tm=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(dm),Cm=lt((function e(t){ut(this,e),this.count=t}));function Nm(e){switch(e){default:return up();case lp.CANCELLED:case lp.UNKNOWN:case lp.DEADLINE_EXCEEDED:case lp.RESOURCE_EXHAUSTED:case lp.INTERNAL:case lp.UNAVAILABLE:case lp.UNAUTHENTICATED:return!1;case lp.INVALID_ARGUMENT:case lp.NOT_FOUND:case lp.ALREADY_EXISTS:case lp.PERMISSION_DENIED:case lp.FAILED_PRECONDITION:case lp.ABORTED:case lp.OUT_OF_RANGE:case lp.UNIMPLEMENTED:case lp.DATA_LOSS:return!0}}function Am(e){if(void 0===e)return ip("GRPC error has no .code"),lp.UNKNOWN;switch(e){case Sm.OK:return lp.OK;case Sm.CANCELLED:return lp.CANCELLED;case Sm.UNKNOWN:return lp.UNKNOWN;case Sm.DEADLINE_EXCEEDED:return lp.DEADLINE_EXCEEDED;case Sm.RESOURCE_EXHAUSTED:return lp.RESOURCE_EXHAUSTED;case Sm.INTERNAL:return lp.INTERNAL;case Sm.UNAVAILABLE:return lp.UNAVAILABLE;case Sm.UNAUTHENTICATED:return lp.UNAUTHENTICATED;case Sm.INVALID_ARGUMENT:return lp.INVALID_ARGUMENT;case Sm.NOT_FOUND:return lp.NOT_FOUND;case Sm.ALREADY_EXISTS:return lp.ALREADY_EXISTS;case Sm.PERMISSION_DENIED:return lp.PERMISSION_DENIED;case Sm.FAILED_PRECONDITION:return lp.FAILED_PRECONDITION;case Sm.ABORTED:return lp.ABORTED;case Sm.OUT_OF_RANGE:return lp.OUT_OF_RANGE;case Sm.UNIMPLEMENTED:return lp.UNIMPLEMENTED;case Sm.DATA_LOSS:return lp.DATA_LOSS;default:return up()}}(Em=Sm||(Sm={}))[Em.OK=0]="OK",Em[Em.CANCELLED=1]="CANCELLED",Em[Em.UNKNOWN=2]="UNKNOWN",Em[Em.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Em[Em.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Em[Em.NOT_FOUND=5]="NOT_FOUND",Em[Em.ALREADY_EXISTS=6]="ALREADY_EXISTS",Em[Em.PERMISSION_DENIED=7]="PERMISSION_DENIED",Em[Em.UNAUTHENTICATED=16]="UNAUTHENTICATED",Em[Em.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Em[Em.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Em[Em.ABORTED=10]="ABORTED",Em[Em.OUT_OF_RANGE=11]="OUT_OF_RANGE",Em[Em.UNIMPLEMENTED=12]="UNIMPLEMENTED",Em[Em.INTERNAL=13]="INTERNAL",Em[Em.UNAVAILABLE=14]="UNAVAILABLE",Em[Em.DATA_LOSS=15]="DATA_LOSS";var Rm=function(){function e(t,n){ut(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return lt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=it(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){sv(this.inner,(function(t,n){var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=it(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return cv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Dm=new hy(Dp.comparator);function Om(){return Dm}var Pm=new hy(Dp.comparator);function Lm(){for(var e=Pm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Mm(e){var t=Pm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Fm(){return Vm()}function Um(){return Vm()}function Vm(){return new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var jm=new hy(Dp.comparator),Bm=new vy(Dp.comparator);function qm(){for(var e=Bm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var zm=new vy(xp);function Km(){return zm}var Gm=function(){function e(t,n,r,i,a){ut(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return lt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Hm.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Tp.min(),i,Km(),Om(),qm())}}]),e}(),Hm=function(){function e(t,n,r,i,a){ut(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return lt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,qm(),qm(),qm())}}]),e}(),Wm=lt((function e(t,n,r,i){ut(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),Qm=lt((function e(t,n){ut(this,e),this.targetId=t,this.Et=n})),$m=lt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ut(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ym=function(){function e(){ut(this,e),this.At=0,this.Rt=Zm(),this.bt=dv.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return lt(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=qm(),t=qm(),n=qm();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:up()}})),new Hm(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Zm()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),Xm=function(){function e(t){ut(this,e),this.$t=t,this.Bt=new Map,this.Lt=Om(),this.qt=Jm(),this.Ut=new vy(xp)}return lt(e,[{key:"Kt",value:function(e){var t,n=nt(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=nt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:up()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Iy(i))if(0===n){var a=new Dp(i.path);this.Qt(t,a,wy.newNoDocument(a,Tp.min()))}else sp(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Iy(a.target)){var o=new Dp(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,wy.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=qm();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Gm(e,n,this.Ut,this.Lt,r);return this.Lt=Om(),this.qt=Jm(),this.Ut=new vy(xp),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new Ym,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new vy(xp),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||rp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Ym),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Jm(){return new hy(Dp.comparator)}function Zm(){return new hy(Dp.comparator)}var eg={asc:"ASCENDING",desc:"DESCENDING"},tg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ng={and:"AND",or:"OR"},rg=lt((function e(t,n){ut(this,e),this.databaseId=t,this.wt=n}));function ig(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ag(e,t){return e.wt?t.toBase64():t.toUint8Array()}function og(e,t){return ig(e,t.toTimestamp())}function ug(e){return sp(!!e),Tp.fromTimestamp(function(e){var t=vv(e);return new Ip(t.seconds,t.nanos)}(e))}function sg(e,t){return function(e){return new Np(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cg(e){var t=Np.fromString(e);return sp(Dg(t)),t}function lg(e,t){return sg(e.databaseId,t.path)}function fg(e,t){var n=cg(t);if(n.get(1)!==e.databaseId.projectId)throw new fp(lp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fp(lp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Dp(vg(n))}function hg(e,t){return sg(e.databaseId,t)}function dg(e){var t=cg(e);return 4===t.length?Np.emptyPath():vg(t)}function pg(e){return new Np(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vg(e){return sp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yg(e,t,n){return{name:lg(e,t),fields:n.value.mapValue.fields}}function mg(e,t,n){var r=fg(e,t.name),i=ug(t.updateTime),a=t.createTime?ug(t.createTime):Tp.min(),o=new ky({mapValue:{fields:t.fields}}),u=wy.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function gg(e,t){return"found"in t?function(e,t){sp(!!t.found),t.found.name,t.found.updateTime;var n=fg(e,t.found.name),r=ug(t.found.updateTime),i=t.found.createTime?ug(t.found.createTime):Tp.min(),a=new ky({mapValue:{fields:t.found.fields}});return wy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){sp(!!t.missing),sp(!!t.readTime);var n=fg(e,t.missing),r=ug(t.readTime);return wy.newNoDocument(n,r)}(e,t):up()}function kg(e,t){var n;if(t instanceof km)n={update:yg(e,t.key,t.value)};else if(t instanceof Im)n={delete:lg(e,t.key)};else if(t instanceof bm)n={update:yg(e,t.key,t.data),updateMask:Rg(t.fieldMask)};else{if(!(t instanceof Tm))return up();n={verify:lg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof tm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof im)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof om)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw up()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:og(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:up()}(e,t.precondition)),n}function bg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?fm.updateTime(ug(e.updateTime)):void 0!==e.exists?fm.exists(e.exists):fm.none()}(t.currentDocument):fm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sp("REQUEST_TIME"===t.setToServerValue),n=new tm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new nm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new im(i)}else"increment"in t?n=new om(e,t.increment):up();var a=Rp.fromServerFormat(t.fieldPath);return new cm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=fg(e,t.update.name),a=new ky({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new gy(t.map((function(e){return Rp.fromServerFormat(e)})))}(t.updateMask);return new bm(i,a,o,n,r)}return new km(i,a,n,r)}if(t.delete){var u=fg(e,t.delete);return new Im(u,n)}if(t.verify){var s=fg(e,t.verify);return new Tm(s,n)}return up()}function wg(e,t){return{documents:[hg(e,t.path)]}}function _g(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Ag(Wv.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Cg(e.field),direction:Eg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||lv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xg(e){var t=dg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Sg(e);return t instanceof Wv&&Yv(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ly(Ng(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return lv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new qv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new qv(n,t)}(n.endAt)),Ry(t,i,u,o,s,"F",c,l)}function Sg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ng(e.unaryFilter.field);return Hv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ng(e.unaryFilter.field);return Hv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ng(e.unaryFilter.field);return Hv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ng(e.unaryFilter.field);return Hv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return up()}}(e):void 0!==e.fieldFilter?function(e){return Hv.create(Ng(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return up()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wv.create(e.compositeFilter.filters.map((function(e){return Sg(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return up()}}(e.compositeFilter.op))}(e):up()}function Eg(e){return eg[e]}function Ig(e){return tg[e]}function Tg(e){return ng[e]}function Cg(e){return{fieldPath:e.canonicalString()}}function Ng(e){return Rp.fromServerFormat(e.fieldPath)}function Ag(e){return e instanceof Hv?function(e){if("=="===e.op){if(Pv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NAN"}};if(Ov(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NOT_NAN"}};if(Ov(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cg(e.field),op:Ig(e.op),value:e.value}}}(e):e instanceof Wv?function(e){var t=e.getFilters().map((function(e){return Ag(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Tg(e.op),filters:t}}}(e):up()}function Rg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Og(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Lg(t)),t=Pg(e.get(n),t);return Lg(t)}function Pg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Lg(e){return e+"\x01\x01"}function Mg(e){var t=e.length;if(sp(t>=2),2===t)return sp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Np.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&up(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:up()}a=o+2}return new Np(r)}var Fg=["userId","batchId"];function Ug(e,t){return[e,Og(t)]}function Vg(e,t,n){return[e,Og(t),n]}var jg={},Bg=["prefixPath","collectionGroup","readTime","documentId"],qg=["prefixPath","collectionGroup","documentId"],zg=["collectionGroup","readTime","prefixPath","documentId"],Kg=["canonicalId","targetId"],Gg=["targetId","path"],Hg=["path","targetId"],Wg=["collectionId","parent"],Qg=["indexId","uid"],$g=["uid","sequenceNumber"],Yg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xg=["indexId","uid","orderedDocumentKey"],Jg=["userId","collectionPath","documentId"],Zg=["userId","collectionPath","largestBatchId"],ek=["userId","collectionGroup","largestBatchId"],tk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),nk=[].concat(ft(tk),["documentOverlays"]),rk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ik=rk,ak=[].concat(ik,["indexConfiguration","indexState","indexEntries"]),ok=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return lt(n)}(zp);function uk(e,t){var n=cp(e);return Qp.M(n.se,t)}var sk=function(){function e(t,n,r,i){ut(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return lt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&vm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=nt(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ym(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=nt(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ym(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Um();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=pm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Tp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Sp(this.mutations,e.mutations,(function(e,t){return gm(e,t)}))&&Sp(this.baseMutations,e.baseMutations,(function(e,t){return gm(e,t)}))}}]),e}(),ck=function(){function e(t,n,r,i){ut(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return lt(e,null,[{key:"from",value:function(t,n,r){sp(t.mutations.length===r.length);for(var i=jm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),lk=function(){function e(t,n){ut(this,e),this.largestBatchId=t,this.mutation=n}return lt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),fk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dv.EMPTY_BYTE_STRING;ut(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return lt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),hk=lt((function e(t){ut(this,e),this.ie=t}));function dk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ig(e,t.version.toTimestamp()),createTime:ig(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vk(t.version)};else{if(!t.isUnknownDocument())return up();r.unknownDocument={path:n.path.toArray(),version:vk(t.version)}}return r}function pk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function yk(e){var t=new Ip(e.seconds,e.nanoseconds);return Tp.fromTimestamp(t)}function mk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return bg(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return bg(e.ie,t)})),u=Ip.fromMillis(t.localWriteTimeMs);return new sk(t.batchId,u,n,o)}function gk(e){var t,n,r=yk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?yk(e.lastLimboFreeSnapshotVersion):Tp.min();return void 0!==e.query.documents?(sp(1===(n=e.query).documents.length),t=Uy(Dy(dg(n.documents[0])))):t=function(e){return Uy(xg(e))}(e.query),new fk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,dv.fromBase64String(e.resumeToken))}function kk(e,t){var n,r=vk(t.snapshotVersion),i=vk(t.lastLimboFreeSnapshotVersion);n=Iy(t.target)?wg(e.ie,t.target):_g(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function bk(e){var t=xg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jy(t,t.limit,"L"):t}function wk(e,t){return new lk(t.largestBatchId,bg(e.ie,t.overlayMutation))}function _k(e,t){var n=t.path.lastSegment();return[e,Og(t.path.popLast()),n]}function xk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:vk(r.readTime),documentKey:Og(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sk=function(){function e(){ut(this,e)}return lt(e,[{key:"getBundleMetadata",value:function(e,t){return Ek(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:yk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ek(e).put({bundleId:(n=t).id,createTime:vk(ug(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ik(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:bk(t.bundledQuery),readTime:yk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ik(e).put(function(e){return{name:e.name,readTime:vk(ug(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ek(e){return uk(e,"bundles")}function Ik(e){return uk(e,"namedQueries")}var Tk=function(){function e(t,n){ut(this,e),this.yt=t,this.userId=n}return lt(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ck(e).get(_k(this.userId,t)).next((function(e){return e?wk(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Fm();return Hp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new lk(t,a);i.push(r.oe(e,o))})),Hp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Og(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ck(e).Y("collectionPathOverlayIndex",i))})),Hp.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Fm(),a=Og(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ck(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=nt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=wk(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Fm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ck(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=wk(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return Ck(e).put(function(e,t,n){var r=it(_k(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:kg(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ck(e){return uk(e,"documentOverlays")}var Nk=function(){function e(){ut(this,e)}return lt(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(yv(e.integerValue));else if("doubleValue"in e){var n=yv(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),fv(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(mv(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?Fv(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):up()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),Dp.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function Ak(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Rk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ak(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Nk.Ie=new Nk;var Dk=function(){function e(){ut(this,e),this.buffer=new Uint8Array(1024),this.position=0}return lt(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=nt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=nt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=Rk(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=Rk(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ok=function(){function e(t){ut(this,e),this.$e=t}return lt(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),Pk=function(){function e(t){ut(this,e),this.$e=t}return lt(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),Lk=function(){function e(){ut(this,e),this.$e=new Dk,this.Be=new Ok(this.$e),this.Le=new Pk(this.$e)}return lt(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),Mk=function(){function e(t,n,r,i){ut(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return lt(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Fk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Uk(e.arrayValue,t.arrayValue))?n:0!==(n=Uk(e.directionalValue,t.directionalValue))?n:Dp.comparator(e.documentKey,t.documentKey)}function Uk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Vk=function(){function e(t){ut(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=nt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return lt(e,[{key:"je",value:function(e){sp(e.collectionGroup===this.collectionId);var t=Pp(e);if(void 0!==t&&!this.We(t))return!1;for(var n=Lp(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=nt(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function jk(e){var t,n;if(sp(e instanceof Hv||e instanceof Wv),e instanceof Hv){if(e instanceof uy){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Hv.create(e.field,"==",t)})))||[];return Wv.create(r,"or")}return e}var i=e.filters.map((function(e){return jk(e)}));return Wv.create(i,e.op)}function Bk(e){if(0===e.getFilters().length)return[];var t=Gk(jk(e));return sp(Kk(t)),qk(t)||zk(t)?[t]:t.getFilters()}function qk(e){return e instanceof Hv}function zk(e){return e instanceof Wv&&Yv(e)}function Kk(e){return qk(e)||zk(e)||function(e){if(e instanceof Wv&&$v(e)){var t,n=nt(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!qk(r)&&!zk(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Gk(e){if(sp(e instanceof Hv||e instanceof Wv),e instanceof Hv)return e;if(1===e.filters.length)return Gk(e.filters[0]);var t=e.filters.map((function(e){return Gk(e)})),n=Wv.create(t,e.op);return Kk(n=Qk(n))?n:(sp(n instanceof Wv),sp(Qv(n)),sp(n.filters.length>1),n.filters.reduce((function(e,t){return Hk(e,t)})))}function Hk(e,t){var n;return sp(e instanceof Hv||e instanceof Wv),sp(t instanceof Hv||t instanceof Wv),n=e instanceof Hv?t instanceof Hv?function(e,t){return Wv.create([e,t],"and")}(e,t):Wk(e,t):t instanceof Hv?Wk(t,e):function(e,t){if(sp(e.filters.length>0&&t.filters.length>0),Qv(e)&&Qv(t))return ey(e,t.getFilters());var n=$v(e)?e:t,r=$v(e)?t:e,i=n.filters.map((function(e){return Hk(e,r)}));return Wv.create(i,"or")}(e,t),Qk(n)}function Wk(e,t){if(Qv(t))return ey(t,e.getFilters());var n=t.filters.map((function(t){return Hk(e,t)}));return Wv.create(n,"or")}function Qk(e){if(sp(e instanceof Hv||e instanceof Wv),e instanceof Hv)return e;var t=e.getFilters();if(1===t.length)return Qk(t[0]);if(Xv(e))return e;var n=t.map((function(e){return Qk(e)})),r=[];return n.forEach((function(t){t instanceof Hv?r.push(t):t instanceof Wv&&(t.op===e.op?r.push.apply(r,ft(t.filters)):r.push(t))})),1===r.length?r[0]:Wv.create(r,e.op)}var $k=function(){function e(){ut(this,e),this.Je=new Yk}return lt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),Hp.resolve()}},{key:"getCollectionParents",value:function(e,t){return Hp.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Hp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Hp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Hp.resolve(null)}},{key:"getIndexType",value:function(e,t){return Hp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Hp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Hp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Hp.resolve(jp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Hp.resolve(jp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Hp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Hp.resolve()}}]),e}(),Yk=function(){function e(){ut(this,e),this.index={}}return lt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new vy(Np.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new vy(Np.comparator)).toArray()}}]),e}(),Xk=new Uint8Array(0),Jk=function(){function e(t,n){ut(this,e),this.user=t,this.databaseId=n,this.Ye=new Yk,this.Xe=new Rm((function(e){return Sy(e)}),(function(e,t){return Ey(e,t)})),this.uid=t.uid||""}return lt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:Og(i)};return Zk(e).put(a)}return Hp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ep(t),""],!1,!0);return Zk(e).W(r).next((function(e){var r,i=nt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Mg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=tb(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=nb(e);return a.next((function(e){o.put(xk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=tb(e),r=nb(e),i=eb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=eb(e),i=!0,a=new Map;return Hp.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=qm(),o=[];return Hp.forEach(a,(function(i,a){var u;rp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Sy(t)));var s=function(e,t){var n=Pp(t);if(void 0===n)return null;var r,i=nt(Ty(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=nt(Lp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=nt(Ty(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=nt(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Cy(e,o.fieldPath,e.startAt):Ny(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new qv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=nt(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ny(e,o.fieldPath,e.endAt):Cy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new qv(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Hp.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Dp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Hp.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Bk(Wv.create(e.filters,"and")).map((function(t){return xy(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.rn(t[s/c]):Xk,h=u.on(e,f,n[s%c],r),d=u.un(e,f,i[s%c],a),p=o.map((function(t){return u.on(e,f,t,!0)}));l.push.apply(l,ft(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"on",value:function(e,t,n,r){var i=new Mk(e,Dp.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new Mk(e,Dp.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new Vk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=nt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Hp.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new vy(Rp.comparator),r=!1,i=nt(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=nt(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=nt(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new Lk,i=nt(Lp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);Nk.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new Lk;return Nk.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new Lk;return Nk.Ie.ue(Av(this.databaseId,t),n.qe(function(e){var t=Lp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Lk);var i,a=0,o=nt(Lp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=nt(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&Dv(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);Nk.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=ft(e),a=[],o=nt(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=nt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Lk;f.seed(l.Fe()),Nk.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Hv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=tb(e),i=nb(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Hp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fp(t.sequenceNumber,new jp(yk(t.readTime),new Dp(Mg(t.documentKey)),t.largestBatchId)):Fp.empty(),r=e.fields.map((function(e){var t=it(e,2),n=t[0],r=t[1];return new Mp(Rp.fromServerFormat(n),r)}));return new Op(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=tb(e),a=nb(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Hp.forEach(t,(function(t){return a.put(xk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Hp.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Hp.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Hp.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Hp.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return eb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return eb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=eb(e),i=new vy(Fk);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new Mk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new vy(Fk),r=this.cn(t,e);if(null==r)return n;var i=Pp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Dv(a)){var o,u=nt(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Mk(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Mk(t.indexId,e.key,Xk,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;rp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=my(a),s=my(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=my(o)):l?(i(u),u=my(a)):(u=my(a),s=my(o))}}(r,i,Fk,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),Hp.waitFor(o)}},{key:"dn",value:function(e){var t=1;return nb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Fk(e,t)})).filter((function(e,t,n){return!t||0!==Fk(e,n[t-1])}));var r=[];r.push(e);var i,a=nt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Fk(o,e),s=Fk(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Xk,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Xk,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return Fk(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(rb)}},{key:"getMinOffset",value:function(e,t){var n=this;return Hp.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||up()}))})).next(rb)}}]),e}();function Zk(e){return uk(e,"collectionParents")}function eb(e){return uk(e,"indexEntries")}function tb(e){return uk(e,"indexConfiguration")}function nb(e){return uk(e,"indexState")}function rb(e){sp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Bp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jp(t.readTime,t.documentKey,n)}var ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ab=function(){function e(t,n,r){ut(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return lt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ob(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){sp(1===u)})));var c,l=[],f=nt(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Vg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Hp.waitFor(a).next((function(){return l}))}function ub(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw up();t=e.noDocument}return JSON.stringify(t).length}ab.DEFAULT_COLLECTION_PERCENTILE=10,ab.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ab.DEFAULT=new ab(41943040,ab.DEFAULT_COLLECTION_PERCENTILE,ab.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ab.DISABLED=new ab(-1,0,0);var sb=function(){function e(t,n,r,i){ut(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return lt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lb(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=fb(e),o=lb(e);return o.add({}).next((function(u){sp("number"==typeof u);var s,c=new sk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return kg(e.ie,t)})),i=n.mutations.map((function(t){return kg(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new vy((function(e,t){return xp(e.canonicalString(),t.canonicalString())})),d=nt(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Vg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,jg))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Hp.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return lb(e).get(t).next((function(e){return e?(sp(e.userId===n.userId),mk(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Hp.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return lb(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sp(t.batchId>=r),a=mk(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return lb(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lb(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return mk(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ug(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return fb(e).Z({range:i},(function(r,i,o){var u=it(r,3),s=u[0],c=u[1],l=u[2],f=Mg(c);if(s===n.userId&&t.path.isEqual(f))return lb(e).get(l).next((function(e){if(!e)throw up();sp(e.userId===n.userId),a.push(mk(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new vy(xp),i=[];return t.forEach((function(t){var a=Ug(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=fb(e).Z({range:o},(function(e,i,a){var o=it(e,3),u=o[0],s=o[1],c=o[2],l=Mg(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Hp.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ug(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new vy(xp);return fb(e).Z({range:o},(function(e,t,a){var o=it(e,3),s=o[0],c=o[1],l=o[2],f=Mg(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(lb(e).get(t).next((function(e){if(null===e)throw up();sp(e.userId===n.userId),r.push(mk(n.yt,e))})))})),Hp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ob(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Hp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Hp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return fb(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Mg(e[1]);i.push(a)}else r.done()})).next((function(){sp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return cb(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return hb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return sp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function cb(e,t,n){var r=Ug(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return fb(e).Z({range:a,X:!0},(function(e,n,r){var a=it(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function lb(e){return uk(e,"mutations")}function fb(e){return uk(e,"documentMutations")}function hb(e){return uk(e,"mutationQueues")}var db=function(){function e(t){ut(this,e),this.bn=t}return lt(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),pb=function(){function e(t,n){ut(this,e),this.referenceDelegate=t,this.yt=n}return lt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new db(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Tp.fromTimestamp(new Ip(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return vb(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return sp(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return vb(e).Z((function(o,u){var s=gk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Hp.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return vb(e).Z((function(e,n){var r=gk(n);t(r)}))}},{key:"Vn",value:function(e){return yb(e).get("targetGlobalKey").next((function(e){return sp(null!==e),e}))}},{key:"Sn",value:function(e,t){return yb(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return vb(e).put(kk(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Sy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vb(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=gk(n);Ey(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=mb(e);return t.forEach((function(t){var o=Og(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Hp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=mb(e);return Hp.forEach(t,(function(t){var a=Og(t.path);return Hp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=mb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mb(e),i=qm();return r.Z({range:n,X:!0},(function(e,t,n){var r=Mg(e[1]),a=new Dp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Og(t.path),r=IDBKeyRange.bound([n],[Ep(n)],!1,!0),i=0;return mb(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=it(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return vb(e).get(t).next((function(e){return e?gk(e):null}))}}]),e}();function vb(e){return uk(e,"targets")}function yb(e){return uk(e,"targetGlobal")}function mb(e){return uk(e,"targetDocuments")}function gb(e,t){var n=it(e,2),r=n[0],i=n[1],a=it(t,2),o=a[0],u=a[1],s=xp(r,o);return 0===s?xp(i,u):s}var kb=function(){function e(t){ut(this,e),this.xn=t,this.buffer=new vy(gb),this.Nn=0}return lt(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();gb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),bb=function(){function e(t,n,r){ut(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return lt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;rp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Xp(e.t0)){e.next=12;break}rp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Kp(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),wb=function(){function e(t,n){ut(this,e),this.$n=t,this.params=n}return lt(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Hp.resolve(iv.at);var r=new kb(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(rp("LruGarbageCollector","Garbage collection skipped; disabled"),Hp.resolve(ib)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(rp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ib):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(rp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),np()<=$t.DEBUG&&rp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Hp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),_b=function(){function e(t,n){ut(this,e),this.db=t,this.garbageCollector=function(e,t){return new wb(e,t)}(this,n)}return lt(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return xb(e,n)}},{key:"removeReference",value:function(e,t,n){return xb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return xb(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return hb(e).tt((function(r){return cb(e,r,t).next((function(e){return e&&(n=!0),Hp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Tp.min()),mb(e).delete([0,Og(o.path)])}))}));i.push(s)}})).next((function(){return Hp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return xb(e,t)}},{key:"Kn",value:function(e,t){var n,r=mb(e),i=iv.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=it(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==iv.at&&t(new Dp(Mg(n)),i),i=s,n=u):i=iv.at})).next((function(){i!==iv.at&&t(new Dp(Mg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function xb(e,t){return mb(e).put(function(e,t){return{targetId:0,path:Og(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Sb=function(){function e(){ut(this,e),this.changes=new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return lt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,wy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Hp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Eb=function(){function e(t){ut(this,e),this.yt=t}return lt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Nb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Nb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],pk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=wy.newInvalidDocument(t);return Nb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ab(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:wy.newInvalidDocument(t)};return Nb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ab(t))},(function(e,i){r={document:n.jn(t,i),size:ub(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Om();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Om(),i=new hy(Dp.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,ub(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Hp.resolve();var r=new vy(Db);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ab(r.first()),Ab(r.last())),a=r.getIterator(),o=a.getNext();return Nb(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Dp.fromSegments([].concat(ft(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Db(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Ab(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),pk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nb(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Om(),i=nt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Dp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Om(),o=Rb(t,n),u=Rb(t,jp.max());return Nb(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Dp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Tb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Cb(e).get("remoteDocumentGlobalKey").next((function(e){return sp(!!e),e}))}},{key:"Qn",value:function(e,t){return Cb(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mg(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Dp.fromSegments(t.noDocument.path),i=yk(t.noDocument.readTime);n=wy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return up();var a=Dp.fromSegments(t.unknownDocument.path),o=yk(t.unknownDocument.version);n=wy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ip(e[0],e[1]);return Tp.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(Tp.min()))return n}return wy.newInvalidDocument(e)}}]),e}();function Ib(e){return new Eb(e)}var Tb=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Rm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return lt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new vy((function(e,t){return xp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=dk(t.Yn.yt,o);i=i.add(a.path.popLast());var c=ub(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=dk(t.Yn.yt,o.convertToNoDocument(Tp.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Hp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Sb);function Cb(e){return uk(e,"remoteDocumentGlobal")}function Nb(e){return uk(e,"remoteDocumentsV14")}function Ab(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Rb(e,t){var n=t.documentKey.path.toArray();return[e,pk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Db(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=xp(n[a],r[a]))return i;return(i=xp(n.length,r.length))||((i=xp(n[n.length-2],r[r.length-2]))||xp(n[n.length-1],r[r.length-1]))}var Ob=lt((function e(t,n){ut(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Pb=function(){function e(t,n,r,i){ut(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return lt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ym(r.mutation,e,gy.empty(),Ip.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,qm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qm(),i=Fm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Lm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Fm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,qm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Om(),a=Vm(),o=Vm();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof bm)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),ym(o.mutation,t,o.mutation.getFieldMask(),Ip.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ob(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Vm(),i=new hy((function(e,t){return e-t})),a=qm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=nt(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||gy.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||qm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Um();c.forEach((function(e){if(!a.has(e)){var n=pm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Hp.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):My(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Hp.resolve(Fm()),u=-1,s=a;return o.next((function(t){return Hp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Hp.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,qm())})).next((function(e){return{batchId:u,changes:Mm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Dp(t)).next((function(e){var t=Lm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Lm();return this.indexManager.getCollectionParents(e,i).next((function(o){return Hp.forEach(o,(function(o){var u=function(e,t){return new Ay(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,wy.newInvalidDocument(n)))}));var n=Lm();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&ym(a.mutation,i,gy.empty(),Ip.now()),Ky(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),Lb=function(){function e(t){ut(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return lt(e,[{key:"getBundleMetadata",value:function(e,t){return Hp.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:ug(n.createTime)}),Hp.resolve()}},{key:"getNamedQuery",value:function(e,t){return Hp.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:bk(e.bundledQuery),readTime:ug(e.readTime)}}(t)),Hp.resolve()}}]),e}(),Mb=function(){function e(){ut(this,e),this.overlays=new hy(Dp.comparator),this.es=new Map}return lt(e,[{key:"getOverlay",value:function(e,t){return Hp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Fm();return Hp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),Hp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Hp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Fm(),i=t.length+1,a=new Dp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Hp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new hy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Fm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Fm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Hp.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lk(t,n));var a=this.es.get(t);void 0===a&&(a=qm(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Fb=function(){function e(){ut(this,e),this.ns=new vy(Ub.ss),this.rs=new vy(Ub.os)}return lt(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ub(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new Ub(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Dp(new Np([])),r=new Ub(n,e),i=new Ub(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Dp(new Np([])),n=new Ub(t,e),r=new Ub(t,e+1),i=qm();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ub(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ub=function(){function e(t,n){ut(this,e),this.key=t,this._s=n}return lt(e,null,[{key:"ss",value:function(e,t){return Dp.comparator(e.key,t.key)||xp(e._s,t._s)}},{key:"os",value:function(e,t){return xp(e._s,t._s)||Dp.comparator(e.key,t.key)}}]),e}(),Vb=function(){function e(t,n){ut(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new vy(Ub.ss)}return lt(e,[{key:"checkEmpty",value:function(e){return Hp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sk(i,t,n,r);this.mutationQueue.push(a);var o,u=nt(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Ub(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Hp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Hp.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Hp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Hp.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Hp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ub(t,0),i=new Ub(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Hp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new vy(xp);return t.forEach((function(e){var t=new Ub(e,0),i=new Ub(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Hp.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Dp.isDocumentKey(i)||(i=i.child(""));var a=new Ub(new Dp(i),0),o=new vy(xp);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Hp.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sp(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Hp.forEach(t.mutations,(function(i){var a=new Ub(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ub(t,0),r=this.gs.firstAfterOrEqual(n);return Hp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Hp.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),jb=function(){function e(t){ut(this,e),this.Es=t,this.docs=new hy(Dp.comparator),this.size=0}return lt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Hp.resolve(n?n.document.mutableCopy():wy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Om();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():wy.newInvalidDocument(e))})),Hp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Om(),i=new Dp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Bp(Vp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Hp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){up()}},{key:"As",value:function(e,t){return Hp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Bb(this)}},{key:"getSize",value:function(e){return Hp.resolve(this.size)}}]),e}(),Bb=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).Yn=e,r}return lt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Hp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Sb),qb=function(){function e(t){ut(this,e),this.persistence=t,this.Rs=new Rm((function(e){return Sy(e)}),Ey),this.lastRemoteSnapshotVersion=Tp.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Fb,this.targetCount=0,this.vs=db.Pn()}return lt(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Hp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Hp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Hp.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Hp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Hp.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new db(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Hp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Hp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Hp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Hp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Hp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Hp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Hp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Hp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Hp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Hp.resolve(n)}},{key:"containsKey",value:function(e,t){return Hp.resolve(this.Ps.containsKey(t))}}]),e}(),zb=function(){function e(t,n){var r=this;ut(this,e),this.Vs={},this.overlays={},this.Ss=new iv(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new qb(this),this.indexManager=new $k,this.remoteDocumentCache=new jb((function(e){return r.referenceDelegate.xs(e)})),this.yt=new hk(n),this.Ns=new Lb(this.yt)}return lt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Vb(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;rp("MemoryPersistence","Starting transaction:",e);var i=new Kb(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Hp.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Kb=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return lt(n)}(zp),Gb=function(){function e(t){ut(this,e),this.persistence=t,this.Fs=new Fb,this.$s=null}return lt(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw up()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Hp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Hp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Hp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hp.forEach(this.Ls,(function(r){var i=Dp.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,Tp.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return Hp.or([function(){return Hp.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Hb=function(){function e(t){ut(this,e),this.yt=t}return lt(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Wp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fg,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Hp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Hp.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Jg});t.createIndex("collectionPathOverlayIndex",Zg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ek,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bg});t.createIndex("documentKeyIndex",qg),t.createIndex("collectionGroupIndex",zg)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qg}).createIndex("sequenceNumberIndex",$g,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Yg}).createIndex("documentKeyIndex",Xg,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=ub(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Hp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Hp.forEach(r,(function(r){sp(r.userId===n.userId);var i=mk(t.yt,r);return ob(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Np(n),o=function(e){return[0,Og(e)]}(a);r.push(t.get(o).next((function(n){return n?Hp.resolve():function(n){return t.put({targetId:0,path:Og(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Hp.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Wg});var n=t.store("collectionParents"),r=new Yk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Og(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Np(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=it(e,3),r=(n[0],n[1]),a=(n[2],Mg(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=gk(r),a=kk(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Dp(Np.fromString(i.document.name).popFirst(5)):i.noDocument?Dp.fromSegments(i.noDocument.path):i.unknownDocument?Dp.fromSegments(i.unknownDocument.path):up()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Hp.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Ib(this.yt),a=new zb(Gb.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:qm();mk(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Hp.forEach(r,(function(e,r){var o=new Zd(r),u=Tk.re(n.yt,o),s=a.getIndexManager(o),c=sb.re(o,n.yt,s,a.referenceDelegate);return new Pb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ok(t,iv.at),e).next()}))}))}}]),e}();function Wb(e){e.createObjectStore("targetDocuments",{keyPath:Gg}).createIndex("documentTargetsIndex",Hg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kg,{unique:!0}),e.createObjectStore("targetGlobal")}var Qb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$b=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(ut(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new fp(lp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _b(this,i),this.ii=n+"main",this.yt=new hk(s),this.ri=new Qp(this.ii,this.Xs,new Hb(this.yt)),this.Cs=new pb(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ib(this.yt),this.Ns=new Sk,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&ip("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return lt(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fp(lp.FAILED_PRECONDITION,Qb);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new iv(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=ot(rt().mark((function n(r){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=ot(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Xb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Xp(t))return rp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return rp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Yb(e).get("owner").next((function(e){return Hp.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Xb(e).delete(this.clientId)}},{key:"yi",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i,a=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=uk(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Hp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=nt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Hp.resolve(!0):Yb(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new fp(lp.FAILED_PRECONDITION,Qb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Xb(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&rp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ot(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ok(e,iv.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Xb(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return sb.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Jk(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Tk.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;rp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?ak:14===i?ik:13===i?rk:12===i?nk:11===i?tk:void up();return this.ri.runTransaction(e,o,u,(function(i){return a=new ok(i,r.Ss?r.Ss.next():iv.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw ip("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new fp(lp.FAILED_PRECONDITION,qp);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Yb(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fp(lp.FAILED_PRECONDITION,Qb)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yb(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Yb(e);return n.get("owner").next((function(e){return t.mi(e)?(rp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Hp.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ip("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!_t()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ip("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(ul){ip("Failed to set zombie client id.",ul)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(ul){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Qp.C()}}]),e}();function Yb(e){return uk(e,"owner")}function Xb(e){return uk(e,"clientMetadata")}function Jb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Zb=function(){function e(t,n,r,i){ut(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return lt(e,null,[{key:"Ci",value:function(t,n){var r,i=qm(),a=qm(),o=nt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ew=function(){function e(){ut(this,e),this.xi=!1}return lt(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Oy(t))return Hp.resolve(null);var r=Uy(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=jy(t,null,"F"),r=Uy(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=qm.apply(void 0,ft(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,jy(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Oy(t)||r.isEqual(Tp.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(np()<=$t.DEBUG&&rp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zy(t)),i.Bi(e,o,t,Up(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new vy(Hy(e));return t.forEach((function(t,r){Ky(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return np()<=$t.DEBUG&&rp("QueryEngine","Using full collection scan to execute query:",zy(t)),this.Ni.getDocumentsMatchingQuery(e,t,jp.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),tw=function(){function e(t,n,r,i){ut(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new hy(xp),this.Ui=new Rm((function(e){return Sy(e)}),Ey),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return lt(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pb(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function nw(e,t,n,r){return new tw(e,t,n,r)}function rw(e,t){return iw.apply(this,arguments)}function iw(){return iw=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=qm(),s=nt(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=nt(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=nt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=nt(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){var n=cp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Hp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=qm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ow(e){var t=cp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function uw(e,t){var n=cp(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(dv.EMPTY_BYTE_STRING,Tp.min()).withLastLimboFreeSnapshotVersion(Tp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Om(),s=qm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sw(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Tp.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Hp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function sw(e,t,n){var r=qm(),i=qm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Om();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Tp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function cw(e,t){var n=cp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function lw(e,t){var n=cp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Hp.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new fk(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function fw(e,t,n){return hw.apply(this,arguments)}function hw(){return hw=ot(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cp(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Xp(e.t1)){e.next=12;break}throw e.t1;case 12:rp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),hw.apply(this,arguments)}function dw(e,t,n){var r=cp(e),i=Tp.min(),a=qm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=cp(e),i=r.Ui.get(n);return void 0!==i?Hp.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,Uy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Tp.min(),n?a:qm())})).next((function(e){return yw(r,Gy(t),e),{documents:e,Hi:a}}))}))}function pw(e,t){var n=cp(e),r=cp(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function vw(e,t){var n=cp(e),r=n.Ki.get(t)||Tp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,Up(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return yw(n,t,e),e}))}function yw(e,t,n){var r=e.Ki.get(t)||Tp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function mw(e,t,n,r){return gw.apply(this,arguments)}function gw(){return gw=ot(rt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=cp(t),o=qm(),u=Om(),s=nt(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,lw(a,function(e){return Uy(Dy(Np.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return sw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return bw.apply(this,arguments)}function bw(){return bw=ot(rt().mark((function e(t,n){var r,i,a,o=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:qm(),e.next=3,lw(t,Uy(bk(n.bundledQuery)));case 3:return i=e.sent,a=cp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ug(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(dv.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function ww(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function _w(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function xw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Sw=function(){function e(t,n,r,i){ut(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return lt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ip("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ew=function(){function e(t,n,r){ut(this,e),this.targetId=t,this.state=n,this.error=r}return lt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fp(i.error.code,i.error.message))),a?new e(t,i.state,r):(ip("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Iw=function(){function e(t,n){ut(this,e),this.clientId=t,this.activeTargetIds=n}return lt(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Km(),o=0;i&&o<r.activeTargetIds.length;++o)i=hv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ip("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Tw=function(){function e(t,n){ut(this,e),this.clientId=t,this.onlineState=n}return lt(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ip("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Cw=function(){function e(){ut(this,e),this.activeTargetIds=Km()}return lt(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Nw=function(){function e(t,n,r,i,a){ut(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hy(xp),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=ww(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Cw),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return lt(e,[{key:"start",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=nt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ww(this.persistenceKey,i)))&&(o=Iw.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=nt(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(xw(this.persistenceKey,e));if(n){var r=Ew.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(xw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return rp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){rp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){rp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(rp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void ip("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(ot(rt().mark((function e(){var r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=iv.at;if(null!=e)try{var n=JSON.parse(e);sp("number"==typeof n),t=n}catch(e){ip("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==iv.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Sw(this.currentUser,e,t,n),i=_w(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=_w(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=xw(this.persistenceKey,e),i=new Ew(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Iw.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sw.Zi(new Zd(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Ew.Zi(r,t)}},{key:"yr",value:function(e){return Tw.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:rp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=Km();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Aw=function(){function e(){ut(this,e),this.Lr=new Cw,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return lt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Cw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Rw=function(){function e(){ut(this,e)}return lt(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Dw=function(){function e(){var t=this;ut(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return lt(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){rp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=nt(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){rp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=nt(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Pw=function(){function e(t){ut(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return lt(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Lw=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return lt(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Xd;o.setWithCredentials(!0),o.listenOnce(Hd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gd.NO_ERROR:var t=o.getResponseJson();rp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gd.TIMEOUT:rp("Connection",'RPC "'+e+'" timed out'),a(new fp(lp.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:var n=o.getStatus();if(rp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(lp).indexOf(t)>=0?t:lp.UNKNOWN}(u.status);a(new fp(s,u.message))}else a(new fp(lp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fp(lp.UNAVAILABLE,"Connection failed."));break;default:up()}}finally{rp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=zd(),a=Kd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new $d({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");rp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Pw({Hr:function(e){l?rp("Connection","Not sending because WebChannel is closed:",e):(c||(rp("Connection","Opening WebChannel transport."),s.open(),c=!0),rp("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Yd.EventType.OPEN,(function(){l||rp("Connection","WebChannel transport opened.")})),h(s,Yd.EventType.CLOSE,(function(){l||(l=!0,rp("Connection","WebChannel transport closed"),f.io())})),h(s,Yd.EventType.ERROR,(function(e){l||(l=!0,ap("Connection","WebChannel transport errored:",e),f.io(new fp(lp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Yd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];sp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){rp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Sm[e];if(void 0!==t)return Am(t)}(a),u=i.message;void 0===o&&(o=lp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new fp(o,u)),s.close()}else rp("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Wd.STAT_EVENT,(function(e){e.stat===Qd.PROXY?rp("Connection","Detected buffering proxy"):e.stat===Qd.NOPROXY&&rp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){ut(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return lt(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);rp("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return rp("RestConnection","Received: ",e),e}),(function(t){throw ap("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ep,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Ow[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Mw(){return"undefined"!=typeof window?window:null}function Fw(){return"undefined"!=typeof document?document:null}function Uw(e){return new rg(e,!0)}var Vw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ut(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return lt(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&rp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),jw=function(){function e(t,n,r,i,a,o,u,s){ut(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Vw(t,n)}return lt(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===lp.RESOURCE_EXHAUSTED?(ip(n.toString()),ip("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===lp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=it(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new fp(lp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return rp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(rp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Bw=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a,o,u){var s;return ut(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return lt(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:up()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(sp(void 0===t||"string"==typeof t),dv.fromBase64String(t||"")):(sp(void 0===t||t instanceof Uint8Array),dv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?lp.UNKNOWN:Am(e.code);return new fp(t,e.message||"")}(o);n=new $m(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=fg(e,s.document.name),l=ug(s.document.updateTime),f=s.document.createTime?ug(s.document.createTime):Tp.min(),h=new ky({mapValue:{fields:s.document.fields}}),d=wy.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Wm(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=fg(e,y.document),g=y.readTime?ug(y.readTime):Tp.min(),k=wy.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Wm([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=fg(e,w.document),x=w.removedTargetIds||[];n=new Wm([],x,_,null)}else{if(!("filter"in t))return up();t.filter;var S=t.filter;S.targetId;var E=S.count||0,I=new Cm(E),T=S.targetId;n=new Qm(T,I)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Tp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Tp.min():t.readTime?ug(t.readTime):Tp.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=pg(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Iy(r)?{documents:wg(e,r)}:{query:_g(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ag(e,t.resumeToken):t.snapshotVersion.compareTo(Tp.min())>0&&(n.readTime=ig(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return up()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=pg(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(jw),qw=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a,o,u){var s;return ut(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return lt(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,We(Ge(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(sp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(sp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ug(e.updateTime):ug(t);return n.isEqual(Tp.min())&&(n=ug(t)),new lm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ug(e.commitTime);return this.listener.Zo(n,t)}return sp(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=pg(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return kg(t.yt,e)}))};this.Bo(n)}}]),n}(jw),zw=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a){var o;return ut(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return lt(n,[{key:"su",value:function(){if(this.nu)throw new fp(lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=it(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fp(lp.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=it(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fp(lp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return lt((function e(){ut(this,e)}))}());var Kw=function(){function e(t,n){ut(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return lt(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(ip(t),this.ou=!1):rp("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Gw=lt((function e(t,n,r,i,a){var o=this;ut(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n_(o),!e.t0){e.next=5;break}return rp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cp(t))._u.add(4),e.next=4,Qw(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Hw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Kw(r,i)}));function Hw(e){return Ww.apply(this,arguments)}function Ww(){return Ww=ot(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n_(t)){e.next=18;break}n=nt(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ww.apply(this,arguments)}function Qw(e){return $w.apply(this,arguments)}function $w(){return $w=ot(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nt(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),$w.apply(this,arguments)}function Yw(e,t){var n=cp(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),t_(n)?e_(n):R_(n).ko()&&Jw(n,t))}function Xw(e,t){var n=cp(e),r=R_(n);n.du.delete(t),r.ko()&&Zw(n,t),0===n.du.size&&(r.ko()?r.Fo():n_(n)&&n.gu.set("Unknown"))}function Jw(e,t){e.yu.Ot(t.targetId),R_(e).zo(t)}function Zw(e,t){e.yu.Ot(t),R_(e).Ho(t)}function e_(e){e.yu=new Xm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),R_(e).start(),e.gu.uu()}function t_(e){return n_(e)&&!R_(e).No()&&e.du.size>0}function n_(e){return 0===cp(e)._u.size}function r_(e){e.yu=void 0}function i_(e){return a_.apply(this,arguments)}function a_(){return a_=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Jw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r_(t),t_(t)?(t.gu.hu(n),e_(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t,n){return c_.apply(this,arguments)}function c_(){return c_=ot(rt().mark((function e(t,n,r){var i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof $m&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=nt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,l_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Wm?t.yu.Kt(n):n instanceof Qm?t.yu.Jt(n):t.yu.jt(n),r.isEqual(Tp.min())){e.next=29;break}return e.prev=14,e.next=17,ow(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(dv.EMPTY_BYTE_STRING,n.snapshotVersion)),Zw(e,t);var r=new fk(n.target,t,1,n.sequenceNumber);Jw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),rp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,l_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),c_.apply(this,arguments)}function l_(e,t,n){return f_.apply(this,arguments)}function f_(){return f_=ot(rt().mark((function e(t,n,r){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xp(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Qw(t);case 5:t.gu.set("Offline"),r||(r=function(){return ow(t.localStore)}),t.asyncQueue.enqueueRetryable(ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Hw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t){return t().catch((function(n){return l_(e,n,t)}))}function d_(e){return p_.apply(this,arguments)}function p_(){return p_=ot(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cp(t),r=D_(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!v_(n)){e.next=19;break}return e.prev=3,e.next=6,cw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,y_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,l_(n,e.t0);case 17:e.next=2;break;case 19:m_(n)&&g_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),p_.apply(this,arguments)}function v_(e){return n_(e)&&e.fu.length<10}function y_(e,t){e.fu.push(t);var n=D_(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function m_(e){return n_(e)&&!D_(e).No()&&e.fu.length>0}function g_(e){D_(e).start()}function k_(e){return b_.apply(this,arguments)}function b_(){return b_=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D_(t).eu();case 1:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function w_(e){return __.apply(this,arguments)}function __(){return __=ot(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=D_(t),r=nt(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function x_(e,t,n){return S_.apply(this,arguments)}function S_(){return S_=ot(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=ck.from(i,n,r),e.next=3,h_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,d_(t);case 5:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function E_(e,t){return I_.apply(this,arguments)}function I_(){return I_=ot(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&D_(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Nm(i=n.code)||i===lp.ABORTED){e.next=7;break}return r=t.fu.shift(),D_(t).Mo(),e.next=5,h_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,d_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:m_(t)&&g_(t);case 5:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function T_(e,t){return C_.apply(this,arguments)}function C_(){return C_=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cp(t)).asyncQueue.verifyOperationInProgress(),rp("RemoteStore","RemoteStore received new credentials"),i=n_(r),r._u.add(3),e.next=6,Qw(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Hw(r);case 12:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function N_(e,t){return A_.apply(this,arguments)}function A_(){return A_=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Hw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Qw(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function R_(e){return e.pu||(e.pu=function(e,t,n){var r=cp(e);return r.su(),new Bw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:i_.bind(null,e),Zr:o_.bind(null,e),Wo:s_.bind(null,e)}),e.wu.push(function(){var t=ot(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),t_(e)?e_(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:r_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function D_(e){return e.Iu||(e.Iu=function(e,t,n){var r=cp(e);return r.su(),new qw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:k_.bind(null,e),Zr:E_.bind(null,e),tu:w_.bind(null,e),Zo:x_.bind(null,e)}),e.wu.push(function(){var t=ot(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,d_(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(rp("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var O_=function(){function e(t,n,r,i,a){ut(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return lt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fp(lp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function P_(e,t){if(ip("AsyncQueue","".concat(t,": ").concat(e)),Xp(e))return new fp(lp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var L_=function(){function e(t){ut(this,e),this.comparator=t?function(e,n){return t(e,n)||Dp.comparator(e.key,n.key)}:function(e,t){return Dp.comparator(e.key,t.key)},this.keyedMap=Lm(),this.sortedSet=new hy(this.comparator)}return lt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),M_=function(){function e(){ut(this,e),this.Tu=new hy(Dp.comparator)}return lt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):up():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),F_=function(){function e(t,n,r,i,a,o,u,s,c){ut(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return lt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&By(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,L_.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),U_=lt((function e(){ut(this,e),this.Au=void 0,this.listeners=[]})),V_=lt((function e(){ut(this,e),this.queries=new Rm((function(e){return qy(e)}),By),this.onlineState="Unknown",this.Ru=new Set}));function j_(e,t){return B_.apply(this,arguments)}function B_(){return B_=ot(rt().mark((function e(t,n){var r,i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new U_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=P_(e.t0,"Initialization of query '".concat(zy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&H_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),B_.apply(this,arguments)}function q_(e,t){return z_.apply(this,arguments)}function z_(){return z_=ot(rt().mark((function e(t,n){var r,i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function K_(e,t){var n,r=cp(e),i=!1,a=nt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=nt(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&H_(r)}function G_(e,t,n){var r=cp(e),i=r.queries.get(t);if(i){var a,o=nt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function H_(e){e.Ru.forEach((function(e){e.next()}))}var W_=function(){function e(t,n,r){ut(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return lt(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=nt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new F_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=F_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),Q_=function(){function e(t,n){ut(this,e),this.ku=t,this.byteLength=n}return lt(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),$_=function(){function e(t){ut(this,e),this.yt=t}return lt(e,[{key:"Ji",value:function(e){return fg(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?mg(this.yt,e.document,!1):wy.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return ug(e)}}]),e}(),Y_=function(){function e(t,n,r){ut(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=X_(t)}return lt(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=Np.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new $_(this.yt),i=nt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=nt(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||qm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw(this.localStore,new $_(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=nt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,kw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function X_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var J_=lt((function e(t){ut(this,e),this.key=t})),Z_=lt((function e(t){ut(this,e),this.key=t})),ex=function(){function e(t,n){ut(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=qm(),this.mutatedKeys=qm(),this.Gu=Hy(t),this.Qu=new L_(this.Gu)}return lt(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new M_,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ky(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return up()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new F_(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new M_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=qm(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Z_(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new J_(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=qm();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return F_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),tx=lt((function e(t,n,r){ut(this,e),this.query=t,this.targetId=n,this.view=r})),nx=lt((function e(t){ut(this,e),this.key=t,this.nc=!1})),rx=function(){function e(t,n,r,i,a,o){ut(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Rm((function(e){return qy(e)}),By),this.rc=new Map,this.oc=new Set,this.uc=new hy(Dp.comparator),this.cc=new Map,this.ac=new Fb,this.hc={},this.lc=new Map,this.fc=db.vn(),this.onlineState="Unknown",this.dc=void 0}return lt(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=ot(rt().mark((function e(t,n){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xx(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,lw(r.localStore,Uy(n));case 8:return u=e.sent,r.isPrimaryClient&&Yw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ox(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t,n,r,i){return ux.apply(this,arguments)}function ux(){return ux=ot(rt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=ot(rt().mark((function e(t,n,r,i){var a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,dw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Tx(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,dw(t.localStore,n,!0);case 3:return o=e.sent,u=new ex(n,o.Hi),s=u.Wu(o.documents),c=Hm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Tx(t,r,l.Xu),f=new tx(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=ot(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cp(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!By(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,fw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Xw(r.remoteStore,i.targetId),Ex(r,i.targetId)})).catch(Kp);case 9:e.next=14;break;case 11:return Ex(r,i.targetId),e.next=14,fw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=ot(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=cp(e),a=Ip.now(),o=t.reduce((function(e,t){return e.add(t.key)}),qm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Om(),s=qm();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=nt(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=mm(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new bm(c.key,l,by(l.value.mapValue),fm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Mm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new hy(xp)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Ax(i,a.changes);case 9:return e.next=11,d_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=P_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.prev=1,e.next=4,uw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(sp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?sp(n.nc):e.removedDocuments.size>0&&(sp(n.nc),n.nc=!1))})),e.next=8,Ax(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Kp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),dx.apply(this,arguments)}function px(e,t,n){var r=cp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=nt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&H_(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function vx(e,t,n){return yx.apply(this,arguments)}function yx(){return yx=ot(rt().mark((function e(t,n,r){var i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new hy(Dp.comparator)).insert(o,wy.newNoDocument(o,Tp.min())),s=qm().add(o),c=new Gm(Tp.min(),new Map,new vy(xp),u,s),e.next=9,hx(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Nx(i),e.next=16;break;case 14:return e.next=16,fw(i.localStore,n,!1).then((function(){return Ex(i,n,r)})).catch(Kp);case 16:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function mx(e,t){return gx.apply(this,arguments)}function gx(){return gx=ot(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=n.batch.batchId,e.prev=1,e.next=4,aw(r.localStore,n);case 4:return a=e.sent,Sx(r,i,null),xx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ax(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),gx.apply(this,arguments)}function kx(e,t,n){return bx.apply(this,arguments)}function bx(){return bx=ot(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cp(t),e.prev=1,e.next=4,function(e,t){var n=cp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Sx(i,n,r),xx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ax(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bx.apply(this,arguments)}function wx(e,t){return _x.apply(this,arguments)}function _x(){return _x=ot(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n_((r=cp(t)).remoteStore)||rp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=cp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=P_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),_x.apply(this,arguments)}function xx(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Sx(e,t,n){var r=cp(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Ex(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=nt(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||Ix(e,t)}))}function Ix(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Xw(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Nx(e))}function Tx(e,t,n){var r,i=nt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof J_?(e.ac.addReference(a.key,t),Cx(e,a)):a instanceof Z_?(rp("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Ix(e,a.key)):up()}}catch(o){i.e(o)}finally{i.f()}}function Cx(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(rp("SyncEngine","New document in limbo: "+n),e.oc.add(r),Nx(e))}function Nx(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Dp(Np.fromString(t)),r=e.fc.next();e.cc.set(r,new nx(n)),e.uc=e.uc.insert(n,r),Yw(e.remoteStore,new fk(Uy(Dy(n.path)),r,2,iv.at))}}function Ax(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=ot(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cp(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Zb.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hp.forEach(n,(function(t){return Hp.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Hp.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Xp(e.t0)){e.next=10;break}throw e.t0;case 10:rp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=nt(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Dx(e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cp(t)).currentUser.isEqual(n)){e.next=11;break}return rp("SyncEngine","User change. New user:",n.toKey()),e.next=5,rw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new fp(lp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ax(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Px(e,t){var n=cp(e),r=n.cc.get(t);if(r&&r.nc)return qm().add(r.key);var i=qm(),a=n.rc.get(t);if(!a)return i;var o,u=nt(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=ot(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.next=3,dw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&Tx(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=ot(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),e.abrupt("return",vw(r.localStore,n).then((function(e){return Ax(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t,n,r){return jx.apply(this,arguments)}function jx(){return jx=ot(rt().mark((function e(t,n,r,i){var a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cp(t),e.next=3,function(e,t){var n=cp(e),r=cp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Hp.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,d_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Sx(a,n,i||null),xx(a,n),function(e,t){cp(cp(e).mutationQueue).An(t)}(a.localStore,n)):up();case 11:return e.next=13,Ax(a,o);case 13:e.next=16;break;case 15:rp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return qx=ot(rt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xx(r=cp(t)),Jx(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,zx(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,N_(r.remoteStore,!0);case 9:o=nt(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Yw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ex(r,t),fw(r.localStore,t,!0)})),Xw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,zx(r,c);case 21:return function(e){var t=cp(e);t.cc.forEach((function(e,n){Xw(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new hy(Dp.comparator)}(r),r.dc=!1,e.next=25,N_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function zx(e,t,n){return Kx.apply(this,arguments)}function Kx(){return Kx=ot(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=cp(t),a=[],o=[],u=nt(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,lw(i.localStore,Uy(f[0]));case 11:l=e.sent,h=nt(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,Lx(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,pw(i.localStore,c);case 36:return m=e.sent,e.next=39,lw(i.localStore,m);case 39:return l=e.sent,e.next=42,ox(i,Gx(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Kx.apply(this,arguments)}function Gx(e){return Ry(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Hx(e){var t=cp(e);return cp(cp(t.localStore).persistence).vi()}function Wx(e,t,n,r){return Qx.apply(this,arguments)}function Qx(){return Qx=ot(rt().mark((function e(t,n,r,i){var a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=cp(t)).dc){e.next=3;break}return e.abrupt("return",void rp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,vw(a.localStore,Gy(o[0]));case 10:return u=e.sent,s=Gm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,dv.EMPTY_BYTE_STRING),e.next=14,Ax(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,fw(a.localStore,n,!0);case 17:return Ex(a,n,i),e.abrupt("break",20);case 19:up();case 20:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function $x(e,t,n){return Yx.apply(this,arguments)}function Yx(){return Yx=ot(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Xx(t)).dc){e.next=45;break}a=nt(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return rp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,pw(i.localStore,u);case 12:return s=e.sent,e.next=15,lw(i.localStore,s);case 15:return c=e.sent,e.next=18,ox(i,Gx(s),c.targetId,!1,c.resumeToken);case 18:Yw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=nt(r),e.prev=30,h=rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,fw(i.localStore,t,!1).then((function(){Xw(i.remoteStore,t),Ex(i,t)})).catch(Kp);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Yx.apply(this,arguments)}function Xx(e){var t=cp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Px.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vx.bind(null,t),t.sc.Wo=K_.bind(null,t.eventManager),t.sc.wc=G_.bind(null,t.eventManager),t}function Jx(e){var t=cp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kx.bind(null,t),t}function Zx(e,t,n){var r=cp(e);(function(){var e=ot(rt().mark((function e(t,n,r){var i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=cp(e),r=ug(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(X_(i)),a=new Y_(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Ax(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=cp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ap("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var eS=function(){function e(){ut(this,e),this.synchronizeTabs=!1}return lt(e,[{key:"initialize",value:function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Uw(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return nw(this.persistence,new ew,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new zb(Gb.Bs,this.yt)}},{key:"gc",value:function(e){return new Aw}},{key:"terminate",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tS=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return lt(n,[{key:"initialize",value:function(){var e=ot(rt().mark((function e(t){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(Ge(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Jx(this.Ac.syncEngine);case 6:return e.next=8,d_(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return nw(this.persistence,new ew,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new bb(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new rv(t,this.persistence);return new nv(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ab.withCacheSize(this.cacheSizeBytes):ab.DEFAULT;return new $b(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Mw(),Fw(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Aw}}]),n}(eS),nS=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return lt(n,[{key:"initialize",value:function(){var e=ot(rt().mark((function e(t){var r,i=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(Ge(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof Nw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:Vx.bind(null,r),$r:Wx.bind(null,r),Br:$x.bind(null,r),vi:Hx.bind(null,r),Mr:Fx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bx(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=Mw();if(!Nw.C(t))throw new fp(lp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(tS),rS=function(){function e(){ut(this,e)}return lt(e,[{key:"initialize",value:function(){var e=ot(rt().mark((function e(t,n){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return px(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Dx.bind(null,this.syncEngine),e.next=12,N_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new V_}},{key:"createDatastore",value:function(e){var t,n=Uw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Lw(t));return function(e,t,n,r){return new zw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return px(o.syncEngine,e,0)},a=Dw.C()?new Dw:new Rw,new Gw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new rx(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cp(t),rp("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Qw(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function iS(e,t,n){if(!n)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function aS(e,t,n,r){if(!0===t&&!0===r)throw new fp(lp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function oS(e){if(!Dp.isDocumentKey(e))throw new fp(lp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function uS(e){if(Dp.isDocumentKey(e))throw new fp(lp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function sS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":up()}function cS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fp(lp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sS(e);throw new fp(lp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function lS(e,t){if(t<=0)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var fS=new Map,hS=function(){function e(t){var n;if(ut(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fp(lp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fp(lp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,aS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return lt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),dS=function(){function e(t,n,r,i){ut(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1}return lt(e,[{key:"app",get:function(){if(!this._app)throw new fp(lp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fp(lp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pp;switch(e.type){case"gapi":var t=e.client;return new gp(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fp(lp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=fS.get(e);t&&(rp("ComponentProvider","Removing Datastore"),fS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function pS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=cS(e,dS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ap("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Zd.MOCK_USER;else{o=At(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new fp(lp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Zd(s)}e._authCredentials=new vp(new dp(o,u))}}var vS=function(){function e(t,n,r){ut(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return lt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new mS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),yS=function(){function e(t,n,r){ut(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return lt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),mS=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this,e,r,Dy(i)))._path=i,a.type="collection",a}return lt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new vS(this.firestore,null,new Dp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(yS);function gS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Kt(e),iS("collection","path",t),e instanceof dS){var a=Np.fromString.apply(Np,[t].concat(r));return uS(a),new mS(e,null,a)}if(!(e instanceof vS||e instanceof mS))throw new fp(lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Np.fromString.apply(Np,[t].concat(r)));return uS(o),new mS(e.firestore,null,o)}function kS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Kt(e),1===arguments.length&&(t=_p.R()),iS("doc","path",t),e instanceof dS){var a=Np.fromString.apply(Np,[t].concat(r));return oS(a),new vS(e,null,new Dp(a))}if(!(e instanceof vS||e instanceof mS))throw new fp(lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Np.fromString.apply(Np,[t].concat(r)));return oS(o),new vS(e.firestore,e instanceof mS?e.converter:null,new Dp(o))}function bS(e,t){return e=Kt(e),t=Kt(t),(e instanceof vS||e instanceof mS)&&(t instanceof vS||t instanceof mS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function wS(e,t){return e=Kt(e),t=Kt(t),e instanceof yS&&t instanceof yS&&e.firestore===t.firestore&&By(e._query,t._query)&&e.converter===t.converter}function _S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ot(rt().mark((function r(){var i;return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var xS=function(){function e(t){ut(this,e),this.observer=t,this.muted=!1}return lt(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):ip("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),SS=function(){function e(t,n){var r=this;ut(this,e),this.Pc=t,this.yt=n,this.metadata=new hp,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return lt(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=ot(rt().mark((function e(){var t,n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new Q_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=ot(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=ot(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ES=function(){function e(t){ut(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return lt(e,[{key:"lookup",value:function(){var e=ot(rt().mark((function e(t){var n,r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fp(lp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ot(rt().mark((function e(t,n){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=pg(r.yt)+"/documents",a={documents:n.map((function(e){return lg(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=gg(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());sp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Im(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ot(rt().mark((function e(){var t,n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Dp.fromPath(t);n.mutations.push(new Tm(r,n.precondition(r)))})),e.next=7,function(){var e=ot(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cp(t),i=pg(r.yt)+"/documents",a={writes:n.map((function(e){return kg(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw up();t=Tp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fp(lp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tp.min())?fm.exists(!1):fm.updateTime(t):fm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tp.min()))throw new fp(lp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fm.updateTime(t)}return fm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),IS=function(){function e(t,n,r,i,a){ut(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Vw(this.asyncQueue,"transaction_retry")}return lt(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(ot(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ES(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!lv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Nm(t)}return!1}}]),e}(),TS=function(){function e(t,n,r,i){var a=this;ut(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zd.UNAUTHENTICATED,this.clientId=_p.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return rp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return lt(e,[{key:"getConfiguration",value:function(){var e=ot(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fp(lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ot(rt().mark((function n(){var r;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=P_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),rp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,rw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function AS(e,t){return RS.apply(this,arguments)}function RS(){return RS=ot(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,DS(t);case 3:return r=e.sent,rp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return T_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return T_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function DS(e){return OS.apply(this,arguments)}function OS(){return OS=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return rp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,CS(t,new eS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function PS(e){return LS.apply(this,arguments)}function LS(){return LS=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return rp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,AS(t,new rS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e){return DS(e).then((function(e){return e.persistence}))}function FS(e){return DS(e).then((function(e){return e.localStore}))}function US(e){return PS(e).then((function(e){return e.remoteStore}))}function VS(e){return PS(e).then((function(e){return e.syncEngine}))}function jS(e){return PS(e).then((function(e){return e.datastore}))}function BS(e){return qS.apply(this,arguments)}function qS(){return qS=ot(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ix.bind(null,n.syncEngine),r.onUnlisten=sx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function zS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function i(){return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xS({next:function(a){t.enqueueAndForget((function(){return q_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new fp(lp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new fp(lp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new W_(Dy(n.path),a,{includeMetadataChanges:!0,Nu:!0});return j_(e,o)},i.next=3,BS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function KS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function i(){return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xS({next:function(n){t.enqueueAndForget((function(){return q_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fp(lp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new W_(n,a,{includeMetadataChanges:!0,Nu:!0});return j_(e,o)},i.next=3,BS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var GS=function(){function e(){var t=this;ut(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Vw(this,"async_queue_retry"),this.Wc=function(){var e=Fw();e&&rp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Fw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return lt(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Fw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new hp;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=ot(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Xp(e.t0)){e.next=12;break}throw e.t0;case 12:rp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ip("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=O_.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&up()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=ot(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=nt(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=nt(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function HS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=nt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var WS=function(){function e(){ut(this,e),this._progressObserver={},this._taskCompletionResolver=new hp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return lt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),QS=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a){var o;return ut(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new GS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return lt(n,[{key:"_terminate",value:function(){return this._firestoreClient||YS(this),this._firestoreClient.terminate()}}]),n}(dS);function $S(e){return e._firestoreClient||YS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function YS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new av(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new TS(e._authCredentials,e._appCheckCredentials,e._queue,r)}function XS(e,t,n){var r=new hp;return e.asyncQueue.enqueue(ot(rt().mark((function i(){var a;return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,CS(e,n);case 3:return i.next=5,AS(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===lp.FAILED_PRECONDITION||e.code===lp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:ap("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function JS(e){return function(e){return e.asyncQueue.enqueue(ot(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,MS(e);case 2:return n=t.sent,t.next=5,US(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=cp(e);return t._u.delete(0),Hw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}($S(e=cS(e,QS)))}function ZS(e){return function(e){return e.asyncQueue.enqueue(ot(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,MS(e);case 2:return n=t.sent,t.next=5,US(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=cp(t))._u.add(0),e.next=4,Qw(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}($S(e=cS(e,QS)))}function eE(e,t){var n=$S(e=cS(e,QS)),r=new WS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new SS(e,t)}(function(e,t){if(e instanceof Uint8Array)return _S(e,t);if(e instanceof ArrayBuffer)return _S(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Uw(t));e.asyncQueue.enqueueAndForget(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Zx,t.next=3,VS(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function tE(e,t){return function(e,t){return e.asyncQueue.enqueue(ot(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=cp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,FS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}($S(e=cS(e,QS)),t).then((function(t){return t?new yS(e,null,t.query):null}))}function nE(e){if(e._initialized||e._terminated)throw new fp(lp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var rE=function(){function e(t){ut(this,e),this._byteString=t}return lt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(dv.fromBase64String(t))}catch(t){throw new fp(lp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(dv.fromUint8Array(t))}}]),e}(),iE=function(){function e(){ut(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fp(lp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rp(n)}return lt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var aE=lt((function e(t){ut(this,e),this._methodName=t})),oE=function(){function e(t,n){if(ut(this,e),!isFinite(t)||t<-90||t>90)throw new fp(lp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fp(lp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return lt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xp(this._lat,e._lat)||xp(this._long,e._long)}}]),e}(),uE=/^__.*__$/,sE=function(){function e(t,n,r){ut(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return lt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new bm(e,this.data,this.fieldMask,t,this.fieldTransforms):new km(e,this.data,t,this.fieldTransforms)}}]),e}(),cE=function(){function e(t,n,r){ut(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return lt(e,[{key:"toMutation",value:function(e,t){return new bm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function lE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw up()}}var fE=function(){function e(t,n,r,i,a,o){ut(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return lt(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return RE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(lE(this.sa)&&uE.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),hE=function(){function e(t,n,r){ut(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Uw(t)}return lt(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fE({sa:e,methodName:t,fa:n,path:Rp.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function dE(e){var t=e._freezeSettings(),n=Uw(e._databaseId);return new hE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);TE("Data must be an object, but it was:",o,r);var u,s,c=EE(r,o);if(a.merge)u=new gy(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=nt(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=CE(t,d,n);if(!o.contains(p))throw new fp(lp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));DE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new gy(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new sE(new ky(c),u,s)}var vE=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aE);function yE(e,t,n){return new fE({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var mE=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"_toFieldTransform",value:function(e){return new cm(e.path,new tm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(aE),gE=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e))._a=r,i}return lt(n,[{key:"_toFieldTransform",value:function(e){var t=yE(this,e,!0),n=this._a.map((function(e){return SE(e,t)})),r=new nm(n);return new cm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aE),kE=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e))._a=r,i}return lt(n,[{key:"_toFieldTransform",value:function(e){var t=yE(this,e,!0),n=this._a.map((function(e){return SE(e,t)})),r=new im(n);return new cm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aE),bE=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e)).wa=r,i}return lt(n,[{key:"_toFieldTransform",value:function(e){var t=new om(e.yt,Yy(e.yt,this.wa));return new cm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(aE);function wE(e,t,n,r){var i=e.da(1,t,n);TE("Data must be an object, but it was:",i,r);var a=[],o=ky.empty();sv(r,(function(e,r){var u=AE(t,e,n);r=Kt(r);var s=i.ca(u);if(r instanceof vE)a.push(u);else{var c=SE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new gy(a);return new cE(o,u,i.fieldTransforms)}function _E(e,t,n,r,i,a){var o=e.da(1,t,n),u=[CE(t,r,n)],s=[i];if(a.length%2!=0)throw new fp(lp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(CE(t,a[c])),s.push(a[c+1]);for(var l=[],f=ky.empty(),h=u.length-1;h>=0;--h)if(!DE(l,u[h])){var d=u[h],p=s[h];p=Kt(p);var v=o.ca(d);if(p instanceof vE)l.push(d);else{var y=SE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new gy(l);return new cE(f,m,o.fieldTransforms)}function xE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return SE(n,e.da(r?4:3,t))}function SE(e,t){if(IE(e=Kt(e)))return TE("Unsupported field value:",t,e),EE(e,t);if(e instanceof aE)return function(e,t){if(!lE(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=nt(e);try{for(a.s();!(n=a.n()).done;){var o=SE(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Kt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yy(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ip.fromDate(e);return{timestampValue:ig(t.yt,n)}}if(e instanceof Ip){var r=new Ip(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ig(t.yt,r)}}if(e instanceof oE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rE)return{bytesValue:ag(t.yt,e._byteString)};if(e instanceof vS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(sS(e)))}(e,t)}function EE(e,t){var n={};return cv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sv(e,(function(e,r){var i=SE(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function IE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ip||e instanceof oE||e instanceof rE||e instanceof vS||e instanceof aE)}function TE(e,t,n){if(!IE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=sS(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function CE(e,t,n){if((t=Kt(t))instanceof iE)return t._internalPath;if("string"==typeof t)return AE(e,t);throw RE("Field path arguments must be of type string or ",e,!1,void 0,n)}var NE=new RegExp("[~\\*/\\[\\]]");function AE(e,t,n){if(t.search(NE)>=0)throw RE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return dt(iE,ft(t.split(".")))._internalPath}catch(r){throw RE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function RE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new fp(lp.INVALID_ARGUMENT,u+e+s)}function DE(e,t){return e.some((function(e){return e.isEqual(t)}))}var OE=function(){function e(t,n,r,i,a){ut(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return lt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new vS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(LE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),PE=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"data",value:function(){return We(Ge(n.prototype),"data",this).call(this)}}]),n}(OE);function LE(e,t){return"string"==typeof t?AE(e,t):t instanceof iE?t._internalPath:t._delegate._internalPath}function ME(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fp(lp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var FE=lt((function e(){ut(this,e)})),UE=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n)}(FE);function VE(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof FE&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof BE})).length,n=e.filter((function(e){return e instanceof jE})).length;if(t>1||t>0&&n>0)throw new fp(lp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=nt(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var jE=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return lt(n,[{key:"_apply",value:function(e){var t=this._parse(e);return ZE(e._query,t),new yS(e.firestore,e.converter,Vy(e._query,t))}},{key:"_parse",value:function(e){var t=dE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){JE(o,a);var s,c=[],l=nt(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(XE(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=XE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||JE(o,a),u=xE(n,"where",o,"in"===a||"not-in"===a);return Hv.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(UE);var BE=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return lt(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Wv.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=nt(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;ZE(r,a),r=Vy(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new yS(e.firestore,e.converter,Vy(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(FE);var qE=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return lt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ly(t,n);return function(e,t){if(null===Py(e)){var n=Ly(e);null!==n&&eI(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new yS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ay(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(UE);var zE=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return lt(n,[{key:"_apply",value:function(e){return new yS(e.firestore,e.converter,jy(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(UE);var KE=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return lt(n,[{key:"_apply",value:function(e){var t=YE(e,this.type,this._docOrFields,this._inclusive);return new yS(e.firestore,e.converter,function(e,t){return new Ay(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(UE);function GE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KE._create("startAt",t,!0)}function HE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return KE._create("startAfter",t,!1)}var WE=function(e){$e(n,e);var t=Ze(n);function n(e,r,i){var a;return ut(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return lt(n,[{key:"_apply",value:function(e){var t=YE(e,this.type,this._docOrFields,this._inclusive);return new yS(e.firestore,e.converter,function(e,t){return new Ay(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(UE);function QE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WE._create("endBefore",t,!1)}function $E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WE._create("endAt",t,!0)}function YE(e,t,n,r){if(n[0]=Kt(n[0]),n[0]instanceof OE)return function(e,t,n,r,i){if(!r)throw new fp(lp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=nt(Fy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Av(t,r.key));else{var c=r.data.field(s.field);if(gv(c))throw new fp(lp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new qv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=dE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fp(lp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!My(e)&&-1!==c.indexOf("/"))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Np.fromString(c));if(!Dp.isDocumentKey(l))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Dp(l);u.push(Av(t,f))}else{var h=xE(n,r,c);u.push(h)}}return new qv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function XE(e,t,n){if("string"==typeof(n=Kt(n))){if(""===n)throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!My(t)&&-1!==n.indexOf("/"))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Np.fromString(n));if(!Dp.isDocumentKey(r))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Av(e,new Dp(r))}if(n instanceof vS)return Av(e,n._key);throw new fp(lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(sS(n),"."))}function JE(e,t){if(!Array.isArray(e)||0===e.length)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new fp(lp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ZE(e,t){if(t.isInequality()){var n=Ly(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Py(e);null!==i&&eI(e,r,i)}var a=function(e,t){var n,r=nt(e);try{for(r.s();!(n=r.n()).done;){var i,a=nt(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new fp(lp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fp(lp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function eI(e,t,n){if(!n.isEqual(t))throw new fp(lp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tI=function(){function e(){ut(this,e)}return lt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw up()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return sv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new oE(yv(e.latitude),yv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=kv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=vv(e);return new Ip(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Np.fromString(e);sp(Dg(n));var r=new ov(n.get(1),n.get(3)),i=new Dp(n.popFirst(5));return r.isEqual(t)||ip("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function nI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rI=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).firestore=e,r}return lt(n,[{key:"convertBytes",value:function(e){return new rE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new vS(this.firestore,null,t)}}]),n}(tI),iI=function(){function e(t,n){ut(this,e),this.hasPendingWrites=t,this.fromCache=n}return lt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),aI=function(e){$e(n,e);var t=Ze(n);function n(e,r,i,a,o,u){var s;return ut(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return lt(n,[{key:"exists",value:function(){return We(Ge(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new oI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(LE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(OE),oI=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return We(Ge(n.prototype),"data",this).call(this,e)}}]),n}(aI),uI=function(){function e(t,n,r,i){ut(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new iI(i.hasPendingWrites,i.fromCache),this.query=r}return lt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new oI(n._firestore,n._userDataWriter,r.key,r,new iI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fp(lp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new oI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new oI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function sI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return up()}}function cI(e,t){return e instanceof aI&&t instanceof aI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof uI&&t instanceof uI&&e._firestore===t._firestore&&wS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var lI=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).firestore=e,r}return lt(n,[{key:"convertBytes",value:function(e){return new rE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new vS(this.firestore,null,t)}}]),n}(tI);function fI(e){e=cS(e,vS);var t=cS(e.firestore,QS),n=$S(t),r=new lI(t);return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ot(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=cp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fp(lp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=P_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,FS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new aI(t,r,e._key,n,new iI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function hI(e){e=cS(e,yS);var t=cS(e.firestore,QS),n=$S(t),r=new lI(t);return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ot(rt().mark((function e(t,n,r){var i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dw(t,n,!0);case 3:i=e.sent,a=new ex(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=P_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,FS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new uI(t,r,e,n)}))}function dI(e,t,n){e=cS(e,vS);var r=cS(e.firestore,QS),i=nI(e.converter,t,n);return gI(r,[pE(dE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fm.none())])}function pI(e,t,n){e=cS(e,vS);for(var r=cS(e.firestore,QS),i=dE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return gI(r,[("string"==typeof(t=Kt(t))||t instanceof iE?_E(i,"updateDoc",e._key,t,n,o):wE(i,"updateDoc",e._key,t)).toMutation(e._key,fm.exists(!0))])}function vI(e){return gI(cS(e.firestore,QS),[new Im(e._key,fm.none())])}function yI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Kt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||HS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(HS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof vS)l=cS(e.firestore,QS),f=Dy(e._key.path),c={next:function(t){n[s]&&n[s](kI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=cS(e,yS);l=cS(p.firestore,QS),f=p._query;var v=new lI(l);c={next:function(e){n[s]&&n[s](new uI(l,v,p,e))},error:n[s+1],complete:n[s+2]},ME(e._query)}return function(e,t,n,r){var i=new xS(r),a=new W_(t,i,n);return e.asyncQueue.enqueueAndForget(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=j_,t.next=3,BS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=q_,t.next=3,BS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($S(l),f,h,c)}function mI(e,t){return function(e,t){var n=new xS(t);return e.asyncQueue.enqueueAndForget(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cp(e).Ru.add(t),t.next()},t.next=3,BS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(ot(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){cp(e).Ru.delete(t)},t.next=3,BS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($S(e=cS(e,QS)),HS(t)?t:{next:t})}function gI(e,t){return function(e,t){var n=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=lx,r.next=3,VS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}($S(e),t)}function kI(e,t,n){var r=n.docs.get(t._key),i=new lI(e);return new aI(e,i,t._key,r,new iI(n.hasPendingWrites,n.fromCache),t.converter)}var bI={maxAttempts:5},wI=function(){function e(t,n){ut(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dE(t)}return lt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=_I(e,this._firestore),i=nI(r.converter,t,n),a=pE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,fm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=_I(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Kt(t))||t instanceof iE?_E(this._dataReader,"WriteBatch.update",i._key,t,n,o):wE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,fm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=_I(e,this._firestore);return this._mutations=this._mutations.concat(new Im(t._key,fm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fp(lp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function _I(e,t){if((e=Kt(e)).firestore!==t)throw new fp(lp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var xI=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,r))._firestore=e,i}return lt(n,[{key:"get",value:function(e){var t=this,r=_I(e,this._firestore),i=new lI(this._firestore);return We(Ge(n.prototype),"get",this).call(this,e).then((function(e){return new aI(t._firestore,i,r._key,e._document,new iI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ut(this,e),this._firestore=t,this._transaction=n,this._dataReader=dE(t)}return lt(e,[{key:"get",value:function(e){var t=this,n=_I(e,this._firestore),r=new rI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return up();var i=e[0];if(i.isFoundDocument())return new OE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new OE(t._firestore,r,n._key,null,n.converter);throw up()}))}},{key:"set",value:function(e,t,n){var r=_I(e,this._firestore),i=nI(r.converter,t,n),a=pE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=_I(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Kt(t))||t instanceof iE?_E(this._dataReader,"Transaction.update",i._key,t,n,o):wE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=_I(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function SI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gE("arrayUnion",t)}function EI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ep=e}(Bn),Pn(new Gt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new QS(new yp(e.getProvider("auth-internal")),new bp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fp(lp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ov(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Wn(Jd,"3.8.0",e),Wn(Jd,"3.8.0","esm2017")}();function II(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function TI(){if("undefined"===typeof Uint8Array)throw new fp("unimplemented","Uint8Arrays are not available in this environment.")}function CI(){if("undefined"==typeof atob)throw new fp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var NI=function(){function e(t){ut(this,e),this._delegate=t}return lt(e,[{key:"toBase64",value:function(){return CI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return TI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return CI(),new e(rE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return TI(),new e(rE.fromUint8Array(t))}}]),e}();function AI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=nt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var RI=function(){function e(){ut(this,e)}return lt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){nE(e=cS(e,QS));var n=$S(e),r=e._freezeSettings(),i=new rS;return XS(n,i,new tS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){nE(e=cS(e,QS));var t=$S(e),n=e._freezeSettings(),r=new rS;return XS(t,r,new nS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fp(lp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hp;return e._queue.enqueueAndForgetEvenWhileRestricted(ot(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ot(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qp.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Qp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Jb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),DI=function(){function e(t,n,r){var i=this;ut(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ov||(this._appCompat=t)}return lt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ap("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return JS(this._delegate)}},{key:"disableNetwork",value:function(){return ZS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&aS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=wx,n.next=3,VS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}($S(e=cS(e,QS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return mI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new HI(this,gS(this._delegate,e))}catch(t){throw UI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new FI(this,kS(this._delegate,e))}catch(t){throw UI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zI(this,function(e,t){if(e=cS(e,dS),iS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fp(lp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yS(e,null,function(e){return new Ay(Np.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw UI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=cS(e,QS);var r=Object.assign(Object.assign({},bI),n);return function(e){if(e.maxAttempts<1)throw new fp(lp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hp;return e.asyncQueue.enqueueAndForget(ot(rt().mark((function i(){var a;return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,jS(e);case 2:a=i.sent,new IS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}($S(e),(function(n){return t(new xI(e,n))}),r)}(this._delegate,(function(n){return e(new PI(t,n))}))}},{key:"batch",value:function(){var e=this;return $S(this._delegate),new LI(new wI(this._delegate,(function(t){return gI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return eE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return tE(this._delegate,e).then((function(e){return e?new zI(t,e):null}))}}]),e}(),OI=function(e){$e(n,e);var t=Ze(n);function n(e){var r;return ut(this,n),(r=t.call(this)).firestore=e,r}return lt(n,[{key:"convertBytes",value:function(e){return new NI(new rE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return FI.forKey(t,this.firestore,null)}}]),n}(tI);var PI=function(){function e(t,n){ut(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new OI(t)}return lt(e,[{key:"get",value:function(e){var t=this,n=WI(e);return this._delegate.get(n).then((function(e){return new BI(t._firestore,new aI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=WI(e);return n?(II("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WI(e);return this._delegate.delete(t),this}}]),e}(),LI=function(){function e(t){ut(this,e),this._delegate=t}return lt(e,[{key:"set",value:function(e,t,n){var r=WI(e);return n?(II("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=WI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),MI=function(){function e(t,n,r){ut(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return lt(e,[{key:"fromFirestore",value:function(e,t){var n=new oI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new OI(t),n),i.set(n,a)),a}}]),e}();MI.INSTANCES=new WeakMap;var FI=function(){function e(t,n){ut(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new OI(t)}return lt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new HI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new HI(this.firestore,gS(this._delegate,e))}catch(t){throw UI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Kt(e))instanceof vS&&bS(this._delegate,e)}},{key:"set",value:function(e,t){t=II("DocumentReference.set",t);try{return t?dI(this._delegate,e,t):dI(this._delegate,e)}catch(n){throw UI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?pI(this._delegate,e):pI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw UI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return vI(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VI(n),a=jI(n,(function(t){return new BI(e.firestore,new aI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return yI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?fI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cS(e,vS);var t=cS(e.firestore,QS);return zS($S(t),e._key,{source:"server"}).then((function(n){return kI(t,e,n)}))}(this._delegate):function(e){e=cS(e,vS);var t=cS(e.firestore,QS);return zS($S(t),e._key).then((function(n){return kI(t,e,n)}))}(this._delegate),t.then((function(e){return new BI(n.firestore,new aI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(MI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new vS(n._delegate,r,new Dp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new vS(n._delegate,r,t))}}]),e}();function UI(e,t,n){return e.message=e.message.replace(t,n),e}function VI(e){var t,n=nt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!AI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function jI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=AI(e[0])?e[0]:AI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var BI=function(){function e(t,n){ut(this,e),this._firestore=t,this._delegate=n}return lt(e,[{key:"ref",get:function(){return new FI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return cI(this._delegate,e._delegate)}}]),e}(),qI=function(e){$e(n,e);var t=Ze(n);function n(){return ut(this,n),t.apply(this,arguments)}return lt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||up()}(void 0!==t),t}}]),n}(BI),zI=function(){function e(t,n){ut(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new OI(t)}return lt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,VE(this._delegate,function(e,t,n){var r=t,i=LE("where",e);return jE._create(i,r,n)}(t,n,r)))}catch(i){throw UI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,VE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=LE("orderBy",e);return qE._create(r,n)}(t,n)))}catch(r){throw UI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,VE(this._delegate,function(e){return lS("limit",e),zE._create("limit",e,"F")}(t)))}catch(n){throw UI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,VE(this._delegate,function(e){return lS("limitToLast",e),zE._create("limitToLast",e,"L")}(t)))}catch(n){throw UI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,VE(this._delegate,GE.apply(void 0,arguments)))}catch(t){throw UI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,VE(this._delegate,HE.apply(void 0,arguments)))}catch(t){throw UI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,VE(this._delegate,QE.apply(void 0,arguments)))}catch(t){throw UI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,VE(this._delegate,$E.apply(void 0,arguments)))}catch(t){throw UI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return wS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?hI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cS(e,yS);var t=cS(e.firestore,QS),n=$S(t),r=new lI(t);return KS(n,e._query,{source:"server"}).then((function(n){return new uI(t,r,e,n)}))}(this._delegate):function(e){e=cS(e,yS);var t=cS(e.firestore,QS),n=$S(t),r=new lI(t);return ME(e._query),KS(n,e._query).then((function(n){return new uI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new GI(n.firestore,new uI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VI(n),a=jI(n,(function(t){return new GI(e.firestore,new uI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return yI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(MI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),KI=function(){function e(t,n){ut(this,e),this._firestore=t,this._delegate=n}return lt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new qI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),GI=function(){function e(t,n){ut(this,e),this._firestore=t,this._delegate=n}return lt(e,[{key:"query",get:function(){return new zI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new qI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new KI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new qI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return cI(this._delegate,e._delegate)}}]),e}(),HI=function(e){$e(n,e);var t=Ze(n);function n(e,r){var i;return ut(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return lt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new FI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new FI(this.firestore,void 0===e?kS(this._delegate):kS(this._delegate,e))}catch(t){throw UI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=cS(e.firestore,QS),r=kS(e),i=nI(e.converter,t);return gI(n,[pE(dE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new FI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return bS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(MI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zI);function WI(e){return cS(e,vS)}var QI,$I=function(){function e(){ut(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=dt(iE,n)}return lt(e,[{key:"isEqual",value:function(e){return(e=Kt(e))instanceof iE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Rp.keyField().canonicalString())}}]),e}(),YI=function(){function e(t){ut(this,e),this._delegate=t}return lt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new mE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new vE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=SI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=EI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new bE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),XI={Firestore:DI,GeoPoint:oE,Timestamp:Ip,Blob:NI,Transaction:PI,WriteBatch:LI,DocumentReference:FI,DocumentSnapshot:BI,Query:zI,QueryDocumentSnapshot:qI,QuerySnapshot:GI,CollectionReference:HI,FieldPath:$I,FieldValue:YI,setLogLevel:function(e){!function(e){tp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Gt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},XI)))})(QI=Yu,(function(e,t){return new DI(e,t,new RI)})),QI.registerVersion("@firebase/firestore-compat","0.3.0");Yu.initializeApp({apiKey:"AIzaSyDkR1Q5lfBtlwNRMxBC6iDx0e_JiXRxtEo",authDomain:"fotoalbom-1fd85.firebaseapp.com",projectId:"fotoalbom-1fd85",storageBucket:"fotoalbom-1fd85.appspot.com",messagingSenderId:"1066284231517",appId:"1:1066284231517:web:ed6c008bb3268bd4a796b4"});var JI=Yu.storage(),ZI=Yu.firestore(),eT=Yu.firestore.FieldValue.serverTimestamp,tT=function(e){var n=it((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=ZI.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(an(an({},e.data()),{},{id:e.id}))})),i(t)}));return function(){t()}}),[e]),{docs:r}},nT="TablePhotos_picture__IKyiT",rT="TablePhotos_deleteButton__lux5B",iT=function(){var e=ot(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vI(kS(ZI,"images","".concat(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aT=function(e){var t=ZI.collection("images"),n=eT();t.add({url:e,createdAt:n})},oT=function(e){var t=e.cards,n=S(),r=function(){var e=ot(rt().mark((function e(n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:iT(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Mu.jsxs)("div",{style:{position:"relative"},children:[(0,Mu.jsx)("div",{style:{backgroundImage:"url(".concat(t.url,")")},className:nT,onClick:function(){n({type:Su,payload:t}),n({type:xu,payload:!0})}}),(0,Mu.jsx)("div",{className:rT,onClick:r})]})};var uT="Modal_modal__DJDMv",sT="Modal_modalCloseButton__Hazzk",cT="ModalOverlay_ModalOverlay__bubMx",lT="ModalOverlay_active__ZKYQ4",fT=function(e){var t=e.modalVisible,n=e.children,r=S(),i=v((function(e){return e.app})).isFileLoading,a=[cT];t&&a.push(lT);return(0,Mu.jsx)("div",{className:a.join(" "),onClick:function(){i||r(Du())},children:n})},hT=["modalVisible"],dT=document.getElementById("modals"),pT=function(e){var n=e.modalVisible,r=function(e,t){if(null==e)return{};var n,r,i=oe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,hT),i=S(),a=v((function(e){return e.app})).isFileLoading;(0,t.useEffect)((function(){function e(e){"Escape"!==e.key||a||i(Du())}if(n)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n,a]);return o.createPortal((0,Mu.jsx)(fT,{modalVisible:n,children:(0,Mu.jsxs)("div",{className:uT,onClick:function(e){e.stopPropagation()},children:[r.children,(0,Mu.jsx)("button",{className:sT,disabled:a&&!0,onClick:function(){i(Du())}})]})}),dT)},vT=function(e){var n=it((0,t.useState)(0),2),r=n[0],i=n[1],a=it((0,t.useState)(null),2),o=a[0],u=a[1],s=it((0,t.useState)(null),2),c=s[0],l=s[1];return(0,t.useEffect)((function(){var t=JI.ref(e.name),n=t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){u(e)}),ot(rt().mark((function e(){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,l(n),aT(n);case 5:case"end":return e.stop()}}),e)}))));return function(){n()}}),[e]),{progress:r,error:o,url:c}},yT="ProgressBar_progressLine__ocFuI",mT="ProgressBar_progressLineContainer__q3VUH",gT="ProgressBar_percent__91Pvd",kT="ProgressBar_percent_begin__2+WHF",bT="Loader_loader__+lRPl",wT=function(){return(0,Mu.jsx)("div",{className:bT})},_T="SET_FILE",xT="SET_FILE_UPLOAD_ERROR",ST="SET_IS_UPLOAD_FILE",ET=function(){var e=S(),n=v((function(e){return e.addCardModal})).file,r=vT(n),i=r.progress,a=r.url;return(0,t.useEffect)((function(){a?(e({type:_T,payload:null}),e({type:ST,payload:!1}),e(Du()),e({type:Eu,payload:!1})):e({type:Eu,payload:!0})}),[e,a]),(0,Mu.jsx)("div",{className:mT,children:(0,Mu.jsx)("div",{className:yT,style:{width:i+"%"},children:(0,Mu.jsxs)("span",{className:i>8?gT:"".concat(gT," ").concat(kT),children:[(0,Mu.jsx)(wT,{}),Math.floor(i),"%"]})})})},IT="AddCardModal_form__XY9Mv",TT="AddCardModal_input__s++xW",CT="AddCardModal_formText__p6t21",NT="AddCardModal_errorText__ijyRJ",AT="AddCardModal_uploadFileButton__TZ4dD",RT="AddCardModal_uploadFileButton_disabled__oihpP",DT="AddCardModal_inputArea__AYzyn",OT="AddCardModal_unSelectFileButton__jJDuK",PT="AddCardModal_text__YI4Qp",LT="AddCardByLink_form__174jA",MT="AddCardByLink_input__Fi3wQ",FT="AddCardByLink_button__tX3eO",UT="AddCardByLink_button_disabled__xwNVA",VT="AddCardByLink_error__3BwGe",jT="SET_ADD_CARD_BY_LINK_VALUE",BT="SET_ADD_CARD_BY_LINK_ERROR",qT=function(){var e=S(),n=v((function(e){return e.addCardByLink})),r=n.value,i=n.error,a=/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png)/;(0,t.useEffect)((function(){a.test(r)||0===r.length?e({type:BT,payload:""}):e({type:BT,payload:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 .jpeg \u0438\u043b\u0438 .png"})}),[r]);return(0,Mu.jsxs)("form",{className:LT,children:[(0,Mu.jsx)("input",{className:MT,type:"text",value:r,onChange:function(t){e({type:jT,payload:t.target.value})},placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 c\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),i&&(0,Mu.jsx)("span",{className:VT,children:i}),(0,Mu.jsx)("button",{disabled:0!==i.length||0===r.length,onClick:function(t){t.preventDefault(),aT(r),e(Du()),e({type:jT,payload:""})},className:0!==i.length||0===r.length?"".concat(FT," ").concat(UT):FT,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},zT=function(){var e=S(),n=v((function(e){return e.addCardModal})),r=n.file,i=n.fileUploadError,a=n.isUploadFile,o=(0,t.useRef)(null),u=["image/png","image/jpeg"];return(0,Mu.jsxs)(Mu.Fragment,{children:[(0,Mu.jsxs)("form",{className:IT,children:[(0,Mu.jsxs)("label",{className:DT,children:[(0,Mu.jsx)("input",{className:TT,type:"file",onChange:function(t){var n=t.target.files[0];n&&u.includes(n.type)?(e({type:_T,payload:n}),e({type:xT,payload:""})):(e({type:_T,payload:null}),e({type:xT,payload:'\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 "png" \u0438 "jpeg"'}))},ref:o}),r&&(0,Mu.jsxs)(Mu.Fragment,{children:[(0,Mu.jsx)("p",{className:CT,children:r.name}),(0,Mu.jsx)("button",{onClick:function(t){t.preventDefault(),o.current.value="",e({type:_T,payload:null})},className:OT})]}),i&&(0,Mu.jsx)("p",{className:"".concat(CT," ").concat(NT),children:i})]}),(0,Mu.jsx)("button",{disabled:!(!i&&r),className:i||!r?"".concat(AT," ").concat(RT):AT,onClick:function(t){t.preventDefault(),e({type:ST,payload:!0}),o.current.value=""},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),r&&a&&(0,Mu.jsx)(ET,{})]}),(0,Mu.jsx)("p",{className:PT,children:"\u0418\u043b\u0438"}),(0,Mu.jsx)(qT,{})]})},KT="FullSizeImg_picture__ojXd-",GT=function(){var e=v((function(e){return e.app})).selectedFoto;return e?(0,Mu.jsx)("img",{src:e.url,alt:"",className:KT}):null},HT=function(){var e=S(),t=v((function(e){return e.app})),n=t.modalVisible,r=t.modalImgVisible,i=tT("images").docs;return(0,Mu.jsxs)(Mu.Fragment,{children:[(0,Mu.jsxs)("div",{className:ju,children:[(0,Mu.jsx)("h2",{className:Bu,children:"\u0422\u0432\u043e\u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438"}),(0,Mu.jsx)("p",{className:qu,children:"\u041d\u0435\u0442 \u043d\u0438\u043a\u043e\u0433\u043e, \u043a\u0442\u043e \u0432\u043e\u0437\u043b\u044e\u0431\u0438\u043b \u0431\u044b, \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0435\u043b \u0438 \u0432\u043e\u0437\u0436\u0430\u0436\u0434\u0430\u043b \u0431\u044b \u0441\u0430\u043c\u043e \u0441\u0442\u0440\u0430\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u0442\u043e, \u0447\u0442\u043e \u044d\u0442\u043e \u0441\u0442\u0440\u0430\u0434\u0430\u043d\u0438\u0435"}),(0,Mu.jsx)("button",{className:zu,onClick:function(){e({type:_u,payload:!0})}})]}),(0,Mu.jsx)("div",{className:Vu,children:i&&i.map((function(e,t){return(0,Mu.jsx)(oT,{cards:e},e.id)}))}),(0,Mu.jsx)(pT,{modalVisible:n,children:(0,Mu.jsx)(zT,{})}),(0,Mu.jsx)(pT,{modalVisible:r,children:(0,Mu.jsx)(GT,{})})]})},WT="Auth_form_container__3EYoo",QT="Auth_form__UlHVT",$T="Auth_title__xzSKM",YT="Auth_input_text__Sc913",XT="Auth_input_submit__yKRTu",JT="Auth_input_submit_disabled__MaAPR",ZT="Auth_error_text__9D27Q",eC="Auth_error_text_type_submit__M+eYp",tC="Auth_input_container__tKrlp";var nC=function(e){var n=e.title,r=e.buttonTitle,i=e.handleClick,a=v((function(e){return e.auth})),o=a.values,u=a.errors,s=a.valid,c=function(){var e=S(),n=v((function(e){return e.auth})),r=n.values,i=n.errors,a=n.valid,o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,u=function(t,n){function r(){e({type:ku,payload:an(an({},i),{},ht({},t,""))})}switch(t){case"name":return n.length<2?(e({type:ku,payload:an(an({},i),{},ht({},t,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 2-\u0443\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"))}),!1):(r(),!0);case"email":return o.test(String(n))?(r(),!0):(e({type:ku,payload:an(an({},i),{},ht({},t,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"))}),!1);case"password":return n.length<6||n.length>20?(e({type:ku,payload:an(an({},i),{},ht({},t,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0442 6 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"))}),!1):(r(),!0)}},s=(0,t.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",email:"",password:"",code:""},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{name:!1,email:!1,password:!1};e({type:ku,payload:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",email:"",password:"",submit:""}}),e({type:gu,payload:t}),e({type:bu,payload:n})}),[e]);return{handleChange:function(t){var n=t.target,i=n.name,o=n.value;e({type:gu,payload:an(an({},r),{},ht({},i,o))}),e({type:bu,payload:an(an({},a),{},ht({},i,u(i,o)))})},resetForm:s}}(),l=c.handleChange,f=c.resetForm;return(0,t.useEffect)((function(){f()}),[]),(0,Mu.jsxs)("div",{className:WT,children:[(0,Mu.jsx)("h1",{className:$T,children:n}),(0,Mu.jsxs)("form",{className:QT,onSubmit:i,children:[(0,Mu.jsxs)("div",{className:tC,children:[(0,Mu.jsx)("input",{type:"email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:l,value:o.email||"",className:YT}),0!==o.email.length&&(0,Mu.jsx)("span",{className:ZT,children:u.email})]}),(0,Mu.jsxs)("div",{className:tC,children:[(0,Mu.jsx)("input",{type:"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:l,value:o.password||"",className:YT}),0!==o.password.length&&(0,Mu.jsx)("span",{className:ZT,children:u.password})]}),(0,Mu.jsxs)("div",{className:tC,children:[(0,Mu.jsx)("input",{type:"submit",disabled:!s.email||!s.password,value:r,className:s.email&&s.password?"".concat(XT):"".concat(XT," ").concat(JT)}),(0,Mu.jsx)("span",{className:"".concat(ZT," ").concat(eC),children:u.submit})]})]})]})},rC="LOGIN",iC="LOGIN_FAILED",aC="LOGIN_SUCCESS";function oC(e){e({type:iC}),e({type:ku,payload:{email:"",password:"",submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!"}})}var uC=function(e,t){return function(n){n({type:rC}),function(e,t,n){return Ea(Kt(e),oa.credential(t,n))}(mu(),e,t).then((function(e){var t=e.user;t&&t.accessToken?n({type:aC,payload:t}):oC(n)})).catch((function(e){oC(n)}))}},sC=function(){var e=S(),t=v((function(e){return e.auth})),n=t.values,r=t.auth;console.log(r);return r?(0,Mu.jsx)(ke,{to:"/foto-albom/"}):(0,Mu.jsx)(nC,{title:"\u0412\u0445\u043e\u0434",buttonTitle:"\u0412\u043e\u0439\u0442\u0438",handleClick:function(t){t.preventDefault(),e(uC(n.email,n.password))}})},cC="REGISTER",lC="REGISTER_FAILED",fC="REGISTER_SUCCESS";function hC(e){e({type:lC}),e({type:ku,payload:{email:"",password:"",submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438!"}})}var dC=function(e,t){return function(n){n({type:cC}),function(e,t,n){return Ta.apply(this,arguments)}(mu(),e,t).then((function(e){var t=e.user;t&&t.accessToken?n({type:fC,payload:t}):hC(n)})).catch((function(e){hC(n)}))}},pC=function(){var e=S(),t=v((function(e){return e.auth})),n=t.values;return t.auth?(0,Mu.jsx)(ke,{to:"/foto-albom/"}):(0,Mu.jsx)(nC,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonTitle:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",handleClick:function(t){t.preventDefault(),e(dC(n.email,n.password))}})},vC=function(){var e=v((function(e){return e.user})).getUserRequest;return(0,Mu.jsx)("main",{className:Uu.table,children:(0,Mu.jsxs)(Ne,{children:[(0,Mu.jsx)(xe,{path:"/foto-albom",exact:!0,children:(0,Mu.jsx)(HT,{})}),(0,Mu.jsx)(xe,{path:"/foto-albom/login",exact:!0,children:!e&&(0,Mu.jsx)(sC,{})}),(0,Mu.jsx)(xe,{path:"/foto-albom/register",exact:!0,children:!e&&(0,Mu.jsx)(pC,{})})]})})};var yC=function(){var e=S(),n=v((function(e){return e.auth})).auth,r=v((function(e){return e.user})).currentUser;return(0,t.useEffect)((function(){r&&e({type:wu,payload:!0})}),[r,e]),(0,t.useEffect)((function(){e(Ou())}),[n,e]),(0,Mu.jsx)(Ae,{children:(0,Mu.jsxs)("div",{style:{padding:"0 30px 20px 30px"},children:[(0,Mu.jsx)(Fu,{}),(0,Mu.jsx)(vC,{})]})})},mC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function gC(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var kC="function"===typeof Symbol&&Symbol.observable||"@@observable",bC=function(){return Math.random().toString(36).substring(7).split("").join(".")},wC={INIT:"@@redux/INIT"+bC(),REPLACE:"@@redux/REPLACE"+bC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bC()}};function _C(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xC(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(gC(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(gC(1));return n(xC)(e,t)}if("function"!==typeof e)throw new Error(gC(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(gC(3));return a}function f(e){if("function"!==typeof e)throw new Error(gC(4));if(s)throw new Error(gC(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(gC(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!_C(e))throw new Error(gC(7));if("undefined"===typeof e.type)throw new Error(gC(8));if(s)throw new Error(gC(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(gC(10));i=e,h({type:wC.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(gC(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[kC]=function(){return this},e}return h({type:wC.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[kC]=p,r}function SC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function EC(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var IC=EC();IC.withExtraArgument=EC;var TC=IC,CC={modalVisible:!1,modalImgVisible:!1,selectedFoto:null,isFileLoading:!1},NC={getUserRequest:!1,getUserFailed:!1,currentUser:null},AC={logoutRequest:!1,logoutFailed:!1},RC={value:"",error:""},DC={file:null,fileUploadError:null,isUploadFile:!1},OC={auth:!1,values:{email:"",password:""},errors:{email:"",password:"",submit:""},valid:{email:!1,password:!1}},PC={registerRequest:!1,registerFailed:!1,data:{}},LC={loginRequest:!1,loginFailed:!1,user:{}},MC=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:wC.INIT}))throw new Error(gC(12));if("undefined"===typeof n(void 0,{type:wC.PROBE_UNKNOWN_ACTION()}))throw new Error(gC(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(gC(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _u:return an(an({},e),{},{modalVisible:t.payload});case xu:return an(an({},e),{},{modalImgVisible:t.payload});case Su:return an(an({},e),{},{selectedFoto:t.payload});case Eu:return an(an({},e),{},{isFileLoading:t.payload});default:return e}},addCardByLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jT:return an(an({},e),{},{value:t.payload});case BT:return an(an({},e),{},{error:t.payload});default:return e}},addCardModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _T:return an(an({},e),{},{file:t.payload});case xT:return an(an({},e),{},{fileUploadError:t.payload});case ST:return an(an({},e),{},{isUploadFile:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wu:return an(an({},e),{},{auth:t.payload});case gu:return an(an({},e),{},{values:t.payload});case ku:return an(an({},e),{},{errors:t.payload});case bu:return an(an({},e),{},{valid:t.payload});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cC:return an(an({},e),{},{registerRequest:!0,registerFailed:!1});case fC:return an(an({},e),{},{registerRequest:!1,data:t.payload});case lC:return an(an({},e),{},{registerFailed:!0,registerRequest:!1});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rC:return an(an({},e),{},{loginRequest:!0,loginFailed:!1});case aC:return an(an({},e),{},{loginRequest:!1,user:t.payload});case iC:return an(an({},e),{},{loginFailed:!0,loginRequest:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Iu:return an(an({},e),{},{getUserRequest:!0,getUserFailed:!1});case Cu:return an(an({},e),{},{getUserRequest:!1,currentUser:t.payload});case Tu:return an(an({},e),{},{getUserFailed:!0,getUserRequest:!1});default:return e}},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nu:return an(an({},e),{},{logoutRequest:!0,logoutFailed:!1});case Ru:return an(an({},e),{},{logoutRequest:!1});case Au:return an(an({},e),{},{logoutFailed:!0,logoutRequest:!1});default:return e}}}),FC=("object"===typeof window&&window.window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):SC)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(gC(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=SC.apply(void 0,a)(n.dispatch),an(an({},n),{},{dispatch:r})}}}(TC)),UC=xC(MC,FC);r.createRoot(document.getElementById("root")).render((0,Mu.jsx)(t.StrictMode,{children:(0,Mu.jsx)(k,{store:UC,children:(0,Mu.jsx)(yC,{})})})),mC()}()}();
//# sourceMappingURL=main.c5f84f90.js.map