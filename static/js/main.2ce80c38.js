/*! For license information please see main.2ce80c38.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,It=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=$t(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function $n(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Kn(t,Wn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Pr=Rr[Or];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Gn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&jn(e,t)?(e=en(),Zt=Jt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ci)}function Pi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ii(Ci,e)):Si(Ni),Ii(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,qi),i}finally{kt=t,ji=!1}}return null}var zi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,$i=null,Xi=1,Yi="";function Ji(e,t){zi[Gi++]=Hi,zi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=Yi,Wi[Qi++]=$i,$i=e;var r=Xi;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Xi=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Gi],zi[Gi]=null,Hi=zi[--Gi],zi[Gi]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=$a(!0),Ya=$a(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Yo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Yo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ou,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=Yi,Wi[Qi++]=$i,Xi=e.id,Yi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Ye()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ec(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Ju=s):_s(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,$u=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var xs,Es=Math.ceil,Ss=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ds=0,Os=Ei(0),Ps=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,Bs=0,qs=1/0,zs=null,Gs=!1,Ks=null,Hs=null,Ws=!1,Qs=null,$s=0,Xs=0,Ys=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Ye():-1!==Js?Js:Js=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,Ys=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Ps&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Ye()+500,Vi&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(zs=null,qs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,zs),t);break}wc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,zs),r);break}wc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,zs),rc(e,Ye()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Ye()+500,Vi&&qi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&qi()}}function fc(){Ds=Os.current,Si(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Oc(e.current,null),Rs=Ds=t,Ps=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ps=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(zs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ps}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=xs(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Is.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ps=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ps&&(Ps=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Is.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ks,Ks=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Ys?Xs++:(Xs=0,Ys=e):Xs=0,qi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ps||3===Ps&&(130023424&Rs)===Rs&&500>Ye()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Gc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cs)&&(qs=Ye()+500,qi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,E=n[2]||l,S=m||g;r.push({name:y||a++,prefix:v||"",delimiter:E,optional:x,repeat:_,partial:w,asterisk:!!b,pattern:S?c(S):b?".*":"[^"+s(E)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){m(A,0)};function O(e){S=e,E||(E=!0,x())}function P(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".aecba129.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="foto-albom:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfoto_albom=self.webpackChunkfoto_albom||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Lt},SDK_VERSION:function(){return Kn},_DEFAULT_ENTRY_NAME:function(){return Dn},_addComponent:function(){return Mn},_addOrOverwriteComponent:function(){return Fn},_apps:function(){return Pn},_clearComponents:function(){return Bn},_components:function(){return Ln},_getProvider:function(){return Vn},_registerComponent:function(){return Un},_removeServiceInstance:function(){return jn},deleteApp:function(){return $n},getApp:function(){return Wn},getApps:function(){return Qn},initializeApp:function(){return Hn},onLog:function(){return Jn},registerVersion:function(){return Yn},setLogLevel:function(){return Zn}});var t=n(791),r=n(250),i=n(248),a=n(327),o=n(164);var u=function(e){e()},s=function(){return u},c=(0,t.createContext)(null);function l(){return(0,t.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=h(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var v=p();n(110),n(900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var k=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=m(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);g((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||c;return t.createElement(s.Provider,{value:o},i)};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(){return n().store}}var w=b();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?w:b(e);return function(){return t().dispatch}}var x,E=_();function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,S(e,t)}!function(e){h=e}(a.useSyncExternalStoreWithSelector),function(e){e}(i.useSyncExternalStore),x=o.unstable_batchedUpdates,u=x;var T=n(7),C=n.n(T);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function A(e){return"/"===e.charAt(0)}function R(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var D=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&A(e),o=t&&A(t),u=a||o;if(e&&A(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?R(i,l):".."===f?(R(i,l),c++):c&&(R(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&A(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function O(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var P=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=O(t),i=O(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},L="Invariant failed";function M(e,t){if(!e)throw new Error(L)}function F(e){return"/"===e.charAt(0)?e:"/"+e}function U(e){return"/"===e.charAt(0)?e.substr(1):e}function V(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function j(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function B(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function q(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=N({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=D(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function z(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var G=!("undefined"===typeof window||!window.document||!window.document.createElement);function K(e,t){t(window.confirm(e))}var H="popstate",W="hashchange";function Q(){try{return window.history.state||{}}catch(e){return{}}}function $(e){void 0===e&&(e={}),G||M(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?K:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?j(F(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&(a=V(a,f)),q(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=z();function v(e){N(T,e),T.length=t.length,p.notifyListeners(T.location,T.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||k(h(e.state))}function m(){k(h(Q()))}var g=!1;function k(e){if(g)g=!1,v();else{p.confirmTransitionTo(e,"POP",s,(function(t){t?v({action:"POP",location:e}):function(e){var t=T.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(g=!0,x(i))}(e)}))}}var b=h(Q()),w=[b.key];function _(e){return f+B(e)}function x(e){t.go(e)}var E=0;function S(e){1===(E+=e)&&1===e?(window.addEventListener(H,y),r&&window.addEventListener(W,m)):0===E&&(window.removeEventListener(H,y),r&&window.removeEventListener(W,m))}var I=!1;var T={length:t.length,action:"POP",location:b,createHref:_,push:function(e,r){var i="PUSH",a=q(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=w.indexOf(T.location.key),l=w.slice(0,c+1);l.push(a.key),w=l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=q(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=w.indexOf(T.location.key);-1!==c&&(w[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return I||(S(1),I=!0),function(){return I&&(I=!1,S(-1)),t()}},listen:function(e){var t=p.appendListener(e);return S(1),function(){S(-1),t()}}};return T}var X="hashchange",Y={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+U(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:U,decodePath:F},slash:{encodePath:F,decodePath:F}};function J(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Z(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function ee(e){window.location.replace(J(window.location.href)+"#"+e)}function te(e){void 0===e&&{},G||M(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?K:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?j(F(e.basename)):"",s=Y[o],c=s.encodePath,l=s.decodePath;function f(){var e=l(Z());return u&&V(e,u),q(e)}var h=z();function d(e){N(S,e),S.length=t.length,h.notifyListeners(S.location,S.action)}var p=!1,v=null;function y(){var e=Z(),t=c(e);if(e!==t)ee(t);else{var n=f(),r=S.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(v===B(n))return;null,function(e){if(p)!1,d();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=S.location,n=b.lastIndexOf(B(t));-1===n&&0;var r=b.lastIndexOf(B(e));-1===r&&0;var i=n-r;i&&(!0,w(i))}(e)}))}}(n)}}var m=Z(),g=c(m);m!==g&&ee(g);var k=f(),b=[B(k)];function w(e){t.go(e)}var _=0;function x(e){1===(_+=e)&&1===e?window.addEventListener(X,y):0===_&&window.removeEventListener(X,y)}var E=!1;var S={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&J(window.location.href),n+"#"+c(u+B(e))},push:function(e,t){var n="PUSH",r=q(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=B(r),i=c(u+t);if(Z()!==i){t,function(e){window.location.hash=e}(i);var a=b.lastIndexOf(B(S.location)),o=b.slice(0,a+1);o.push(t),o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=q(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=B(r),i=c(u+t);Z()!==i&&(t,ee(i));var a=b.indexOf(B(S.location));-1!==a&&(b[a]=t),d({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&!1;var t=h.setPrompt(e);return E||(x(1),!0),function(){return E&&(!1,x(-1)),t()}},listen:function(e){var t=h.appendListener(e);return x(1),function(){x(-1),t()}}};return S}function ne(e,t,n){return Math.min(Math.max(e,t),n)}function re(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=z();function l(e){N(y,e),y.length=y.entries.length,c.notifyListeners(y.location,y.action)}function f(){return Math.random().toString(36).substr(2,s)}var h=ne(o,0,i.length-1),d=i.map((function(e){return q(e,void 0,"string"===typeof e?f():e.key||f())})),p=B;function v(e){var t=ne(y.index+e,0,y.entries.length-1),r=y.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var y={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,t){var r="PUSH",i=q(e,t,f(),y.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=q(e,t,f(),y.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,l({action:r,location:i}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return y}var ie=n(239),ae=n.n(ie);n(228);function oe(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ue=1073741823,se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function ce(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var le=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return se[e]=(se[e]||0)+1}()+"__",o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=ce(t.props.value),t}I(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):ue,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=C().object.isRequired,r);var u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}I(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?ue:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?ue:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=C().object,i),{Provider:o,Consumer:u}},fe=function(e){var t=le();return t.displayName=e,t},he=fe("Router-History"),de=fe("Router"),pe=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}I(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(de.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(he.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var ve=function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var ye={},me=0;function ge(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(ye[e])return ye[e];var t=ae().compile(e);return me<1e4&&(ye[e]=t,me++),t}(e)(t,{pretty:!0})}function ke(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(de.Consumer,null,(function(e){e||M(!1);var i=e.history,o=e.staticContext,u=a?i.push:i.replace,s=q(n?"string"===typeof r?ge(r,n.params):N({},r,{pathname:ge(r.pathname,n.params)}):r);return o?(u(s),null):t.createElement(ve,{onMount:function(){u(s)},onUpdate:function(e,t){var n=q(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&P(e.state,t.state)})(n,N({},s,{key:n.key}))||u(s)},to:r})}))}var be={},we=0;function _e(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=be[n]||(be[n]={});if(r[e])return r[e];var i=[],a={regexp:ae()(e,i,t),keys:i};return we<1e4&&(r[e]=a,we++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var xe=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(de.Consumer,null,(function(n){n||M(!1);var r=e.props.location||n.location,i=N({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?_e(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(de.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function Ee(e){return"/"===e.charAt(0)?e:"/"+e}function Se(e,t){if(!e)return t;var n=Ee(e);return 0!==t.pathname.indexOf(n)?t:N({},t,{pathname:t.pathname.substr(n.length)})}function Ie(e){return"string"===typeof e?e:B(e)}function Te(e){return function(){M(!1)}}function Ce(){}t.Component;var Ne=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(de.Consumer,null,(function(n){n||M(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?_e(a.pathname,N({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var Ae=t.useContext;function Re(){return Ae(he)}function De(){return Ae(de).location}var Oe=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=$(t.props),t}return I(n,e),n.prototype.render=function(){return t.createElement(pe,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var Pe=function(e,t){return"function"===typeof e?e(t):e},Le=function(e,t){return"string"===typeof e?q(e,null,null,t):e},Me=function(e){return e},Fe=t.forwardRef;"undefined"===typeof Fe&&(Fe=Me);var Ue=Fe((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=oe(e,["innerRef","navigate","onClick"]),u=o.target,s=N({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=Me!==Fe&&n||r,t.createElement("a",s)}));var Ve=Fe((function(e,n){var r=e.component,i=void 0===r?Ue:r,a=e.replace,o=e.to,u=e.innerRef,s=oe(e,["component","replace","to","innerRef"]);return t.createElement(de.Consumer,null,(function(e){e||M(!1);var r=e.history,c=Le(Pe(o,e.location),e.location),l=c?r.createHref(c):"",f=N({},s,{href:l,navigate:function(){var t=Pe(o,e.location),n=B(e.location)===B(Le(t));(a||n?r.replace:r.push)(t)}});return Me!==Fe?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),je=function(e){return e},Be=t.forwardRef;"undefined"===typeof Be&&(Be=je);Be((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,d=e.strict,p=e.style,v=e.to,y=e.innerRef,m=oe(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(de.Consumer,null,(function(e){e||M(!1);var r=f||e.location,a=Le(Pe(v,r),r),g=a.pathname,k=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=k?_e(r.pathname,{path:k,exact:c,sensitive:h,strict:d}):null,w=!!(l?l(b,r):b),_="function"===typeof s?s(w):s,x="function"===typeof p?p(w):p;w&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(_,o),x=N({},x,u));var E=N({"aria-current":w&&i||null,className:_,style:x,to:a},m);return je!==Be?E.ref=n||y:E.innerRef=y,t.createElement(Ve,E)}))}));var qe="App_loader__full_container__iIt0w",ze="Header_header__HXQOm",Ge="Header_header__container__urE9T",Ke="Header_header__container_auth__XtHIy",He="Header_header__container_auth_reg__coF+Z",We="Header_header__title__kU4tG",Qe="Header_header__exit_button__svgm3";function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(){Xe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==$e(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ye(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ye(a,r,i,o,u,"next",e)}function u(e){Ye(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function et(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ze(e)););return e}function tt(){return tt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=et(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},tt.apply(this,arguments)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function it(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function at(e,t){if(t&&("object"===$e(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function ot(e){var t=it();return function(){var n,r=Ze(e);if(t){var i=Ze(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return at(this,n)}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function st(e,t){if(e){if("string"===typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}function ct(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=st(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||st(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$e(t)?t:String(t)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function pt(e,t,n){return t&&dt(e.prototype,t),n&&dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vt(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t,n){return(t=ht(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t,n){return mt=it()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&S(i,n.prototype),i},mt.apply(null,arguments)}function gt(e){var t="function"===typeof Map?new Map:void 0;return gt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return mt(e,arguments,Ze(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},gt(e)}var kt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},bt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},wt=function(e){return function(e){var t=kt(e);return bt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},_t=function(e){try{return bt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Et(n)&&(e[n]=xt(e[n],t[n]));return e}function Et(e){return"__proto__"!==e}function St(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function It(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Tt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ct=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Nt=function(){try{return Ct()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&_t(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},At=function(e){var t,n;return null===(n=null===(t=Nt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Rt=function(){var e;return null===(e=Nt())||void 0===e?void 0:e.config},Dt=function(e){var t;return null===(t=Nt())||void 0===t?void 0:t["_".concat(e)]},Ot=function(){function e(){var t=this;ft(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return pt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Pt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wt(JSON.stringify({alg:"none",type:"JWT"})),wt(JSON.stringify(a)),""].join(".")}var Lt=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(nt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(nt(a),Mt.prototype.create),a}return pt(n)}(gt(Error)),Mt=function(){function e(t,n,r){ft(this,e),this.service=t,this.serviceName=n,this.errors=r}return pt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ft(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Lt(n,a,t);return o}}]),e}();function Ft(e,t){return e.replace(Ut,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ut=/\{\$([^}]+)}/g;function Vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Bt(u)&&Bt(s)){if(!jt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Bt(e){return null!==e&&"object"===typeof e}function qt(e){for(var t=[],n=function(){var e=lt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function zt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=lt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Gt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Kt(e,t){var n=new Ht(e,t);return n.subscribe.bind(n)}var Ht=function(){function e(t,n){var r=this;ft(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return pt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ct(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Wt),void 0===r.error&&(r.error=Wt),void 0===r.complete&&(r.complete=Wt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Wt(){}function Qt(e){return e&&e._delegate?e._delegate:e}var $t=function(){function e(t,n,r){ft(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return pt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Xt="[DEFAULT]",Yt=function(){function e(t,n){ft(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return pt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ot;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xt})}catch(s){}var t,n=ct(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=lt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(vt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),vt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ct(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=lt(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(jw){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Xt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(jw){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;return this.component?this.component.multipleInstances?e:Xt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Jt,Zt,en=function(){function e(t){ft(this,e),this.name=t,this.providers=new Map}return pt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Yt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),tn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Zt||(Zt={}));var nn={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},rn=Zt.INFO,an=(yt(Jt={},Zt.DEBUG,"log"),yt(Jt,Zt.VERBOSE,"log"),yt(Jt,Zt.INFO,"info"),yt(Jt,Zt.WARN,"warn"),yt(Jt,Zt.ERROR,"error"),Jt),on=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=an[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},un=function(){function e(t){ft(this,e),this.name=t,this._logLevel=rn,this._logHandler=on,this._userLogHandler=null,tn.push(this)}return pt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?nn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Zt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Zt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.INFO].concat(t)),this._logHandler.apply(this,[this,Zt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.WARN].concat(t)),this._logHandler.apply(this,[this,Zt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Zt.ERROR].concat(t)),this._logHandler.apply(this,[this,Zt.ERROR].concat(t))}}]),e}();function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln,fn;var hn=new WeakMap,dn=new WeakMap,pn=new WeakMap,vn=new WeakMap,yn=new WeakMap;var mn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function gn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(wn(this),n),bn(hn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bn(e.apply(wn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[wn(this),t].concat(r));return pn.set(a,t.sort?t.sort():[t]),bn(a)}}function kn(e){return"function"===typeof e?gn(e):(e instanceof IDBTransaction&&function(e){if(!dn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));dn.set(e,t)}}(e),t=e,(ln||(ln=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,mn):e);var t}function bn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(bn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&hn.set(t,e)})).catch((function(){})),yn.set(t,e),t}(e);if(vn.has(e))return vn.get(e);var t=kn(e);return t!==e&&(vn.set(e,t),yn.set(t,e)),t}var wn=function(e){return yn.get(e)};var _n,xn,En=["get","getKey","getAll","getAllKeys","count"],Sn=["put","add","delete","clear"],In=new Map;function Tn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(In.get(t))return In.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Sn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||En.includes(n))){var a=function(){var e=Je(Xe().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return In.set(t,a),a}}}mn=function(e){return cn(cn({},e),{},{get:function(t,n,r){return Tn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Tn(t,n)||e.has(t,n)}})}(mn);var Cn=function(){function e(t){ft(this,e),this.container=t}return pt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Nn="@firebase/app",An="0.9.0",Rn=new un("@firebase/app"),Dn="[DEFAULT]",On=(yt(_n={},Nn,"fire-core"),yt(_n,"@firebase/app-compat","fire-core-compat"),yt(_n,"@firebase/analytics","fire-analytics"),yt(_n,"@firebase/analytics-compat","fire-analytics-compat"),yt(_n,"@firebase/app-check","fire-app-check"),yt(_n,"@firebase/app-check-compat","fire-app-check-compat"),yt(_n,"@firebase/auth","fire-auth"),yt(_n,"@firebase/auth-compat","fire-auth-compat"),yt(_n,"@firebase/database","fire-rtdb"),yt(_n,"@firebase/database-compat","fire-rtdb-compat"),yt(_n,"@firebase/functions","fire-fn"),yt(_n,"@firebase/functions-compat","fire-fn-compat"),yt(_n,"@firebase/installations","fire-iid"),yt(_n,"@firebase/installations-compat","fire-iid-compat"),yt(_n,"@firebase/messaging","fire-fcm"),yt(_n,"@firebase/messaging-compat","fire-fcm-compat"),yt(_n,"@firebase/performance","fire-perf"),yt(_n,"@firebase/performance-compat","fire-perf-compat"),yt(_n,"@firebase/remote-config","fire-rc"),yt(_n,"@firebase/remote-config-compat","fire-rc-compat"),yt(_n,"@firebase/storage","fire-gcs"),yt(_n,"@firebase/storage-compat","fire-gcs-compat"),yt(_n,"@firebase/firestore","fire-fst"),yt(_n,"@firebase/firestore-compat","fire-fst-compat"),yt(_n,"fire-js","fire-js"),yt(_n,"firebase","fire-js-all"),_n),Pn=new Map,Ln=new Map;function Mn(e,t){try{e.container.addComponent(t)}catch(n){Rn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fn(e,t){e.container.addOrOverwriteComponent(t)}function Un(e){var t=e.name;if(Ln.has(t))return Rn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ln.set(t,e);var n,r=ct(Pn.values());try{for(r.s();!(n=r.n()).done;){Mn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Vn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn;Vn(e,t).clearInstance(n)}function Bn(){Ln.clear()}var qn=(yt(xn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),yt(xn,"bad-app-name","Illegal App name: '{$appName}"),yt(xn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),yt(xn,"app-deleted","Firebase App named '{$appName}' already deleted"),yt(xn,"no-options","Need to provide options, when not being deployed to hosting via source."),yt(xn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),yt(xn,"invalid-log-argument","First argument to `onLog` must be null or a function."),yt(xn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),yt(xn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),yt(xn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),yt(xn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),xn),zn=new Mt("app","Firebase",qn),Gn=function(){function e(t,n,r){var i=this;ft(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",(function(){return i}),"PUBLIC"))}return pt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}]),e}(),Kn="9.15.0";function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Dn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw zn.create("bad-app-name",{appName:String(a)});if(n||(n=Rt()),!n)throw zn.create("no-options");var o=Pn.get(a);if(o){if(jt(n,o.options)&&jt(i,o.config))return o;throw zn.create("duplicate-app",{appName:a})}var u,s=new en(a),c=ct(Ln.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Gn(n,i,s);return Pn.set(a,f),f}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=Pn.get(e);if(!t&&e===Dn)return Hn();if(!t)throw zn.create("no-app",{appName:e});return t}function Qn(){return Array.from(Pn.values())}function $n(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pn.has(n)){e.next=6;break}return Pn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e,t,n){var r,i=null!==(r=On[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Rn.warn(u.join(" "))}Un(new $t("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jn(e,t){if(null!==e&&"function"!==typeof e)throw zn.create("invalid-log-argument");!function(e,t){var n,r=ct(tn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=nn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Zt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Zn(e){var t;t=e,tn.forEach((function(e){e.setLogLevel(t)}))}var er="firebase-heartbeat-store",tr=null;function nr(){return tr||(tr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=bn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(bn(u.result),e.oldVersion,e.newVersion,bn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(er)}}).catch((function(e){throw zn.create("idb-open",{originalErrorMessage:e.message})}))),tr}function rr(e){return ir.apply(this,arguments)}function ir(){return ir=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nr();case 3:return n=e.sent,e.abrupt("return",n.transaction(er).objectStore(er).get(ur(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Lt?Rn.warn(e.t0.message):(r=zn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Rn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ir.apply(this,arguments)}function ar(e,t){return or.apply(this,arguments)}function or(){return or=Je(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nr();case 3:return r=e.sent,i=r.transaction(er,"readwrite"),a=i.objectStore(er),e.next=8,a.put(n,ur(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Lt?Rn.warn(e.t0.message):(o=zn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Rn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),or.apply(this,arguments)}function ur(e){return"".concat(e.name,"!").concat(e.options.appId)}var sr=function(){function e(t){var n=this;ft(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new hr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return pt(e,[{key:"triggerHeartbeat",value:function(){var e=Je(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=cr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=cr(),n=lr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=wt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function cr(){return(new Date).toISOString().substring(0,10)}function lr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ct(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),dr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),dr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var fr,hr=function(){function e(t){ft(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return pt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,rr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ar(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ar(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(vt(r.heartbeats),vt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function dr(e){return wt(JSON.stringify({version:2,heartbeats:e})).length}fr="",Un(new $t("platform-logger",(function(e){return new Cn(e)}),"PRIVATE")),Un(new $t("heartbeat",(function(e){return new sr(e)}),"PRIVATE")),Yn(Nn,An,fr),Yn(Nn,An,"esm2017"),Yn("fire-js","");function pr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var vr;Object.create;function yr(){return yt({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var mr=yr,gr=new Mt("auth","Firebase",yr()),kr=new un("@firebase/auth");function br(e){if(kr.logLevel<=Zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kr.error.apply(kr,["Auth (".concat(Kn,"): ").concat(e)].concat(n))}}function wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Er.apply(void 0,[e].concat(n))}function _r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Er.apply(void 0,[e].concat(n))}function xr(e,t,n){var r=Object.assign(Object.assign({},mr()),yt({},t,n));return new Mt("auth","Firebase",r).create(t,{appName:e.name})}function Er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=vt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(vt(o)))}return gr.create.apply(gr,[e].concat(n))}function Sr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Er.apply(void 0,[t].concat(r))}}function Ir(e){var t="INTERNAL ASSERTION FAILED: "+e;throw br(t),new Error(t)}function Tr(e,t){e||Ir(t)}var Cr=new Map;function Nr(e){Tr(e instanceof Function,"Expected a class definition");var t=Cr.get(e);return t?(Tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cr.set(e,t),t)}function Ar(e,t){var n=Vn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(jt(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;wr(r,"already-initialized")}return n.initialize({options:t})}function Rr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dr(){return"http:"===Or()||"https:"===Or()}function Or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Pr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Lr=function(){function e(t,n){ft(this,e),this.shortDelay=t,this.longDelay=n,Tr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())||"object"===typeof navigator&&"ReactNative"===navigator.product}return pt(e,[{key:"get",value:function(){return Pr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Mr(e,t){Tr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Fr=function(){function e(){ft(this,e)}return pt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ur=(yt(vr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),yt(vr,"MISSING_CUSTOM_TOKEN","internal-error"),yt(vr,"INVALID_IDENTIFIER","invalid-email"),yt(vr,"MISSING_CONTINUE_URI","internal-error"),yt(vr,"INVALID_PASSWORD","wrong-password"),yt(vr,"MISSING_PASSWORD","internal-error"),yt(vr,"EMAIL_EXISTS","email-already-in-use"),yt(vr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),yt(vr,"INVALID_IDP_RESPONSE","invalid-credential"),yt(vr,"INVALID_PENDING_TOKEN","invalid-credential"),yt(vr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),yt(vr,"MISSING_REQ_TYPE","internal-error"),yt(vr,"EMAIL_NOT_FOUND","user-not-found"),yt(vr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),yt(vr,"EXPIRED_OOB_CODE","expired-action-code"),yt(vr,"INVALID_OOB_CODE","invalid-action-code"),yt(vr,"MISSING_OOB_CODE","internal-error"),yt(vr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),yt(vr,"INVALID_ID_TOKEN","invalid-user-token"),yt(vr,"TOKEN_EXPIRED","user-token-expired"),yt(vr,"USER_NOT_FOUND","user-token-expired"),yt(vr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),yt(vr,"INVALID_CODE","invalid-verification-code"),yt(vr,"INVALID_SESSION_INFO","invalid-verification-id"),yt(vr,"INVALID_TEMPORARY_PROOF","invalid-credential"),yt(vr,"MISSING_SESSION_INFO","missing-verification-id"),yt(vr,"SESSION_EXPIRED","code-expired"),yt(vr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),yt(vr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),yt(vr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),yt(vr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),yt(vr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),yt(vr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),yt(vr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),yt(vr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),yt(vr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),yt(vr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),yt(vr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),vr),Vr=new Lr(3e4,6e4);function jr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Br(e,t,n,r){return qr.apply(this,arguments)}function qr(){return qr=Je(Xe().mark((function e(t,n,r,i){var a,o=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",zr(t,a,Je(Xe().mark((function e(){var a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=qt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Fr.fetch()(Wr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function zr(e,t,n){return Gr.apply(this,arguments)}function Gr(){return(Gr=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ur),n),e.prev=2,a=new Qr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw $r(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=lt(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw $r(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw $r(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw $r(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw xr(t,d,h);case 34:wr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Lt)){e.next=41;break}throw e.t0;case 41:wr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Kr(e,t,n,r){return Hr.apply(this,arguments)}function Hr(){return Hr=Je(Xe().mark((function e(t,n,r,i){var a,o,u=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Br(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&wr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}function Wr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Mr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Qr=function(){function e(t){var n=this;ft(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(_r(n.auth,"network-request-failed"))}),Vr.get())}))}return pt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function $r(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=_r(e,t,r);return i.customData._tokenResponse=n,i}function Xr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ei(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ti(){return ti=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Qt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Sr((a=ri(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ei(ni(a.auth_time)),issuedAtTime:ei(ni(a.iat)),expirationTime:ei(ni(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e){return 1e3*Number(e)}function ri(e){var t=lt(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return br("JWT malformed, contained fewer than 3 sections"),null;try{var a=_t(r);return a?JSON.parse(a):(br("Failed to decode base64 JWT payload"),null)}catch(o){return br("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function ii(e,t){return ai.apply(this,arguments)}function ai(){return ai=Je(Xe().mark((function e(t,n){var r=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Lt&&oi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ai.apply(this,arguments)}function oi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ui=function(){function e(t){ft(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return pt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),si=function(){function e(t,n){ft(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return pt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ci(e){return li.apply(this,arguments)}function li(){return li=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ii(t,Jr(r,{idToken:i}));case 6:Sr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?di(o.providerUserInfo):[],s=hi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new si(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function fi(){return(fi=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qt(t),e.next=3,ci(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(vt(n),vt(t))}function di(e){return e.map((function(e){var t=e.providerId,n=pr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function pi(e,t){return vi.apply(this,arguments)}function vi(){return(vi=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(t,{},Je(Xe().mark((function e(){var r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Wr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Fr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yi=function(){function e(){ft(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return pt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Sr(e.idToken,"internal-error"),Sr("undefined"!==typeof e.idToken,"internal-error"),Sr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ri(e);return Sr(t,"internal-error"),Sr("undefined"!==typeof t.exp,"internal-error"),Sr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Je(Xe().mark((function e(t){var n,r=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Sr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ir("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Sr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Sr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Sr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function mi(e,t){Sr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var gi=function(){function e(t){ft(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=pr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?vt(a.providerData):[],this.metadata=new si(a.createdAt||void 0,a.lastLoginAt||void 0)}return pt(e,[{key:"getIdToken",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ii(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Sr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ti.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Sr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Sr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Je(Xe().mark((function e(t){var n,r,i=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ci(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ii(this,Xr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Sr(k&&x,t,"internal-error");var E=yi.fromJSON(this.name,x);Sr("string"===typeof k,t,"internal-error"),mi(f,t.name),mi(h,t.name),Sr("boolean"===typeof b,t,"internal-error"),Sr("boolean"===typeof w,t,"internal-error"),mi(d,t.name),mi(p,t.name),mi(v,t.name),mi(y,t.name),mi(m,t.name),mi(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=Je(Xe().mark((function t(n,r){var i,a,o,u=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new yi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ci(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ki=function(){function e(){ft(this,e),this.type="NONE",this.storage={}}return pt(e,[{key:"_isAvailable",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ki.type="NONE";var bi=ki;function wi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var _i=function(){function e(t,n,r){ft(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=wi(this.userKey,a.apiKey,o),this.fullPersistenceKey=wi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return pt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?gi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Je(Xe().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Nr(bi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Nr(bi),u=wi(i,n.config.apiKey,n.name),s=null,c=ct(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=gi._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function xi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ei(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ni(t))return"Blackberry";if(Ai(t))return"Webos";if(Si(t))return"Safari";if((t.includes("chrome/")||Ii(t))&&!t.includes("edge/"))return"Chrome";if(Ci(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/firefox\//i.test(e)}function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/crios\//i.test(e)}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/iemobile/i.test(e)}function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/android/i.test(e)}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/blackberry/i.test(e)}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/webos/i.test(e)}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Di(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return Ri(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Oi(){return function(){var e=St();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();return Ri(e)||Ci(e)||Ai(e)||Ni(e)||/windows phone/i.test(e)||Ti(e)}function Li(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xi(St());break;case"Worker":t="".concat(xi(St()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Kn,"/").concat(r)}var Mi=function(){function e(t){ft(this,e),this.auth=t,this.queue=[]}return pt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=ct(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=ct(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Fi=function(){function e(t,n,r){ft(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vi(this),this.idTokenSubscription=new Vi(this),this.beforeStateQueue=new Mi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return pt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(Je(Xe().mark((function r(){var i,a;return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,_i.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Sr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ci(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Qt(t):null)&&Sr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Je(Xe().mark((function e(t){var n,r=this,i=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Sr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Je(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Nr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Mt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Sr(n=t&&Nr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,_i.create(this,[Nr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Je(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Sr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Sr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Li(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Je(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yt({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ui(e){return Qt(e)}var Vi=function(){function e(t){var n=this;ft(this,e),this.auth=t,this.observer=null,this.addObserver=Kt((function(e){return n.observer=e}))}return pt(e,[{key:"next",get:function(){return Sr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ji(e,t,n){var r=Ui(e);Sr(r._canInitEmulator,r,"emulator-config-failed"),Sr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Bi(t),o=function(e){var t=Bi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:qi(r.substr(a.length+1))}}var o=lt(r.split(":"),2);return{host:o[0],port:qi(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Bi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zi=function(){function e(t,n){ft(this,e),this.providerId=t,this.signInMethod=n}return pt(e,[{key:"toJSON",value:function(){return Ir("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ir("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ir("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ir("not implemented")}}]),e}();function Gi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithPassword",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return $i.apply(this,arguments)}function $i(){return($i=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ji=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ft(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return pt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Hi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Qi(t,{email:this._email,oobCode:this._password}));case 5:wr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Xi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:wr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zi);function Zi(e,t){return ea.apply(this,arguments)}function ea(){return(ea=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithIdp",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ta=function(e){rt(n,e);var t=ot(n);function n(){var e;return ft(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return pt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Zi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Zi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Zi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=pr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zi);function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:sendVerificationCode",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return(ia=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(){return(aa=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",jr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw $r(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oa=yt({},"USER_NOT_FOUND","user-not-found");function ua(){return(ua=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",jr(t,r),oa));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sa=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this,"phone","phone")).params=e,r}return pt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ia.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return aa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ua.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zi);var ca=function(){function e(t){var n,r,i,a,o,u;ft(this,e);var s=zt(Gt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Sr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return pt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=zt(Gt(e)).link,n=t?zt(Gt(t)).deep_link_id:null,r=zt(Gt(e)).deep_link_id;return(r?zt(Gt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(jw){return null}}}]),e}();var la=function(){function e(){ft(this,e),this.providerId=e.PROVIDER_ID}return pt(e,null,[{key:"credential",value:function(e,t){return Ji._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ca.parseLink(t);return Sr(n,"argument-error"),Ji._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();la.PROVIDER_ID="password",la.EMAIL_PASSWORD_SIGN_IN_METHOD="password",la.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var fa=function(){function e(t){ft(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return pt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ha=function(e){rt(n,e);var t=ot(n);function n(){var e;return ft(this,n),(e=t.apply(this,arguments)).scopes=[],e}return pt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return vt(this.scopes)}}]),n}(fa),da=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.call(this,"facebook.com")}return pt(n,null,[{key:"credential",value:function(e){return ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(jw){return null}}}]),n}(ha);da.FACEBOOK_SIGN_IN_METHOD="facebook.com",da.PROVIDER_ID="facebook.com";var pa=function(e){rt(n,e);var t=ot(n);function n(){var e;return ft(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return pt(n,null,[{key:"credential",value:function(e,t){return ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(jw){return null}}}]),n}(ha);pa.GOOGLE_SIGN_IN_METHOD="google.com",pa.PROVIDER_ID="google.com";var va=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.call(this,"github.com")}return pt(n,null,[{key:"credential",value:function(e){return ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(jw){return null}}}]),n}(ha);va.GITHUB_SIGN_IN_METHOD="github.com",va.PROVIDER_ID="github.com";var ya=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.call(this,"twitter.com")}return pt(n,null,[{key:"credential",value:function(e,t){return ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(jw){return null}}}]),n}(ha);function ma(e,t){return ga.apply(this,arguments)}function ga(){return(ga=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(t,"POST","/v1/accounts:signUp",jr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ya.TWITTER_SIGN_IN_METHOD="twitter.com",ya.PROVIDER_ID="twitter.com";var ka=function(){function e(t){ft(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return pt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Je(Xe().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,gi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ba(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Je(Xe().mark((function t(n,r,i){var a;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ba(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ba(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var wa=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a){var o,u;return ft(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(nt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return pt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Lt);function _a(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw wa._fromErrorAndOperation(e,n,t,r);throw n}))}function xa(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=Je(Xe().mark((function e(t,n){var r,i,a=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ii,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ka._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Sa(e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ii(t,_a(i,a,n,t),r);case 6:return Sr((o=e.sent).idToken,i,"internal-error"),Sr(u=ri(o.idToken),i,"internal-error"),s=u.sub,Sr(t.uid===s,i,"user-mismatch"),e.abrupt("return",ka._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&wr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ia.apply(this,arguments)}function Ta(e,t){return Ca.apply(this,arguments)}function Ca(){return Ca=Je(Xe().mark((function e(t,n){var r,i,a,o,u=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,_a(t,i,n);case 4:return a=e.sent,e.next=7,ka._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ta(Ui(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(){return(Ra=Je(Xe().mark((function e(t,n,r){var i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ui(t),e.next=3,ma(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ka._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t,n,r){return Qt(e).onIdTokenChanged(t,n,r)}function Oa(e,t,n){return Qt(e).beforeAuthStateChanged(t,n)}function Pa(e,t){return Br(e,"POST","/v2/accounts/mfaEnrollment:start",jr(e,t))}new WeakMap;var La="__sak",Ma=function(){function e(t,n){ft(this,e),this.storageRetriever=t,this.type=n}return pt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(La,"1"),this.storage.removeItem(La),Promise.resolve(!0)):Promise.resolve(!1)}catch(jw){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Fa=function(e){rt(n,e);var t=ot(n);function n(){var e;return ft(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=St();return Si(e)||Ri(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Pi(),e._shouldAllowMigration=!0,e}return pt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Oi()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Je(Xe().mark((function e(t,r){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ze(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(Xe().mark((function e(t){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ze(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ze(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ma);Fa.type="LOCAL";var Ua=Fa,Va=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return pt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ma);Va.type="SESSION";var ja=Va;function Ba(e){return Promise.all(e.map(function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var qa=function(){function e(t){ft(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return pt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ba(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function za(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}qa.receivers=[];var Ga=function(){function e(t){ft(this,e),this.target=t,this.handlers=new Set}return pt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=za("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ka(){return window}function Ha(){return"undefined"!==typeof Ka().WorkerGlobalScope&&"function"===typeof Ka().importScripts}function Wa(){return Qa.apply(this,arguments)}function Qa(){return(Qa=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function $a(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Xa="firebaseLocalStorageDb",Ya="firebaseLocalStorage",Ja="fbase_key",Za=function(){function e(t){ft(this,e),this.request=t}return pt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function eo(e,t){return e.transaction([Ya],t?"readwrite":"readonly").objectStore(Ya)}function to(){var e=indexedDB.deleteDatabase(Xa);return new Za(e).toPromise()}function no(){var e=indexedDB.open(Xa,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ya,{keyPath:Ja})}catch(r){n(r)}})),e.addEventListener("success",Je(Xe().mark((function n(){var r;return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ya)){n.next=12;break}return r.close(),n.next=5,to();case 5:return n.t0=t,n.next=8,no();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ro(e,t,n){return io.apply(this,arguments)}function io(){return io=Je(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eo(t,!0).put((yt(i={},Ja,n),yt(i,"value",r),i)),e.abrupt("return",new Za(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),io.apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return oo=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t,!1).get(n),e.next=3,new Za(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function uo(e,t){var n=eo(e,!0).delete(t);return new Za(n).toPromise()}var so=function(){function e(){ft(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return pt(e,[{key:"_openDb",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,no();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ha()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Je(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=qa._getInstance(Ha()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Je(Xe().mark((function e(n,r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Je(Xe().mark((function e(){var t,n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ga(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&$a()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,no();case 5:return t=e.sent,e.next=8,ro(t,La,"1");case 8:return e.next=10,uo(t,La);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je(Xe().mark((function e(t,n){var r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ro(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ao(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return uo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=eo(e,!1).getAll();return new Za(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ct(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();so.type="LOCAL";var co=so;function lo(e,t){return Br(e,"POST","/v2/accounts/mfaSignIn:start",jr(e,t))}function fo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=_r("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ho(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}ho("rcb"),new Lr(3e4,6e4);var po="recaptcha";function vo(e,t,n){return yo.apply(this,arguments)}function yo(){return yo=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Sr("string"===typeof a,t,"argument-error"),Sr(r.type===po,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Sr("enroll"===u.type,t,"internal-error"),e.next=13,Pa(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Sr("signin"===u.type,t,"internal-error"),Sr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,lo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,na(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),yo.apply(this,arguments)}var mo=function(){function e(t){ft(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ui(t)}return pt(e,[{key:"verifyPhoneNumber",value:function(e,t){return vo(this.auth,e,Qt(t))}}],[{key:"credential",value:function(e,t){return sa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?sa._fromTokenResponse(n,r):null}}]),e}();function go(e,t){return t?Nr(t):(Sr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}mo.PROVIDER_ID="phone",mo.PHONE_SIGN_IN_METHOD="phone";var ko=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this,"custom","custom")).params=e,r}return pt(n,[{key:"_getIdTokenResponse",value:function(e){return Zi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Zi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Zi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zi);function bo(e){return Ta(e.auth,new ko(e),e.bypassAuthState)}function wo(e){var t=e.auth,n=e.user;return Sr(n,t,"internal-error"),Sa(n,new ko(e),e.bypassAuthState)}function _o(e){return xo.apply(this,arguments)}function xo(){return(xo=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Sr(r=t.user,n,"internal-error"),e.abrupt("return",xa(r,new ko(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ft(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return pt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Je(Xe().mark((function t(n,r){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Je(Xe().mark((function e(t){var n,r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bo;case"linkViaPopup":case"linkViaRedirect":return _o;case"reauthViaPopup":case"reauthViaRedirect":return wo;default:wr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),So=new Lr(2e3,1e4);var Io=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a,o){var u;return ft(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=nt(u),u}return pt(n,[{key:"executeNotNull",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Sr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je(Xe().mark((function e(){var t,n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr(1===this.filter.length,"Popup operations only handle one event"),t=za(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(_r(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(_r(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(_r(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,So.get())}()}}]),n}(Eo);Io.currentPopupAction=null;var To=new Map,Co=function(e){rt(n,e);var t=ot(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ft(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return pt(n,[{key:"execute",value:function(){var e=Je(Xe().mark((function e(){var t,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=To.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,No(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,tt(Ze(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:To.set(this.auth._key(),t);case 21:return this.bypassAuthState||To.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Je(Xe().mark((function e(t){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",tt(Ze(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",tt(Ze(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Eo);function No(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=Je(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oo(n),i=Do(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Ro(e,t){To.set(e._key(),t)}function Do(e){return Nr(e._redirectPersistence)}function Oo(e){return wi("pendingRedirect",e.config.apiKey,e.name)}function Po(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ui(t),a=go(i,n),o=new Co(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}var Mo=function(){function e(t){ft(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return pt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Uo(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Fo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Fo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Uo(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Vo(e){return jo.apply(this,arguments)}function jo(){return jo=Je(Xe().mark((function e(t){var n,r=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Br(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}var Bo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qo=/^https?/;function zo(){return(zo=Je(Xe().mark((function e(t){var n,r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Vo(t);case 4:n=e.sent,r=n.authorizedDomains,i=ct(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Go(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:wr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Go(e){var t=Rr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!qo.test(r))return!1;if(Bo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ko=new Lr(3e4,6e4);function Ho(){var e=Ka().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=vt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Wo=null;function Qo(e){return Wo=Wo||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ho(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ho(),n(_r(e,"network-request-failed"))},timeout:Ko.get()})}if(null===(i=null===(r=Ka().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ka().gapi)||void 0===a?void 0:a.load)){var u=ho("iframefcb");return Ka()[u]=function(){gapi.load?o():n(_r(e,"network-request-failed"))},fo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Wo=null,e}))}(e),Wo}var $o=new Lr(5e3,15e3),Xo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jo(e){var t=e.config;Sr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Mr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Kn},i=Yo.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(qt(r).slice(1))}function Zo(e){return eu.apply(this,arguments)}function eu(){return eu=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qo(t);case 2:return n=e.sent,Sr(r=Ka().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Jo(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xo,dontclear:!0},(function(e){return new Promise(function(){var n=Je(Xe().mark((function n(r,i){var a,o,u;return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ka().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=_r(t,"network-request-failed"),o=Ka().setTimeout((function(){i(a)}),$o.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}var tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nu="_blank",ru="http://localhost",iu=function(){function e(t){ft(this,e),this.window=t,this.associatedEvent=null}return pt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function au(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},tu),{width:r.toString(),height:i.toString(),top:a,left:o}),c=St().toLowerCase();n&&(u=Ii(c)?nu:n),Ei(c)&&(t=t||ru,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=lt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Di(c)&&"_self"!==u)return ou(t||"",u),new iu(null);var f=window.open(t||"",u,l);Sr(f,e,"popup-blocked");try{f.focus()}catch(h){}return new iu(f)}function ou(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var uu="__/auth/handler",su="emulator/auth/handler";function cu(e,t,n,r,i,a){Sr(e.config.authDomain,e,"auth-domain-config-required"),Sr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kn,eventId:i};if(t instanceof fa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=lt(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof ha){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(uu);return Mr(t,su)}(e),"?").concat(qt(d).slice(1))}var lu="webStorageSupport",fu=function(){function e(){ft(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ja,this._completeRedirectFn=Po,this._overrideRedirectResult=Ro}return pt(e,[{key:"_openPopup",value:function(){var e=Je(Xe().mark((function e(t,n,r,i){var a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=cu(t,n,r,Rr(),i),e.abrupt("return",au(t,o,za()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je(Xe().mark((function e(t,n,r,i){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=cu(t,n,r,Rr(),i),Ka().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Tr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo(t);case 2:return n=e.sent,r=new Mo(t),n.register("authEvent",(function(e){return Sr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lu,{type:lu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lu];void 0!==i&&t(!!i),wr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Pi()||Si()||Ri()}}]),e}(),hu=fu,du=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this,"phone")).credential=e,r}return pt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Br(e,"POST","/v2/accounts/mfaEnrollment:finalize",jr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Br(e,"POST","/v2/accounts/mfaSignIn:finalize",jr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){ft(this,e),this.factorId=t}return pt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ir("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){ft(this,e)}return pt(e,null,[{key:"assertion",value:function(e){return du._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var pu="@firebase/auth",vu="0.21.0",yu=function(){function e(t){ft(this,e),this.auth=t,this.internalListeners=new Map}return pt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Sr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var mu,gu=Dt("authIdTokenMaxAge")||300,ku=null,bu=function(e){return function(){var t=Je(Xe().mark((function t(n){var r,i,a;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>gu)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,ku!==a){t.next=12;break}return t.abrupt("return");case 12:return ku=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn(),t=Vn(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Ar(e,{popupRedirectResolver:hu,persistence:[co,Ua,ja]}),r=Dt("authTokenSyncURL");if(r){var i=bu(r);Oa(n,i,(function(){return i(n.currentUser)})),Da(n,(function(e){return i(e)}))}var a=At("auth");return a&&ji(n,"http://".concat(a)),n}mu="Browser",Un(new $t("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Sr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Sr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:mu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Li(mu)},i=new Fi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Un(new $t("auth-internal",(function(e){return function(e){return new yu(e)}(Ui(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(pu,vu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(mu)),Yn(pu,vu,"esm2017");var _u,xu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Eu={},Su=Su||{},Iu=xu||self;function Tu(){}function Cu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Nu(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Au="closure_uid_"+(1e9*Math.random()>>>0),Ru=0;function Du(e,t,n){return e.call.apply(e.bind,arguments)}function Ou(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Pu(e,t,n){return(Pu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Du:Ou).apply(null,arguments)}function Lu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Mu(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Fu(){this.s=this.s,this.o=this.o}Fu.prototype.s=!1,Fu.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Au)&&e[Au]||(e[Au]=++Ru))},Fu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Uu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Vu(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ju(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Cu(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Bu(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Bu.prototype.h=function(){this.defaultPrevented=!0};var qu=function(){if(!Iu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Iu.addEventListener("test",Tu,t),Iu.removeEventListener("test",Tu,t)}catch(n){}return e}();function zu(e){return/^[\s\xa0]*$/.test(e)}var Gu=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ku(e,t){return e<t?-1:e>t?1:0}function Hu(){var e=Iu.navigator;return e&&(e=e.userAgent)?e:""}function Wu(e){return-1!=Hu().indexOf(e)}function Qu(e){return Qu[" "](e),e}Qu[" "]=Tu;var $u,Xu=Wu("Opera"),Yu=Wu("Trident")||Wu("MSIE"),Ju=Wu("Edge"),Zu=Ju||Yu,es=Wu("Gecko")&&!(-1!=Hu().toLowerCase().indexOf("webkit")&&!Wu("Edge"))&&!(Wu("Trident")||Wu("MSIE"))&&!Wu("Edge"),ts=-1!=Hu().toLowerCase().indexOf("webkit")&&!Wu("Edge");function ns(){var e=Iu.document;return e?e.documentMode:void 0}e:{var rs="",is=function(){var e=Hu();return es?/rv:([^\);]+)(\)|;)/.exec(e):Ju?/Edge\/([\d\.]+)/.exec(e):Yu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ts?/WebKit\/(\S+)/.exec(e):Xu?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(is&&(rs=is?is[1]:""),Yu){var as=ns();if(null!=as&&as>parseFloat(rs)){$u=String(as);break e}}$u=rs}var os,us={};function ss(){return function(e){var t=us;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Gu(String($u)).split("."),n=Gu("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ku(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ku(0==a[2].length,0==o[2].length)||Ku(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Iu.document&&Yu){var cs=ns();os=cs||(parseInt($u,10)||void 0)}else os=void 0;var ls=os;function fs(e,t){if(Bu.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(es){e:{try{Qu(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&fs.X.h.call(this)}}Mu(fs,Bu);var hs={2:"touch",3:"pen",4:"mouse"};fs.prototype.h=function(){fs.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ds="closure_listenable_"+(1e6*Math.random()|0),ps=0;function vs(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ps,this.ba=this.ea=!1}function ys(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ms(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function gs(e){var t={};for(var n in e)t[n]=e[n];return t}var ks="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bs(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ks.length;a++)n=ks[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ws(e){this.src=e,this.g={},this.h=0}function _s(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Uu(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ys(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function xs(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}ws.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=xs(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new vs(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Es="closure_lm_"+(1e6*Math.random()|0),Ss={};function Is(e,t,n,r,i){if(r&&r.once)return Cs(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Is(e,t[a],n,r,i);return null}return n=Ls(n),e&&e[ds]?e.N(t,n,Nu(r)?!!r.capture:!!r,i):Ts(e,t,n,!1,r,i)}function Ts(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Nu(i)?!!i.capture:!!i,u=Os(e);if(u||(e[Es]=u=new ws(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ds;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)qu||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Rs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Cs(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Cs(e,t[a],n,r,i);return null}return n=Ls(n),e&&e[ds]?e.O(t,n,Nu(r)?!!r.capture:!!r,i):Ts(e,t,n,!0,r,i)}function Ns(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ns(e,t[a],n,r,i);else r=Nu(r)?!!r.capture:!!r,n=Ls(n),e&&e[ds]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=xs(a=e.g[t],n,r,i))&&(ys(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Os(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xs(t,n,r,i)),(n=-1<e?t[e]:null)&&As(n))}function As(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ds])_s(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Rs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Os(t))?(_s(n,e),0==n.h&&(n.src=null,t[Es]=null)):ys(e)}}}function Rs(e){return e in Ss?Ss[e]:Ss[e]="on"+e}function Ds(e,t){if(e.ba)e=!0;else{t=new fs(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&As(e),e=n.call(r,t)}return e}function Os(e){return(e=e[Es])instanceof ws?e:null}var Ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(e){return"function"===typeof e?e:(e[Ps]||(e[Ps]=function(t){return e.handleEvent(t)}),e[Ps])}function Ms(){Fu.call(this),this.i=new ws(this),this.P=this,this.I=null}function Fs(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Bu(t,e);else if(t instanceof Bu)t.target=t.target||e;else{var i=t;bs(t=new Bu(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Us(o,r,!0,t)&&i}if(i=Us(o=t.g=e,r,!0,t)&&i,i=Us(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Us(o=t.g=n[a],r,!1,t)&&i}function Us(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&_s(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Mu(Ms,Fu),Ms.prototype[ds]=!0,Ms.prototype.removeEventListener=function(e,t,n,r){Ns(this,e,t,n,r)},Ms.prototype.M=function(){if(Ms.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ys(n[r]);delete t.g[e],t.h--}}this.I=null},Ms.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ms.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Vs=Iu.JSON.stringify;function js(){var e=Qs,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bs,qs=function(){function e(){ft(this,e),this.h=this.g=null}return pt(e,[{key:"add",value:function(e,t){var n=zs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),zs=new(function(){function e(t,n){ft(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return pt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Gs}),(function(e){return e.reset()})),Gs=function(){function e(){ft(this,e),this.next=this.g=this.h=null}return pt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ks(e){Iu.setTimeout((function(){throw e}),0)}function Hs(e,t){Bs||function(){var e=Iu.Promise.resolve(void 0);Bs=function(){e.then($s)}}(),Ws||(Bs(),Ws=!0),Qs.add(e,t)}var Ws=!1,Qs=new qs;function $s(){for(var e;e=js();){try{e.h.call(e.g)}catch(n){Ks(n)}var t=zs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ws=!1}function Xs(e,t){Ms.call(this),this.h=e||1,this.g=t||Iu,this.j=Pu(this.lb,this),this.l=Date.now()}function Ys(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Js(e,t,n){if("function"===typeof e)n&&(e=Pu(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Pu(e.handleEvent,e)}return 2147483647<Number(t)?-1:Iu.setTimeout(e,t||0)}function Zs(e){e.g=Js((function(){e.g=null,e.i&&(e.i=!1,Zs(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Mu(Xs,Ms),(_u=Xs.prototype).ca=!1,_u.R=null,_u.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Fs(this,"tick"),this.ca&&(Ys(this),this.start()))}},_u.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_u.M=function(){Xs.X.M.call(this),Ys(this),delete this.g};var ec=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return pt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Zs(this)}},{key:"M",value:function(){tt(Ze(n.prototype),"M",this).call(this),this.g&&(Iu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Fu);function tc(e){Fu.call(this),this.h=e,this.g={}}Mu(tc,Fu);var nc=[];function rc(e,t,n,r){Array.isArray(n)||(n&&(nc[0]=n.toString()),n=nc);for(var i=0;i<n.length;i++){var a=Is(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ic(e){ms(e.g,(function(e,t){this.g.hasOwnProperty(t)&&As(e)}),e),e.g={}}function ac(){this.g=!0}function oc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Vs(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}tc.prototype.M=function(){tc.X.M.call(this),ic(this)},tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ac.prototype.Aa=function(){this.g=!1},ac.prototype.info=function(){};var uc={},sc=null;function cc(){return sc=sc||new Ms}function lc(e){Bu.call(this,uc.Pa,e)}function fc(e){var t=cc();Fs(t,new lc(t))}function hc(e,t){Bu.call(this,uc.STAT_EVENT,e),this.stat=t}function dc(e){var t=cc();Fs(t,new hc(t,e))}function pc(e,t){Bu.call(this,uc.Qa,e),this.size=t}function vc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Iu.setTimeout((function(){e()}),t)}uc.Pa="serverreachability",Mu(lc,Bu),uc.STAT_EVENT="statevent",Mu(hc,Bu),uc.Qa="timingevent",Mu(pc,Bu);var yc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mc={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function gc(){}function kc(e){return e.h||(e.h=e.i())}function bc(){}gc.prototype.h=null;var wc,_c={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function xc(){Bu.call(this,"d")}function Ec(){Bu.call(this,"c")}function Sc(){}function Ic(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new tc(this),this.O=Cc,e=Zu?125:void 0,this.T=new Xs(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}Mu(xc,Bu),Mu(Ec,Bu),Mu(Sc,gc),Sc.prototype.g=function(){return new XMLHttpRequest},Sc.prototype.i=function(){return{}},wc=new Sc;var Cc=45e3,Nc={},Ac={};function Rc(e,t,n){e.K=1,e.v=Xc(Kc(t)),e.s=n,e.P=!0,Dc(e,null)}function Dc(e,t){e.F=Date.now(),Mc(e),e.A=Kc(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),cl(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Tc,e.g=ff(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ec(Pu(e.La,e,e.g),e.N)),rc(e.S,e.g,"readystatechange",e.ib),t=e.H?gs(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),fc(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Oc(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Pc(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Lc(e,n))==Ac){4==t&&(e.o=4,dc(14),i=!1),oc(e.j,e.m,null,"[Incomplete Response]");break}if(r==Nc){e.o=4,dc(15),oc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}oc(e.j,e.m,r,null),Bc(e,r)}Oc(e)&&r!=Ac&&r!=Nc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,dc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),nf(t),t.K=!0,dc(11))):(oc(e.j,e.m,n,"[Invalid Chunked Response]"),jc(e),Vc(e))}function Lc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ac:(n=Number(t.substring(n,r)),isNaN(n)?Nc:(r+=1)+n>t.length?Ac:(t=t.substr(r,n),e.C=r+n,t))}function Mc(e){e.V=Date.now()+e.O,Fc(e,e.O)}function Fc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vc(Pu(e.gb,e),t)}function Uc(e){e.B&&(Iu.clearTimeout(e.B),e.B=null)}function Vc(e){0==e.l.G||e.I||of(e.l,e)}function jc(e){Uc(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ys(e.T),ic(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Bc(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ml(n.h,e)))if(!e.J&&ml(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;af(n),Ql(n)}tf(n),dc(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=vc(Pu(n.cb,n),6e3));if(1>=yl(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else sf(n,11)}else if((e.J||n.g==e)&&af(n),!zu(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(gl(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,$c(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=lf(r,r.H?r.ka:null,r.V),d.J){kl(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Uc(p),Mc(p)),r.g=d}else ef(r);0<n.i.length&&Xl(n)}else"stop"!=a[0]&&"close"!=a[0]||sf(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?sf(n,7):Wl(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}fc()}catch(a){}}function qc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Cu(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Cu(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Cu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(_u=Ic.prototype).setTimeout=function(e){this.O=e},_u.ib=function(e){e=e.target;var t=this.L;t&&3==Bl(e)?t.l():this.La(e)},_u.La=function(e){try{if(e==this.g)e:{var t=Bl(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Zu||this.g&&(this.h.h||this.g.fa()||ql(this.g)))){this.I||4!=t||7==n||fc(),Uc(this);var r=this.g.aa();this.Y=r;t:if(Oc(this)){var i=ql(this.g);e="";var a=i.length,o=4==Bl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jc(this),Vc(this);var u="";break t}this.h.i=new Iu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zu(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,dc(12),jc(this),Vc(this);break e}oc(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bc(this,r)}this.P?(Pc(this,t,u),Zu&&this.i&&3==t&&(rc(this.S,this.T,"tick",this.hb),this.T.start())):(oc(this.j,this.m,u,null),Bc(this,u)),4==t&&jc(this),this.i&&!this.I&&(4==t?of(this.l,this):(this.i=!1,Mc(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,dc(12)):(this.o=0,dc(13)),jc(this),Vc(this)}}}catch(t){}},_u.hb=function(){if(this.g){var e=Bl(this.g),t=this.g.fa();this.C<t.length&&(Uc(this),Pc(this,e,t),this.i&&4!=e&&Mc(this))}},_u.cancel=function(){this.I=!0,jc(this)},_u.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(fc(),dc(17)),jc(this),this.o=2,Vc(this)):Fc(this,this.V-e)};var zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gc(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Gc){this.h=void 0!==t?t:e.h,Hc(this,e.j),this.s=e.s,this.g=e.g,Wc(this,e.m),this.l=e.l,t=e.i;var n=new al;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Qc(this,n),this.o=e.o}else e&&(n=String(e).match(zc))?(this.h=!!t,Hc(this,n[1]||"",!0),this.s=Yc(n[2]||""),this.g=Yc(n[3]||"",!0),Wc(this,n[4]),this.l=Yc(n[5]||"",!0),Qc(this,n[6]||"",!0),this.o=Yc(n[7]||"")):(this.h=!!t,this.i=new al(null,this.h))}function Kc(e){return new Gc(e)}function Hc(e,t,n){e.j=n?Yc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Qc(e,t,n){t instanceof al?(e.i=t,function(e,t){t&&!e.j&&(ol(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ul(this,t),cl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Jc(t,rl)),e.i=new al(t,e.h))}function $c(e,t,n){e.i.set(t,n)}function Xc(e){return $c(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Yc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Jc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Zc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Zc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Jc(t,el,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Jc(t,el,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Jc(n,"/"==n.charAt(0)?nl:tl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Jc(n,il)),e.join("")};var el=/[#\/\?@]/g,tl=/[#\?:]/g,nl=/[#\?]/g,rl=/[#\?@]/g,il=/#/g;function al(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ol(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ul(e,t){ol(e),t=ll(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function sl(e,t){return ol(e),t=ll(e,t),e.g.has(t)}function cl(e,t,n){ul(e,t),0<n.length&&(e.i=null,e.g.set(ll(e,t),Vu(n)),e.h+=n.length)}function ll(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(_u=al.prototype).add=function(e,t){ol(this),this.i=null,e=ll(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},_u.forEach=function(e,t){ol(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},_u.oa=function(){ol(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},_u.W=function(e){ol(this);var t=[];if("string"===typeof e)sl(this,e)&&(t=t.concat(this.g.get(ll(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},_u.set=function(e,t){return ol(this),this.i=null,sl(this,e=ll(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},_u.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},_u.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var fl=pt((function e(t,n){ft(this,e),this.h=t,this.g=n}));function hl(e){this.l=e||pl,Iu.PerformanceNavigationTiming?e=0<(e=Iu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Iu.g&&Iu.g.Ga&&Iu.g.Ga()&&Iu.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dl,pl=10;function vl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function yl(e){return e.h?1:e.g?e.g.size:0}function ml(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function gl(e,t){e.g?e.g.add(t):e.h=t}function kl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bl(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ct(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Vu(e.i)}function wl(){}function _l(){this.g=new wl}function xl(e,t,n){var r=n||"";try{qc(e,(function(e,n){var i=e;Nu(e)&&(i=Vs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function El(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Sl(e){this.l=e.ac||null,this.j=e.jb||!1}function Il(e,t){Ms.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Tl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hl.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ct(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},wl.prototype.stringify=function(e){return Iu.JSON.stringify(e,void 0)},wl.prototype.parse=function(e){return Iu.JSON.parse(e,void 0)},Mu(Sl,gc),Sl.prototype.g=function(){return new Il(this.l,this.j)},Sl.prototype.i=(dl={},function(){return dl}),Mu(Il,Ms);var Tl=0;function Cl(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Nl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Al(e)}function Al(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(_u=Il.prototype).open=function(e,t){if(this.readyState!=Tl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Al(this)},_u.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Iu).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},_u.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nl(this)),this.readyState=Tl},_u.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Al(this)),this.g&&(this.readyState=3,Al(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Iu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cl(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},_u.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nl(this):Al(this),3==this.readyState&&Cl(this)}},_u.Va=function(e){this.g&&(this.response=this.responseText=e,Nl(this))},_u.Ua=function(e){this.g&&(this.response=e,Nl(this))},_u.ga=function(){this.g&&Nl(this)},_u.setRequestHeader=function(e,t){this.v.append(e,t)},_u.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},_u.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Rl=Iu.JSON.parse;function Dl(e){Ms.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ol,this.K=this.L=!1}Mu(Dl,Ms);var Ol="",Pl=/^https?$/i,Ll=["POST","PUT"];function Ml(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fl(e),Vl(e)}function Fl(e){e.D||(e.D=!0,Fs(e,"complete"),Fs(e,"error"))}function Ul(e){if(e.h&&"undefined"!=typeof Su&&(!e.C[1]||4!=Bl(e)||2!=e.aa()))if(e.v&&4==Bl(e))Js(e.Ha,0,e);else if(Fs(e,"readystatechange"),4==Bl(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(zc)[1]||null;if(!a&&Iu.self&&Iu.self.location){var o=Iu.self.location.protocol;a=o.substr(0,o.length-1)}i=!Pl.test(a?a.toLowerCase():"")}t=i}if(t)Fs(e,"complete"),Fs(e,"success");else{e.m=6;try{var u=2<Bl(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Fl(e)}}finally{Vl(e)}}}function Vl(e,t){if(e.g){jl(e);var n=e.g,r=e.C[0]?Tu:null;e.g=null,e.C=null,t||Fs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function jl(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Iu.clearTimeout(e.A),e.A=null)}function Bl(e){return e.g?e.g.readyState:0}function ql(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ol:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tf){return null}}function zl(e){var t="";return ms(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$c(e,t,n))}function Kl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hl(e){this.Ca=0,this.i=[],this.j=new ac,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Kl("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Kl("baseRetryDelayMs",5e3,e),this.bb=Kl("retryDelaySeedMs",1e4,e),this.$a=Kl("forwardChannelMaxRetries",2,e),this.ta=Kl("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new hl(e&&e.concurrentRequestLimit),this.Fa=new _l,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Wl(e){if($l(e),3==e.G){var t=e.U++,n=Kc(e.F);$c(n,"SID",e.I),$c(n,"RID",t),$c(n,"TYPE","terminate"),Jl(e,n),(t=new Ic(e,e.j,t,void 0)).K=2,t.v=Xc(Kc(n)),n=!1,Iu.navigator&&Iu.navigator.sendBeacon&&(n=Iu.navigator.sendBeacon(t.v.toString(),"")),!n&&Iu.Image&&((new Image).src=t.v,n=!0),n||(t.g=ff(t.l,null),t.g.da(t.v)),t.F=Date.now(),Mc(t)}cf(e)}function Ql(e){e.g&&(nf(e),e.g.cancel(),e.g=null)}function $l(e){Ql(e),e.u&&(Iu.clearTimeout(e.u),e.u=null),af(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Iu.clearTimeout(e.m),e.m=null)}function Xl(e){vl(e.h)||e.m||(e.m=!0,Hs(e.Ja,e),e.C=0)}function Yl(e,t){var n;n=t?t.m:e.U++;var r=Kc(e.F);$c(r,"SID",e.I),$c(r,"RID",n),$c(r,"AID",e.T),Jl(e,r),e.o&&e.s&&Gl(r,e.o,e.s),n=new Ic(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Zl(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),gl(e.h,n),Rc(n,r,t)}function Jl(e,t){e.ia&&ms(e.ia,(function(e,n){$c(t,n,e)})),e.l&&qc({},(function(e,n){$c(t,n,e)}))}function Zl(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Pu(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{xl(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function ef(e){e.g||e.u||(e.Z=1,Hs(e.Ia,e),e.A=0)}function tf(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=vc(Pu(e.Ia,e),uf(e,e.A)),e.A++,!0)}function nf(e){null!=e.B&&(Iu.clearTimeout(e.B),e.B=null)}function rf(e){e.g=new Ic(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Kc(e.sa);$c(t,"RID","rpc"),$c(t,"SID",e.I),$c(t,"CI",e.L?"0":"1"),$c(t,"AID",e.T),$c(t,"TYPE","xmlhttp"),Jl(e,t),e.o&&e.s&&Gl(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Xc(Kc(t)),n.s=null,n.P=!0,Dc(n,e)}function af(e){null!=e.v&&(Iu.clearTimeout(e.v),e.v=null)}function of(e,t){var n=null;if(e.g==t){af(e),nf(e),e.g=null;var r=2}else{if(!ml(e.h,t))return;n=t.D,kl(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Fs(r=cc(),new pc(r,n)),Xl(e)}else ef(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(yl(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=vc(Pu(e.Ja,e,t),uf(e,e.C)),e.C++,!0))}(e,t)||2==r&&tf(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:sf(e,5);break;case 4:sf(e,10);break;case 3:sf(e,6);break;default:sf(e,2)}}function uf(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function sf(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Pu(e.kb,e);n||(n=new Gc("//www.google.com/images/cleardot.gif"),Iu.location&&"http"==Iu.location.protocol||Hc(n,"https"),Xc(n)),function(e,t){var n=new ac;if(Iu.Image){var r=new Image;r.onload=Lu(El,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Lu(El,n,r,"TestLoadImage: error",!1,t),r.onabort=Lu(El,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Lu(El,n,r,"TestLoadImage: timeout",!1,t),Iu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else dc(2);e.G=0,e.l&&e.l.va(t),cf(e),$l(e)}function cf(e){if(e.G=0,e.la=[],e.l){var t=bl(e.h);0==t.length&&0==e.i.length||(ju(e.la,t),ju(e.la,e.i),e.h.i.length=0,Vu(e.i),e.i.length=0),e.l.ua()}}function lf(e,t,n){var r=n instanceof Gc?Kc(n):new Gc(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Wc(r,r.m);else{var i=Iu.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Gc(null,void 0);r&&Hc(a,r),t&&(a.g=t),i&&Wc(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&$c(r,n,t),$c(r,"VER",e.ma),Jl(e,r),r}function ff(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Dl(new Sl({jb:!0})):new Dl(e.ra)).Ka(e.H),t}function hf(){}function df(){if(Yu&&!(10<=Number(ls)))throw Error("Environmental error: no available transport.")}function pf(e,t){Ms.call(this),this.g=new Hl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!zu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zu(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new mf(this)}function vf(e){xc.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yf(){Ec.call(this),this.status=1}function mf(e){this.g=e}(_u=Dl.prototype).Ka=function(e){this.L=e},_u.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wc.g(),this.C=this.u?kc(this.u):kc(wc),this.g.onreadystatechange=Pu(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Ml(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=ct(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Iu.FormData&&e instanceof Iu.FormData,!(0<=Uu(Ll,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=ct(n);try{for(c.s();!(s=c.n()).done;){var l=lt(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jl(this),0<this.B&&((this.K=function(e){return Yu&&ss()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pu(this.qa,this)):this.A=Js(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ml(this,u)}},_u.qa=function(){"undefined"!=typeof Su&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fs(this,"timeout"),this.abort(8))},_u.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Fs(this,"complete"),Fs(this,"abort"),Vl(this))},_u.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vl(this,!0)),Dl.X.M.call(this)},_u.Ha=function(){this.s||(this.F||this.v||this.l?Ul(this):this.fb())},_u.fb=function(){Ul(this)},_u.aa=function(){try{return 2<Bl(this)?this.g.status:-1}catch(dl){return-1}},_u.fa=function(){try{return this.g?this.g.responseText:""}catch(dl){return""}},_u.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Rl(t)}},_u.Ea=function(){return this.m},_u.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(_u=Hl.prototype).ma=8,_u.G=1,_u.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Ic(this,this.j,e,void 0),n=this.s;if(this.S&&(n?bs(n=gs(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Zl(this,t,r),$c(i=Kc(this.F),"RID",e),$c(i,"CVER",22),this.D&&$c(i,"X-HTTP-Session-Id",this.D),Jl(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(zl(n)))+"&"+r:this.o&&Gl(i,this.o,n)),gl(this.h,t),this.Ya&&$c(i,"TYPE","init"),this.O?($c(i,"$req",r),$c(i,"SID","null"),t.Z=!0,Rc(t,i,null)):Rc(t,i,r),this.G=2}}else 3==this.G&&(e?Yl(this,e):0==this.i.length||vl(this.h)||Yl(this))},_u.Ia=function(){if(this.u=null,rf(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=vc(Pu(this.eb,this),e)}},_u.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,dc(10),Ql(this),rf(this))},_u.cb=function(){null!=this.v&&(this.v=null,Ql(this),tf(this),dc(19))},_u.kb=function(e){e?(this.j.info("Successfully pinged google.com"),dc(2)):(this.j.info("Failed to ping google.com"),dc(1))},(_u=hf.prototype).xa=function(){},_u.wa=function(){},_u.va=function(){},_u.ua=function(){},_u.Ra=function(){},df.prototype.g=function(e,t){return new pf(e,t)},Mu(pf,Ms),pf.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;dc(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=lf(e,null,e.V),Xl(e)},pf.prototype.close=function(){Wl(this.g)},pf.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Vs(e),e=n);t.i.push(new fl(t.ab++,e)),3==t.G&&Xl(t)},pf.prototype.M=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,pf.X.M.call(this)},Mu(vf,xc),Mu(yf,Ec),Mu(mf,hf),mf.prototype.xa=function(){Fs(this.g,"a")},mf.prototype.wa=function(e){Fs(this.g,new vf(e))},mf.prototype.va=function(e){Fs(this.g,new yf)},mf.prototype.ua=function(){Fs(this.g,"b")},df.prototype.createWebChannel=df.prototype.g,pf.prototype.send=pf.prototype.u,pf.prototype.open=pf.prototype.m,pf.prototype.close=pf.prototype.close,yc.NO_ERROR=0,yc.TIMEOUT=8,yc.HTTP_ERROR=6,mc.COMPLETE="complete",bc.EventType=_c,_c.OPEN="a",_c.CLOSE="b",_c.ERROR="c",_c.MESSAGE="d",Ms.prototype.listen=Ms.prototype.N,Dl.prototype.listenOnce=Dl.prototype.O,Dl.prototype.getLastError=Dl.prototype.Oa,Dl.prototype.getLastErrorCode=Dl.prototype.Ea,Dl.prototype.getStatus=Dl.prototype.aa,Dl.prototype.getResponseJson=Dl.prototype.Sa,Dl.prototype.getResponseText=Dl.prototype.fa,Dl.prototype.send=Dl.prototype.da,Dl.prototype.setWithCredentials=Dl.prototype.Ka;var gf=Eu.createWebChannelTransport=function(){return new df},kf=Eu.getStatEventTarget=function(){return cc()},bf=Eu.ErrorCode=yc,wf=Eu.EventType=mc,_f=Eu.Event=uc,xf=Eu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ef=Eu.FetchXmlHttpFactory=Sl,Sf=Eu.WebChannel=bc,If=Eu.XhrIo=Dl,Tf="@firebase/firestore",Cf=function(){function e(t){ft(this,e),this.uid=t}return pt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Cf.UNAUTHENTICATED=new Cf(null),Cf.GOOGLE_CREDENTIALS=new Cf("google-credentials-uid"),Cf.FIRST_PARTY=new Cf("first-party-uid"),Cf.MOCK_USER=new Cf("mock-user");var Nf="9.15.0",Af=new un("@firebase/firestore");function Rf(){return Af.logLevel}function Df(e){if(Af.logLevel<=Zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lf);Af.debug.apply(Af,["Firestore (".concat(Nf,"): ").concat(e)].concat(vt(i)))}}function Of(e){if(Af.logLevel<=Zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lf);Af.error.apply(Af,["Firestore (".concat(Nf,"): ").concat(e)].concat(vt(i)))}}function Pf(e){if(Af.logLevel<=Zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lf);Af.warn.apply(Af,["Firestore (".concat(Nf,"): ").concat(e)].concat(vt(i)))}}function Lf(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Mf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Nf,") INTERNAL ASSERTION FAILED: ")+e;throw Of(t),new Error(t)}function Ff(e,t){e||Mf()}function Uf(e,t){return e}var Vf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jf=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return pt(n)}(Lt),Bf=pt((function e(){var t=this;ft(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),qf=pt((function e(t,n){ft(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),zf=function(){function e(){ft(this,e)}return pt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Cf.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Gf=function(){function e(t){ft(this,e),this.token=t,this.changeListener=null}return pt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Kf=function(){function e(t){ft(this,e),this.t=t,this.currentUser=Cf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return pt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Bf;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Bf,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Df("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Df("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bf)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Df("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ff("string"==typeof n.accessToken),new qf(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ff(null===e||"string"==typeof e),new Cf(e)}}]),e}(),Hf=function(){function e(t,n,r,i){ft(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Cf.FIRST_PARTY,this.p=new Map}return pt(e,[{key:"I",value:function(){return this.g?this.g():(Ff(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Wf=function(){function e(t,n,r,i){ft(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return pt(e,[{key:"getToken",value:function(){return Promise.resolve(new Hf(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Cf.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Qf=pt((function e(t){ft(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),$f=function(){function e(t){ft(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return pt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Df("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Df("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Df("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Df("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ff("string"==typeof t.token),e.A=t.token,new Qf(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Xf(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Yf=function(){function e(){ft(this,e)}return pt(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Xf(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Jf(e,t){return e<t?-1:e>t?1:0}function Zf(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function eh(e){return e+"\0"}var th=function(){function e(t,n){if(ft(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new jf(Vf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new jf(Vf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new jf(Vf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jf(Vf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return pt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Jf(this.nanoseconds,e.nanoseconds):Jf(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),nh=function(){function e(t){ft(this,e),this.timestamp=t}return pt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new th(0,0))}},{key:"max",value:function(){return new e(new th(253402300799,999999999))}}]),e}(),rh=function(){function e(t,n,r){ft(this,e),void 0===n?n=0:n>t.length&&Mf(),void 0===r?r=t.length-n:r>t.length-n&&Mf(),this.segments=t,this.offset=n,this.len=r}return pt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ih=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new jf(Vf.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,vt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(rh),ah=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oh=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ah.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new jf(Vf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new jf(Vf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new jf(Vf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new jf(Vf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(rh),uh=function(){function e(t){ft(this,e),this.path=t}return pt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ih.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ih.fromString(t))}},{key:"fromName",value:function(t){return new e(ih.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ih.emptyPath())}},{key:"comparator",value:function(e,t){return ih.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ih(t.slice()))}}]),e}(),sh=pt((function e(t,n,r,i){ft(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ch(e){return e.fields.find((function(e){return 2===e.kind}))}function lh(e){return e.fields.filter((function(e){return 2!==e.kind}))}sh.UNKNOWN_ID=-1;var fh=pt((function e(t,n){ft(this,e),this.fieldPath=t,this.kind=n}));var hh=function(){function e(t,n){ft(this,e),this.sequenceNumber=t,this.offset=n}return pt(e,null,[{key:"empty",value:function(){return new e(0,vh.min())}}]),e}();function dh(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=nh.fromTimestamp(1e9===r?new th(n+1,0):new th(n,r));return new vh(i,uh.empty(),t)}function ph(e){return new vh(e.readTime,e.key,-1)}var vh=function(){function e(t,n,r){ft(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return pt(e,null,[{key:"min",value:function(){return new e(nh.min(),uh.empty(),-1)}},{key:"max",value:function(){return new e(nh.max(),uh.empty(),-1)}}]),e}();function yh(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=uh.comparator(e.documentKey,t.documentKey))?n:Jf(e.largestBatchId,t.largestBatchId)}var mh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gh=function(){function e(){ft(this,e),this.onCommittedListeners=[]}return pt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function kh(e){return bh.apply(this,arguments)}function bh(){return bh=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Vf.FAILED_PRECONDITION&&t.message===mh){e.next=2;break}throw t;case 2:Df("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),bh.apply(this,arguments)}var wh=function(){function e(t){var n=this;ft(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return pt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Mf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ct(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),_h=function(){function e(t,n){var r=this;ft(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Bf,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Sh(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Ah(e.target.error);r.P.reject(new Sh(t,n))}}return pt(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Df("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Th(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Sh(n,t)}}}]),e}(),xh=function(){function e(t,n,r){ft(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(St())&&Of("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return pt(e,[{key:"F",value:function(){var e=Je(Xe().mark((function e(t){var n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Df("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Sh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new jf(Vf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new jf(Vf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Sh(t,n))},i.onupgradeneeded=function(e){Df("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Df("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Je(Xe().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Xe().mark((function e(){var n,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=_h.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),wh.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Df("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Df("SimpleDb","Removing database:",e),Ch(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Tt())return!1;if(e.N())return!0;var t=St(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Eh=function(){function e(t){ft(this,e),this.q=t,this.U=!1,this.K=null}return pt(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Ch(this.q.delete())}}]),e}(),Sh=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,Vf.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return pt(n)}(jf);function Ih(e){return"IndexedDbTransactionError"===e.name}var Th=function(){function e(t){ft(this,e),this.store=t}return pt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Df("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Df("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ch(n)}},{key:"add",value:function(e){return Df("SimpleDb","ADD",this.store.name,e,e),Ch(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ch(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Df("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Df("SimpleDb","DELETE",this.store.name,e),Ch(this.store.delete(e))}},{key:"count",value:function(){return Df("SimpleDb","COUNT",this.store.name),Ch(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new wh((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new wh((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Df("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new wh((function(n,r){t.onerror=function(e){var t=Ah(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new wh((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Eh(i),o=t(i.primaryKey,i.value,a);if(o instanceof wh){var u=o.catch((function(e){return a.done(),wh.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return wh.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ch(e){return new wh((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ah(e.target.error);n(t)}}))}var Nh=!1;function Ah(e){var t=xh.D(St());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new jf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nh||(Nh=!0,setTimeout((function(){throw r}),0)),r}}return e}var Rh=function(){function e(t,n){ft(this,e),this.asyncQueue=t,this.et=n,this.task=null}return pt(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Df("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Df,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ih(e.t4)){e.next=17;break}Df("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,kh(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Dh=function(){function e(t,n){ft(this,e),this.localStore=t,this.persistence=n}return pt(e,[{key:"st",value:function(){var e=Je(Xe().mark((function e(){var t,n=this,r=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return wh.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Df("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Df("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=ph(t);yh(r,n)>0&&(n=r)})),new vh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Oh=function(){function e(t,n){var r=this;ft(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return pt(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Oh.at=-1;var Ph=pt((function e(t,n,r,i,a,o,u,s){ft(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Lh=function(){function e(t,n){ft(this,e),this.projectId=t,this.database=n||"(default)"}return pt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Mh(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fh(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uh(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vh(e){return null==e}function jh(e){return 0===e&&1/e==-1/0}function Bh(e){return"number"==typeof e&&Number.isInteger(e)&&!jh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var qh=function(e){function t(e){ft(this,t),this.binaryString=e}return pt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Jf(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();qh.EMPTY_BYTE_STRING=new qh("");var zh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gh(e){if(Ff(!!e),"string"==typeof e){var t=0,n=zh.exec(e);if(Ff(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Kh(e.seconds),nanos:Kh(e.nanos)}}function Kh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hh(e){return"string"==typeof e?qh.fromBase64String(e):qh.fromUint8Array(e)}function Wh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qh(e){var t=e.mapValue.fields.__previous_value__;return Wh(t)?Qh(t):t}function $h(e){var t=Gh(e.mapValue.fields.__local_write_time__.timestampValue);return new th(t.seconds,t.nanos)}var Xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yh={nullValue:"NULL_VALUE"};function Jh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wh(e)?4:hd(e)?9007199254740991:10:Mf()}function Zh(e,t){if(e===t)return!0;var n=Jh(e);if(n!==Jh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $h(e).isEqual($h(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gh(e.timestampValue),r=Gh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hh(e.bytesValue).isEqual(Hh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Kh(e.geoPointValue.latitude)===Kh(t.geoPointValue.latitude)&&Kh(e.geoPointValue.longitude)===Kh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Kh(e.integerValue)===Kh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Kh(e.doubleValue),r=Kh(t.doubleValue);return n===r?jh(n)===jh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Zf(e.arrayValue.values||[],t.arrayValue.values||[],Zh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mh(n)!==Mh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zh(n[i],r[i])))return!1;return!0}(e,t);default:return Mf()}}function ed(e,t){return void 0!==(e.values||[]).find((function(e){return Zh(e,t)}))}function td(e,t){if(e===t)return 0;var n=Jh(e),r=Jh(t);if(n!==r)return Jf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jf(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Kh(e.integerValue||e.doubleValue),r=Kh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nd(e.timestampValue,t.timestampValue);case 4:return nd($h(e),$h(t));case 5:return Jf(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Hh(e),r=Hh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Jf(n[i],r[i]);if(0!==a)return a}return Jf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Jf(Kh(e.latitude),Kh(t.latitude));return 0!==n?n:Jf(Kh(e.longitude),Kh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=td(n[i],r[i]);if(a)return a}return Jf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Xh.mapValue&&t===Xh.mapValue)return 0;if(e===Xh.mapValue)return 1;if(t===Xh.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Jf(r[o],a[o]);if(0!==u)return u;var s=td(n[r[o]],i[a[o]]);if(0!==s)return s}return Jf(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Mf()}}function nd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jf(e,t);var n=Gh(e),r=Gh(t),i=Jf(n.seconds,r.seconds);return 0!==i?i:Jf(n.nanos,r.nanos)}function rd(e){return id(e)}function id(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Hh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,uh.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ct(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=id(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ct(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(id(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Mf();var t,n}function ad(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function od(e){return!!e&&"integerValue"in e}function ud(e){return!!e&&"arrayValue"in e}function sd(e){return!!e&&"nullValue"in e}function cd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ld(e){return!!e&&"mapValue"in e}function fd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fh(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=fd(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fd(e.arrayValue.values[r]);return n}return Object.assign({},e)}function hd(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dd(e){return"nullValue"in e?Yh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ad(Lh.empty(),uh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Mf()}function pd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ad(Lh.empty(),uh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Xh:Mf()}function vd(e,t){var n=td(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function yd(e,t){var n=td(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var md=pt((function e(t,n){ft(this,e),this.position=t,this.inclusive=n}));function gd(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?uh.comparator(uh.fromName(o.referenceValue),n.key):td(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function kd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Zh(e.position[n],t.position[n]))return!1;return!0}var bd=pt((function e(){ft(this,e)})),wd=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return pt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(td(t,this.value)):null!==t&&Jh(this.value)===Jh(t)&&this.matchesComparison(td(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mf()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Rd(e,t,r):"array-contains"===t?new Ld(e,r):"in"===t?new Md(e,r):"not-in"===t?new Fd(e,r):"array-contains-any"===t?new Ud(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Dd(e,n):new Od(e,n)}}]),n}(bd),_d=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return pt(n,[{key:"matches",value:function(e){return xd(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=ct(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(bd);function xd(e){return"and"===e.op}function Ed(e){return"or"===e.op}function Sd(e){return Id(e)&&xd(e)}function Id(e){var t,n=ct(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof _d)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Td(e){if(e instanceof wd)return e.field.canonicalString()+e.op.toString()+rd(e.value);var t=e.filters.map((function(e){return Td(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Cd(e,t){return e instanceof wd?function(e,t){return t instanceof wd&&e.op===t.op&&e.field.isEqual(t.field)&&Zh(e.value,t.value)}(e,t):e instanceof _d?function(e,t){return t instanceof _d&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Cd(n,t.filters[r])}),!0)}(e,t):void Mf()}function Nd(e,t){var n=e.filters.concat(t);return _d.create(n,e.op)}function Ad(e){return e instanceof wd?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(rd(e.value))}(e):e instanceof _d?function(e){return e.op.toString()+" {"+e.getFilters().map(Ad).join(" ,")+"}"}(e):"Filter"}var Rd=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this,e,r,i)).key=uh.fromName(i.referenceValue),a}return pt(n,[{key:"matches",value:function(e){var t=uh.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(wd),Dd=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,"in",r)).keys=Pd("in",r),i}return pt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wd),Od=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,"not-in",r)).keys=Pd("not-in",r),i}return pt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wd);function Pd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return uh.fromName(e.referenceValue)}))}var Ld=function(e){rt(n,e);var t=ot(n);function n(e,r){return ft(this,n),t.call(this,e,"array-contains",r)}return pt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ud(t)&&ed(t.arrayValue,this.value)}}]),n}(wd),Md=function(e){rt(n,e);var t=ot(n);function n(e,r){return ft(this,n),t.call(this,e,"in",r)}return pt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ed(this.value.arrayValue,t)}}]),n}(wd),Fd=function(e){rt(n,e);var t=ot(n);function n(e,r){return ft(this,n),t.call(this,e,"not-in",r)}return pt(n,[{key:"matches",value:function(e){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ed(this.value.arrayValue,t)}}]),n}(wd),Ud=function(e){rt(n,e);var t=ot(n);function n(e,r){return ft(this,n),t.call(this,e,"array-contains-any",r)}return pt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ed(t.value.arrayValue,e)}))}}]),n}(wd),Vd=pt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ft(this,e),this.field=t,this.dir=n}));function jd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Bd=function(){function e(t,n){ft(this,e),this.comparator=t,this.root=n||zd.EMPTY}return pt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zd.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qd(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qd(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qd(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qd(this.root,e,this.comparator,!0)}}]),e}(),qd=function(){function e(t,n,r,i){ft(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return pt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),zd=function(){function e(t,n,r,i,a){ft(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return pt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Mf();if(this.right.isRed())throw Mf();var e=this.left.check();if(e!==this.right.check())throw Mf();return e+(this.isRed()?0:1)}}]),e}();zd.EMPTY=null,zd.RED=!0,zd.BLACK=!1,zd.EMPTY=new(function(){function e(){ft(this,e),this.size=0}return pt(e,[{key:"key",get:function(){throw Mf()}},{key:"value",get:function(){throw Mf()}},{key:"color",get:function(){throw Mf()}},{key:"left",get:function(){throw Mf()}},{key:"right",get:function(){throw Mf()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zd(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gd=function(){function e(t){ft(this,e),this.comparator=t,this.data=new Bd(this.comparator)}return pt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Kd(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Kd(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Kd=function(){function e(t){ft(this,e),this.iter=t}return pt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hd(e){return e.hasNext()?e.getNext():void 0}var Wd=function(){function e(t){ft(this,e),this.fields=t,t.sort(oh.comparator)}return pt(e,[{key:"unionWith",value:function(t){var n,r=new Gd(oh.comparator),i=ct(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=ct(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ct(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Zf(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Qd=function(){function e(t){ft(this,e),this.value=t}return pt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ld(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(t)}},{key:"setAll",value:function(e){var t=this,n=oh.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=fd(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ld(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Zh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ld(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fh(t,(function(t,n){return e[t]=n}));var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(fd(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function $d(e){var t=[];return Fh(e.fields,(function(e,n){var r=new oh([e]);if(ld(n)){var i=$d(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ct(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Wd(t)}var Xd=function(){function e(t,n,r,i,a,o,u){ft(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return pt(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(nh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Qd.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Qd.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=nh.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,nh.min(),nh.min(),nh.min(),Qd.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,nh.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,nh.min(),nh.min(),Qd.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,nh.min(),nh.min(),Qd.empty(),2)}}]),e}(),Yd=pt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ft(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Jd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Yd(e,t,n,r,i,a,o)}function Zd(e){var t=Uf(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Td(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Vh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return rd(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return rd(e)})).join(",")),t.ft=n}return t.ft}function ep(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!jd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Cd(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kd(e.startAt,t.startAt)&&kd(e.endAt,t.endAt)}function tp(e){return uh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function np(e,t){return e.filters.filter((function(e){return e instanceof wd&&e.field.isEqual(t)}))}function rp(e,t,n){var r,i=Yh,a=!0,o=ct(np(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Yh,c=!0;switch(u.op){case"<":case"<=":s=dd(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Yh}vd({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];vd({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ip(e,t,n){var r,i=Xh,a=!0,o=ct(np(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Xh,c=!0;switch(u.op){case">=":case">":s=pd(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Xh}yd({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];yd({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ap=pt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ft(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function op(e,t,n,r,i,a,o,u){return new ap(e,t,n,r,i,a,o,u)}function up(e){return new ap(e)}function sp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function lp(e){var t,n=ct(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function fp(e){return null!==e.collectionGroup}function hp(e){var t=Uf(e);if(null===t.dt){t.dt=[];var n=lp(t),r=cp(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Vd(n)),t.dt.push(new Vd(oh.keyField(),"asc"));else{var i,a=!1,o=ct(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Vd(oh.keyField(),s))}}}return t.dt}function dp(e){var t=Uf(e);if(!t._t)if("F"===t.limitType)t._t=Jd(t.path,t.collectionGroup,hp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ct(hp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Vd(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new md(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new md(t.startAt.position,t.startAt.inclusive):null;t._t=Jd(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function pp(e,t){t.getFirstInequalityField(),lp(e);var n=e.filters.concat([t]);return new ap(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vp(e,t,n){return new ap(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yp(e,t){return ep(dp(e),dp(t))&&e.limitType===t.limitType}function mp(e){return"".concat(Zd(dp(e)),"|lt:").concat(e.limitType)}function gp(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ad(e)})).join(", "),"]")),Vh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return rd(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return rd(e)})).join(",")),"Target(".concat(t,")")}(dp(e)),"; limitType=").concat(e.limitType,")")}function kp(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ct(hp(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ct(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hp(e),t))&&!(e.endAt&&!function(e,t,n){var r=gd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hp(e),t))}(e,t)}function bp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wp(e){return function(t,n){var r,i=!1,a=ct(hp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=_p(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function _p(e,t,n){var r=e.field.isKeyField()?uh.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?td(r,i):Mf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mf()}}function xp(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(t)?"-0":t}}function Ep(e){return{integerValue:""+e}}function Sp(e,t){return Bh(t)?Ep(t):xp(e,t)}var Ip=pt((function e(){ft(this,e),this._=void 0}));function Tp(e,t,n){return e instanceof Ap?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Rp?Dp(e,t):e instanceof Op?Pp(e,t):function(e,t){var n=Np(e,t),r=Mp(n)+Mp(e.gt);return od(n)&&od(e.gt)?Ep(r):xp(e.yt,r)}(e,t)}function Cp(e,t,n){return e instanceof Rp?Dp(e,t):e instanceof Op?Pp(e,t):n}function Np(e,t){return e instanceof Lp?od(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ap=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n)}(Ip),Rp=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).elements=e,r}return pt(n)}(Ip);function Dp(e,t){var n,r=Fp(t),i=ct(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Zh(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Op=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).elements=e,r}return pt(n)}(Ip);function Pp(e,t){var n,r=Fp(t),i=ct(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Zh(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Lp=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return pt(n)}(Ip);function Mp(e){return Kh(e.integerValue||e.doubleValue)}function Fp(e){return ud(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Up=pt((function e(t,n){ft(this,e),this.field=t,this.transform=n}));var Vp=pt((function e(t,n){ft(this,e),this.version=t,this.transformResults=n})),jp=function(){function e(t,n){ft(this,e),this.updateTime=t,this.exists=n}return pt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Bp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var qp=pt((function e(){ft(this,e)}));function zp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tv(e.key,jp.none()):new Qp(e.key,e.data,jp.none());var n,r=e.data,i=Qd.empty(),a=new Gd(oh.comparator),o=ct(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new $p(e.key,i,new Wd(a.toArray()),jp.none())}function Gp(e,t,n){e instanceof Qp?function(e,t,n){var r=e.value.clone(),i=Yp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $p?function(e,t,n){if(Bp(e.precondition,t)){var r=Yp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kp(e,t,n,r){return e instanceof Qp?function(e,t,n,r){if(!Bp(e.precondition,t))return n;var i=e.value.clone(),a=Jp(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $p?function(e,t,n,r){if(!Bp(e.precondition,t))return n;var i=Jp(e.fieldTransforms,r,t),a=t.data;return a.setAll(Xp(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Bp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hp(e,t){var n,r=null,i=ct(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Np(a.transform,o||null);null!=u&&(null===r&&(r=Qd.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Wp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zf(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rp&&t instanceof Rp||e instanceof Op&&t instanceof Op?Zf(e.elements,t.elements,Zh):e instanceof Lp&&t instanceof Lp?Zh(e.gt,t.gt):e instanceof Ap&&t instanceof Ap}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Qp=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ft(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return pt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qp),$p=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ft(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return pt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(qp);function Xp(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Yp(e,t,n){var r=new Map;Ff(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Cp(o,u,n[i]))}return r}function Jp(e,t,n){var r,i=new Map,a=ct(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Tp(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Zp,ev,tv=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return pt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qp),nv=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return pt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qp),rv=pt((function e(t){ft(this,e),this.count=t}));function iv(e){switch(e){default:return Mf();case Vf.CANCELLED:case Vf.UNKNOWN:case Vf.DEADLINE_EXCEEDED:case Vf.RESOURCE_EXHAUSTED:case Vf.INTERNAL:case Vf.UNAVAILABLE:case Vf.UNAUTHENTICATED:return!1;case Vf.INVALID_ARGUMENT:case Vf.NOT_FOUND:case Vf.ALREADY_EXISTS:case Vf.PERMISSION_DENIED:case Vf.FAILED_PRECONDITION:case Vf.ABORTED:case Vf.OUT_OF_RANGE:case Vf.UNIMPLEMENTED:case Vf.DATA_LOSS:return!0}}function av(e){if(void 0===e)return Of("GRPC error has no .code"),Vf.UNKNOWN;switch(e){case Zp.OK:return Vf.OK;case Zp.CANCELLED:return Vf.CANCELLED;case Zp.UNKNOWN:return Vf.UNKNOWN;case Zp.DEADLINE_EXCEEDED:return Vf.DEADLINE_EXCEEDED;case Zp.RESOURCE_EXHAUSTED:return Vf.RESOURCE_EXHAUSTED;case Zp.INTERNAL:return Vf.INTERNAL;case Zp.UNAVAILABLE:return Vf.UNAVAILABLE;case Zp.UNAUTHENTICATED:return Vf.UNAUTHENTICATED;case Zp.INVALID_ARGUMENT:return Vf.INVALID_ARGUMENT;case Zp.NOT_FOUND:return Vf.NOT_FOUND;case Zp.ALREADY_EXISTS:return Vf.ALREADY_EXISTS;case Zp.PERMISSION_DENIED:return Vf.PERMISSION_DENIED;case Zp.FAILED_PRECONDITION:return Vf.FAILED_PRECONDITION;case Zp.ABORTED:return Vf.ABORTED;case Zp.OUT_OF_RANGE:return Vf.OUT_OF_RANGE;case Zp.UNIMPLEMENTED:return Vf.UNIMPLEMENTED;case Zp.DATA_LOSS:return Vf.DATA_LOSS;default:return Mf()}}(ev=Zp||(Zp={}))[ev.OK=0]="OK",ev[ev.CANCELLED=1]="CANCELLED",ev[ev.UNKNOWN=2]="UNKNOWN",ev[ev.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ev[ev.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ev[ev.NOT_FOUND=5]="NOT_FOUND",ev[ev.ALREADY_EXISTS=6]="ALREADY_EXISTS",ev[ev.PERMISSION_DENIED=7]="PERMISSION_DENIED",ev[ev.UNAUTHENTICATED=16]="UNAUTHENTICATED",ev[ev.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ev[ev.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ev[ev.ABORTED=10]="ABORTED",ev[ev.OUT_OF_RANGE=11]="OUT_OF_RANGE",ev[ev.UNIMPLEMENTED=12]="UNIMPLEMENTED",ev[ev.INTERNAL=13]="INTERNAL",ev[ev.UNAVAILABLE=14]="UNAVAILABLE",ev[ev.DATA_LOSS=15]="DATA_LOSS";var ov=function(){function e(t,n){ft(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return pt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=lt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Fh(this.inner,(function(t,n){var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=lt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Uh(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),uv=new Bd(uh.comparator);function sv(){return uv}var cv=new Bd(uh.comparator);function lv(){for(var e=cv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function fv(e){var t=cv;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hv(){return pv()}function dv(){return pv()}function pv(){return new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var vv=new Bd(uh.comparator),yv=new Gd(uh.comparator);function mv(){for(var e=yv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gv=new Gd(Jf);function kv(){return gv}var bv=function(){function e(t,n,r,i,a){ft(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return pt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,wv.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(nh.min(),i,kv(),sv(),mv())}}]),e}(),wv=function(){function e(t,n,r,i,a){ft(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return pt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,mv(),mv(),mv())}}]),e}(),_v=pt((function e(t,n,r,i){ft(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),xv=pt((function e(t,n){ft(this,e),this.targetId=t,this.Et=n})),Ev=pt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qh.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ft(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Sv=function(){function e(){ft(this,e),this.At=0,this.Rt=Cv(),this.bt=qh.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return pt(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=mv(),t=mv(),n=mv();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mf()}})),new wv(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Cv()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),Iv=function(){function e(t){ft(this,e),this.$t=t,this.Bt=new Map,this.Lt=sv(),this.qt=Tv(),this.Ut=new Gd(Jf)}return pt(e,[{key:"Kt",value:function(e){var t,n=ct(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=ct(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Mf()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(tp(i))if(0===n){var a=new uh(i.path);this.Qt(t,a,Xd.newNoDocument(a,nh.min()))}else Ff(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&tp(a.target)){var o=new uh(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Xd.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=mv();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new bv(e,n,this.Ut,this.Lt,r);return this.Lt=sv(),this.qt=Tv(),this.Ut=new Gd(Jf),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new Sv,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Gd(Jf),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Df("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Sv),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Tv(){return new Bd(uh.comparator)}function Cv(){return new Bd(uh.comparator)}var Nv={asc:"ASCENDING",desc:"DESCENDING"},Av={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rv={and:"AND",or:"OR"},Dv=pt((function e(t,n){ft(this,e),this.databaseId=t,this.wt=n}));function Ov(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Pv(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Lv(e,t){return Ov(e,t.toTimestamp())}function Mv(e){return Ff(!!e),nh.fromTimestamp(function(e){var t=Gh(e);return new th(t.seconds,t.nanos)}(e))}function Fv(e,t){return function(e){return new ih(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uv(e){var t=ih.fromString(e);return Ff(uy(t)),t}function Vv(e,t){return Fv(e.databaseId,t.path)}function jv(e,t){var n=Uv(t);if(n.get(1)!==e.databaseId.projectId)throw new jf(Vf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new jf(Vf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uh(Gv(n))}function Bv(e,t){return Fv(e.databaseId,t)}function qv(e){var t=Uv(e);return 4===t.length?ih.emptyPath():Gv(t)}function zv(e){return new ih(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gv(e){return Ff(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kv(e,t,n){return{name:Vv(e,t),fields:n.value.mapValue.fields}}function Hv(e,t,n){var r=jv(e,t.name),i=Mv(t.updateTime),a=t.createTime?Mv(t.createTime):nh.min(),o=new Qd({mapValue:{fields:t.fields}}),u=Xd.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Wv(e,t){return"found"in t?function(e,t){Ff(!!t.found),t.found.name,t.found.updateTime;var n=jv(e,t.found.name),r=Mv(t.found.updateTime),i=t.found.createTime?Mv(t.found.createTime):nh.min(),a=new Qd({mapValue:{fields:t.found.fields}});return Xd.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ff(!!t.missing),Ff(!!t.readTime);var n=jv(e,t.missing),r=Mv(t.readTime);return Xd.newNoDocument(n,r)}(e,t):Mf()}function Qv(e,t){var n;if(t instanceof Qp)n={update:Kv(e,t.key,t.value)};else if(t instanceof tv)n={delete:Vv(e,t.key)};else if(t instanceof $p)n={update:Kv(e,t.key,t.data),updateMask:oy(t.fieldMask)};else{if(!(t instanceof nv))return Mf();n={verify:Vv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ap)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Op)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lp)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Mf()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Lv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mf()}(e,t.precondition)),n}function $v(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?jp.updateTime(Mv(e.updateTime)):void 0!==e.exists?jp.exists(e.exists):jp.none()}(t.currentDocument):jp.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ff("REQUEST_TIME"===t.setToServerValue),n=new Ap;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Rp(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Op(i)}else"increment"in t?n=new Lp(e,t.increment):Mf();var a=oh.fromServerFormat(t.fieldPath);return new Up(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=jv(e,t.update.name),a=new Qd({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Wd(t.map((function(e){return oh.fromServerFormat(e)})))}(t.updateMask);return new $p(i,a,o,n,r)}return new Qp(i,a,n,r)}if(t.delete){var u=jv(e,t.delete);return new tv(u,n)}if(t.verify){var s=jv(e,t.verify);return new nv(s,n)}return Mf()}function Xv(e,t){return{documents:[Bv(e,t.path)]}}function Yv(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bv(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bv(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ay(_d.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ry(e.field),direction:ey(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Vh(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Jv(e){var t=qv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ff(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Zv(e);return t instanceof _d&&Sd(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Vd(iy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Vh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new md(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new md(n,t)}(n.endAt)),op(t,i,u,o,s,"F",c,l)}function Zv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=iy(e.unaryFilter.field);return wd.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=iy(e.unaryFilter.field);return wd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=iy(e.unaryFilter.field);return wd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=iy(e.unaryFilter.field);return wd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mf()}}(e):void 0!==e.fieldFilter?function(e){return wd.create(iy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _d.create(e.compositeFilter.filters.map((function(e){return Zv(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mf()}}(e.compositeFilter.op))}(e):Mf()}function ey(e){return Nv[e]}function ty(e){return Av[e]}function ny(e){return Rv[e]}function ry(e){return{fieldPath:e.canonicalString()}}function iy(e){return oh.fromServerFormat(e.fieldPath)}function ay(e){return e instanceof wd?function(e){if("=="===e.op){if(cd(e.value))return{unaryFilter:{field:ry(e.field),op:"IS_NAN"}};if(sd(e.value))return{unaryFilter:{field:ry(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cd(e.value))return{unaryFilter:{field:ry(e.field),op:"IS_NOT_NAN"}};if(sd(e.value))return{unaryFilter:{field:ry(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ry(e.field),op:ty(e.op),value:e.value}}}(e):e instanceof _d?function(e){var t=e.getFilters().map((function(e){return ay(e)}));return 1===t.length?t[0]:{compositeFilter:{op:ny(e.op),filters:t}}}(e):Mf()}function oy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function uy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function sy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ly(t)),t=cy(e.get(n),t);return ly(t)}function cy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ly(e){return e+"\x01\x01"}function fy(e){var t=e.length;if(Ff(t>=2),2===t)return Ff("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ih.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Mf(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Mf()}a=o+2}return new ih(r)}var hy=["userId","batchId"];function dy(e,t){return[e,sy(t)]}function py(e,t,n){return[e,sy(t),n]}var vy={},yy=["prefixPath","collectionGroup","readTime","documentId"],my=["prefixPath","collectionGroup","documentId"],gy=["collectionGroup","readTime","prefixPath","documentId"],ky=["canonicalId","targetId"],by=["targetId","path"],wy=["path","targetId"],_y=["collectionId","parent"],xy=["indexId","uid"],Ey=["uid","sequenceNumber"],Sy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Iy=["indexId","uid","orderedDocumentKey"],Ty=["userId","collectionPath","documentId"],Cy=["userId","collectionPath","largestBatchId"],Ny=["userId","collectionGroup","largestBatchId"],Ay=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ry=[].concat(vt(Ay),["documentOverlays"]),Dy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oy=Dy,Py=[].concat(Oy,["indexConfiguration","indexState","indexEntries"]),Ly=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return pt(n)}(gh);function My(e,t){var n=Uf(e);return xh.M(n.se,t)}var Fy=function(){function e(t,n,r,i){ft(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return pt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Gp(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ct(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Kp(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=ct(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Kp(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dv();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=zp(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(nh.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mv())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Zf(this.mutations,e.mutations,(function(e,t){return Wp(e,t)}))&&Zf(this.baseMutations,e.baseMutations,(function(e,t){return Wp(e,t)}))}}]),e}(),Uy=function(){function e(t,n,r,i){ft(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return pt(e,null,[{key:"from",value:function(t,n,r){Ff(t.mutations.length===r.length);for(var i=vv,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Vy=function(){function e(t,n){ft(this,e),this.largestBatchId=t,this.mutation=n}return pt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),jy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nh.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qh.EMPTY_BYTE_STRING;ft(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return pt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),By=pt((function e(t){ft(this,e),this.ie=t}));function qy(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vv(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ov(e,t.version.toTimestamp()),createTime:Ov(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gy(t.version)};else{if(!t.isUnknownDocument())return Mf();r.unknownDocument={path:n.path.toArray(),version:Gy(t.version)}}return r}function zy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Gy(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ky(e){var t=new th(e.seconds,e.nanoseconds);return nh.fromTimestamp(t)}function Hy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return $v(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return $v(e.ie,t)})),u=th.fromMillis(t.localWriteTimeMs);return new Fy(t.batchId,u,n,o)}function Wy(e){var t,n,r=Ky(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ky(e.lastLimboFreeSnapshotVersion):nh.min();return void 0!==e.query.documents?(Ff(1===(n=e.query).documents.length),t=dp(up(qv(n.documents[0])))):t=function(e){return dp(Jv(e))}(e.query),new jy(t,e.targetId,0,e.lastListenSequenceNumber,r,i,qh.fromBase64String(e.resumeToken))}function Qy(e,t){var n,r=Gy(t.snapshotVersion),i=Gy(t.lastLimboFreeSnapshotVersion);n=tp(t.target)?Xv(e.ie,t.target):Yv(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Zd(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function $y(e){var t=Jv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vp(t,t.limit,"L"):t}function Xy(e,t){return new Vy(t.largestBatchId,$v(e.ie,t.overlayMutation))}function Yy(e,t){var n=t.path.lastSegment();return[e,sy(t.path.popLast()),n]}function Jy(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Gy(r.readTime),documentKey:sy(r.documentKey.path),largestBatchId:r.largestBatchId}}var Zy=function(){function e(){ft(this,e)}return pt(e,[{key:"getBundleMetadata",value:function(e,t){return em(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ky(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return em(e).put({bundleId:(n=t).id,createTime:Gy(Mv(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return tm(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:$y(t.bundledQuery),readTime:Ky(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return tm(e).put(function(e){return{name:e.name,readTime:Gy(Mv(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function em(e){return My(e,"bundles")}function tm(e){return My(e,"namedQueries")}var nm=function(){function e(t,n){ft(this,e),this.yt=t,this.userId=n}return pt(e,[{key:"getOverlay",value:function(e,t){var n=this;return rm(e).get(Yy(this.userId,t)).next((function(e){return e?Xy(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=hv();return wh.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Vy(t,a);i.push(r.oe(e,o))})),wh.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(sy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(rm(e).Y("collectionPathOverlayIndex",i))})),wh.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hv(),a=sy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return rm(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=ct(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Xy(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hv(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rm(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Xy(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return rm(e).put(function(e,t,n){var r=lt(Yy(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Qv(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function rm(e){return My(e,"documentOverlays")}var im=function(){function e(){ft(this,e)}return pt(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Kh(e.integerValue));else if("doubleValue"in e){var n=Kh(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),jh(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hh(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?hd(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Mf()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),uh.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function am(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function om(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=am(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}im.Ie=new im;var um=function(){function e(){ft(this,e),this.buffer=new Uint8Array(1024),this.position=0}return pt(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=om(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=om(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),sm=function(){function e(t){ft(this,e),this.$e=t}return pt(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),cm=function(){function e(t){ft(this,e),this.$e=t}return pt(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),lm=function(){function e(){ft(this,e),this.$e=new um,this.Be=new sm(this.$e),this.Le=new cm(this.$e)}return pt(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),fm=function(){function e(t,n,r,i){ft(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return pt(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function hm(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=dm(e.arrayValue,t.arrayValue))?n:0!==(n=dm(e.directionalValue,t.directionalValue))?n:uh.comparator(e.documentKey,t.documentKey)}function dm(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var pm=function(){function e(t){ft(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=ct(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return pt(e,[{key:"je",value:function(e){Ff(e.collectionGroup===this.collectionId);var t=ch(e);if(void 0!==t&&!this.We(t))return!1;for(var n=lh(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=ct(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function vm(e){var t,n;if(Ff(e instanceof wd||e instanceof _d),e instanceof wd){if(e instanceof Md){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return wd.create(e.field,"==",t)})))||[];return _d.create(r,"or")}return e}var i=e.filters.map((function(e){return vm(e)}));return _d.create(i,e.op)}function ym(e){if(0===e.getFilters().length)return[];var t=bm(vm(e));return Ff(km(t)),mm(t)||gm(t)?[t]:t.getFilters()}function mm(e){return e instanceof wd}function gm(e){return e instanceof _d&&Sd(e)}function km(e){return mm(e)||gm(e)||function(e){if(e instanceof _d&&Ed(e)){var t,n=ct(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!mm(r)&&!gm(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function bm(e){if(Ff(e instanceof wd||e instanceof _d),e instanceof wd)return e;if(1===e.filters.length)return bm(e.filters[0]);var t=e.filters.map((function(e){return bm(e)})),n=_d.create(t,e.op);return km(n=xm(n))?n:(Ff(n instanceof _d),Ff(xd(n)),Ff(n.filters.length>1),n.filters.reduce((function(e,t){return wm(e,t)})))}function wm(e,t){var n;return Ff(e instanceof wd||e instanceof _d),Ff(t instanceof wd||t instanceof _d),n=e instanceof wd?t instanceof wd?function(e,t){return _d.create([e,t],"and")}(e,t):_m(e,t):t instanceof wd?_m(t,e):function(e,t){if(Ff(e.filters.length>0&&t.filters.length>0),xd(e)&&xd(t))return Nd(e,t.getFilters());var n=Ed(e)?e:t,r=Ed(e)?t:e,i=n.filters.map((function(e){return wm(e,r)}));return _d.create(i,"or")}(e,t),xm(n)}function _m(e,t){if(xd(t))return Nd(t,e.getFilters());var n=t.filters.map((function(t){return wm(e,t)}));return _d.create(n,"or")}function xm(e){if(Ff(e instanceof wd||e instanceof _d),e instanceof wd)return e;var t=e.getFilters();if(1===t.length)return xm(t[0]);if(Id(e))return e;var n=t.map((function(e){return xm(e)})),r=[];return n.forEach((function(t){t instanceof wd?r.push(t):t instanceof _d&&(t.op===e.op?r.push.apply(r,vt(t.filters)):r.push(t))})),1===r.length?r[0]:_d.create(r,e.op)}var Em=function(){function e(){ft(this,e),this.Je=new Sm}return pt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),wh.resolve()}},{key:"getCollectionParents",value:function(e,t){return wh.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return wh.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return wh.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return wh.resolve(null)}},{key:"getIndexType",value:function(e,t){return wh.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return wh.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return wh.resolve(null)}},{key:"getMinOffset",value:function(e,t){return wh.resolve(vh.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return wh.resolve(vh.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return wh.resolve()}},{key:"updateIndexEntries",value:function(e,t){return wh.resolve()}}]),e}(),Sm=function(){function e(){ft(this,e),this.index={}}return pt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gd(ih.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gd(ih.comparator)).toArray()}}]),e}(),Im=new Uint8Array(0),Tm=function(){function e(t,n){ft(this,e),this.user=t,this.databaseId=n,this.Ye=new Sm,this.Xe=new ov((function(e){return Zd(e)}),(function(e,t){return ep(e,t)})),this.uid=t.uid||""}return pt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:sy(i)};return Cm(e).put(a)}return wh.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[eh(t),""],!1,!0);return Cm(e).W(r).next((function(e){var r,i=ct(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(fy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Am(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Rm(e);return a.next((function(e){o.put(Jy(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Am(e),r=Rm(e),i=Nm(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Nm(e),i=!0,a=new Map;return wh.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=mv(),o=[];return wh.forEach(a,(function(i,a){var u;Df("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Zd(t)));var s=function(e,t){var n=ch(t);if(void 0===n)return null;var r,i=ct(np(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ct(lh(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ct(np(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ct(lh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?rp(e,o.fieldPath,e.startAt):ip(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new md(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ct(lh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ip(e,o.fieldPath,e.endAt):rp(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new md(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return wh.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=uh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return wh.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:ym(_d.create(e.filters,"and")).map((function(t){return Jd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.rn(t[s/c]):Im,h=u.on(e,f,n[s%c],r),d=u.un(e,f,i[s%c],a),p=o.map((function(t){return u.on(e,f,t,!0)}));l.push.apply(l,vt(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"on",value:function(e,t,n,r){var i=new fm(e,uh.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new fm(e,uh.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new pm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return wh.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Gd(oh.comparator),r=!1,i=ct(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=ct(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=ct(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new lm,i=ct(lh(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);im.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new lm;return im.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new lm;return im.Ie.ue(ad(this.databaseId,t),n.qe(function(e){var t=lh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new lm);var i,a=0,o=ct(lh(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ct(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&ud(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);im.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=vt(e),a=[],o=ct(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ct(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new lm;f.seed(l.Fe()),im.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof wd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Am(e),i=Rm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return wh.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new hh(t.sequenceNumber,new vh(Ky(t.readTime),new uh(fy(t.documentKey)),t.largestBatchId)):hh.empty(),r=e.fields.map((function(e){var t=lt(e,2),n=t[0],r=t[1];return new fh(oh.fromServerFormat(n),r)}));return new sh(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Jf(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Am(e),a=Rm(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return wh.forEach(t,(function(t){return a.put(Jy(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return wh.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?wh.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),wh.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?wh.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return Nm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return Nm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=Nm(e),i=new Gd(hm);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new fm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Gd(hm),r=this.cn(t,e);if(null==r)return n;var i=ch(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ud(a)){var o,u=ct(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new fm(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new fm(t.indexId,e.key,Im,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;Df("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hd(a),s=Hd(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hd(o)):l?(i(u),u=Hd(a)):(u=Hd(a),s=Hd(o))}}(r,i,hm,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),wh.waitFor(o)}},{key:"dn",value:function(e){var t=1;return Rm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return hm(e,t)})).filter((function(e,t,n){return!t||0!==hm(e,n[t-1])}));var r=[];r.push(e);var i,a=ct(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=hm(o,e),s=hm(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Im,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Im,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return hm(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Dm)}},{key:"getMinOffset",value:function(e,t){var n=this;return wh.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||Mf()}))})).next(Dm)}}]),e}();function Cm(e){return My(e,"collectionParents")}function Nm(e){return My(e,"indexEntries")}function Am(e){return My(e,"indexConfiguration")}function Rm(e){return My(e,"indexState")}function Dm(e){Ff(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;yh(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vh(t.readTime,t.documentKey,n)}var Om={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pm=function(){function e(t,n,r){ft(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return pt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Lm(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ff(1===u)})));var c,l=[],f=ct(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=py(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return wh.waitFor(a).next((function(){return l}))}function Mm(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Mf();t=e.noDocument}return JSON.stringify(t).length}Pm.DEFAULT_COLLECTION_PERCENTILE=10,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pm.DEFAULT=new Pm(41943040,Pm.DEFAULT_COLLECTION_PERCENTILE,Pm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pm.DISABLED=new Pm(-1,0,0);var Fm=function(){function e(t,n,r,i){ft(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return pt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vm(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=jm(e),o=Vm(e);return o.add({}).next((function(u){Ff("number"==typeof u);var s,c=new Fy(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Qv(e.ie,t)})),i=n.mutations.map((function(t){return Qv(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new Gd((function(e,t){return Jf(e.canonicalString(),t.canonicalString())})),d=ct(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=py(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,vy))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),wh.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Vm(e).get(t).next((function(e){return e?(Ff(e.userId===n.userId),Hy(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?wh.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Vm(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ff(t.batchId>=r),a=Hy(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vm(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vm(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Hy(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=dy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return jm(e).Z({range:i},(function(r,i,o){var u=lt(r,3),s=u[0],c=u[1],l=u[2],f=fy(c);if(s===n.userId&&t.path.isEqual(f))return Vm(e).get(l).next((function(e){if(!e)throw Mf();Ff(e.userId===n.userId),a.push(Hy(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gd(Jf),i=[];return t.forEach((function(t){var a=dy(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=jm(e).Z({range:o},(function(e,i,a){var o=lt(e,3),u=o[0],s=o[1],c=o[2],l=fy(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),wh.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=dy(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Gd(Jf);return jm(e).Z({range:o},(function(e,t,a){var o=lt(e,3),s=o[0],c=o[1],l=o[2],f=fy(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Vm(e).get(t).next((function(e){if(null===e)throw Mf();Ff(e.userId===n.userId),r.push(Hy(n.yt,e))})))})),wh.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Lm(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),wh.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wh.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return jm(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=fy(e[1]);i.push(a)}else r.done()})).next((function(){Ff(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Um(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Bm(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return Ff(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Um(e,t,n){var r=dy(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return jm(e).Z({range:a,X:!0},(function(e,n,r){var a=lt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Vm(e){return My(e,"mutations")}function jm(e){return My(e,"documentMutations")}function Bm(e){return My(e,"mutationQueues")}var qm=function(){function e(t){ft(this,e),this.bn=t}return pt(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),zm=function(){function e(t,n){ft(this,e),this.referenceDelegate=t,this.yt=n}return pt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new qm(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return nh.fromTimestamp(new th(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Gm(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Ff(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Gm(e).Z((function(o,u){var s=Wy(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return wh.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Gm(e).Z((function(e,n){var r=Wy(n);t(r)}))}},{key:"Vn",value:function(e){return Km(e).get("targetGlobalKey").next((function(e){return Ff(null!==e),e}))}},{key:"Sn",value:function(e,t){return Km(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Gm(e).put(Qy(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Zd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gm(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Wy(n);ep(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Hm(e);return t.forEach((function(t){var o=sy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),wh.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Hm(e);return wh.forEach(t,(function(t){var a=sy(t.path);return wh.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Hm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Hm(e),i=mv();return r.Z({range:n,X:!0},(function(e,t,n){var r=fy(e[1]),a=new uh(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=sy(t.path),r=IDBKeyRange.bound([n],[eh(n)],!1,!0),i=0;return Hm(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=lt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Gm(e).get(t).next((function(e){return e?Wy(e):null}))}}]),e}();function Gm(e){return My(e,"targets")}function Km(e){return My(e,"targetGlobal")}function Hm(e){return My(e,"targetDocuments")}function Wm(e,t){var n=lt(e,2),r=n[0],i=n[1],a=lt(t,2),o=a[0],u=a[1],s=Jf(r,o);return 0===s?Jf(i,u):s}var Qm=function(){function e(t){ft(this,e),this.xn=t,this.buffer=new Gd(Wm),this.Nn=0}return pt(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Wm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$m=function(){function e(t,n,r){ft(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return pt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Df("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ih(e.t0)){e.next=12;break}Df("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,kh(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Xm=function(){function e(t,n){ft(this,e),this.$n=t,this.params=n}return pt(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return wh.resolve(Oh.at);var r=new Qm(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Df("LruGarbageCollector","Garbage collection skipped; disabled"),wh.resolve(Om)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Df("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Om):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Df("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Rf()<=Zt.DEBUG&&Df("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),wh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ym=function(){function e(t,n){ft(this,e),this.db=t,this.garbageCollector=function(e,t){return new Xm(e,t)}(this,n)}return pt(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Jm(e,n)}},{key:"removeReference",value:function(e,t,n){return Jm(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Jm(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Bm(e).tt((function(r){return Um(e,r,t).next((function(e){return e&&(n=!0),wh.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,nh.min()),Hm(e).delete([0,sy(o.path)])}))}));i.push(s)}})).next((function(){return wh.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Jm(e,t)}},{key:"Kn",value:function(e,t){var n,r=Hm(e),i=Oh.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=lt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Oh.at&&t(new uh(fy(n)),i),i=s,n=u):i=Oh.at})).next((function(){i!==Oh.at&&t(new uh(fy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Jm(e,t){return Hm(e).put(function(e,t){return{targetId:0,path:sy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Zm=function(){function e(){ft(this,e),this.changes=new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return pt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Xd.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wh.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),eg=function(){function e(t){ft(this,e),this.yt=t}return pt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ig(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return ig(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],zy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Xd.newInvalidDocument(t);return ig(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ag(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Xd.newInvalidDocument(t)};return ig(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ag(t))},(function(e,i){r={document:n.jn(t,i),size:Mm(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sv();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=sv(),i=new Bd(uh.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Mm(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return wh.resolve();var r=new Gd(ug);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(ag(r.first()),ag(r.last())),a=r.getIterator(),o=a.getNext();return ig(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=uh.fromSegments([].concat(vt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ug(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(ag(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),zy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ig(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=sv(),i=ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(uh.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sv(),o=og(t,n),u=og(t,vh.max());return ig(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(uh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ng(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return rg(e).get("remoteDocumentGlobalKey").next((function(e){return Ff(!!e),e}))}},{key:"Qn",value:function(e,t){return rg(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Hv(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=uh.fromSegments(t.noDocument.path),i=Ky(t.noDocument.readTime);n=Xd.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Mf();var a=uh.fromSegments(t.unknownDocument.path),o=Ky(t.unknownDocument.version);n=Xd.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new th(e[0],e[1]);return nh.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(nh.min()))return n}return Xd.newInvalidDocument(e)}}]),e}();function tg(e){return new eg(e)}var ng=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return pt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gd((function(e,t){return Jf(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=qy(t.Yn.yt,o);i=i.add(a.path.popLast());var c=Mm(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=qy(t.Yn.yt,o.convertToNoDocument(nh.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),wh.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Zm);function rg(e){return My(e,"remoteDocumentGlobal")}function ig(e){return My(e,"remoteDocumentsV14")}function ag(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function og(e,t){var n=t.documentKey.path.toArray();return[e,zy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ug(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Jf(n[a],r[a]))return i;return(i=Jf(n.length,r.length))||((i=Jf(n[n.length-2],r[r.length-2]))||Jf(n[n.length-1],r[r.length-1]))}var sg=pt((function e(t,n){ft(this,e),this.overlayedDocument=t,this.mutatedFields=n})),cg=function(){function e(t,n,r,i){ft(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return pt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Kp(r.mutation,e,Wd.empty(),th.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mv()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mv(),i=hv();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lv();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hv();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mv())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sv(),a=pv(),o=pv();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $p)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Kp(o.mutation,t,o.mutation.getFieldMask(),th.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new sg(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=pv(),i=new Bd((function(e,t){return e-t})),a=mv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ct(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Wd.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||mv()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=dv();c.forEach((function(e){if(!a.has(e)){var n=zp(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return wh.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return uh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):wh.resolve(hv()),u=-1,s=a;return o.next((function(t){return wh.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?wh.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,mv())})).next((function(e){return{batchId:u,changes:fv(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new uh(t)).next((function(e){var t=lv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lv();return this.indexManager.getCollectionParents(e,i).next((function(o){return wh.forEach(o,(function(o){var u=function(e,t){return new ap(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Xd.newInvalidDocument(n)))}));var n=lv();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Kp(a.mutation,i,Wd.empty(),th.now()),kp(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),lg=function(){function e(t){ft(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return pt(e,[{key:"getBundleMetadata",value:function(e,t){return wh.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Mv(n.createTime)}),wh.resolve()}},{key:"getNamedQuery",value:function(e,t){return wh.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:$y(e.bundledQuery),readTime:Mv(e.readTime)}}(t)),wh.resolve()}}]),e}(),fg=function(){function e(){ft(this,e),this.overlays=new Bd(uh.comparator),this.es=new Map}return pt(e,[{key:"getOverlay",value:function(e,t){return wh.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hv();return wh.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),wh.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),wh.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hv(),i=t.length+1,a=new uh(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return wh.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bd((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=hv(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=hv(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return wh.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Vy(t,n));var a=this.es.get(t);void 0===a&&(a=mv(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),hg=function(){function e(){ft(this,e),this.ns=new Gd(dg.ss),this.rs=new Gd(dg.os)}return pt(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new dg(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new dg(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new uh(new ih([])),r=new dg(n,e),i=new dg(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new uh(new ih([])),n=new dg(t,e),r=new dg(t,e+1),i=mv();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new dg(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),dg=function(){function e(t,n){ft(this,e),this.key=t,this._s=n}return pt(e,null,[{key:"ss",value:function(e,t){return uh.comparator(e.key,t.key)||Jf(e._s,t._s)}},{key:"os",value:function(e,t){return Jf(e._s,t._s)||uh.comparator(e.key,t.key)}}]),e}(),pg=function(){function e(t,n){ft(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Gd(dg.ss)}return pt(e,[{key:"checkEmpty",value:function(e){return wh.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Fy(i,t,n,r);this.mutationQueue.push(a);var o,u=ct(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new dg(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return wh.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return wh.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return wh.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return wh.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return wh.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new dg(t,0),i=new dg(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),wh.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gd(Jf);return t.forEach((function(e){var t=new dg(e,0),i=new dg(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),wh.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;uh.isDocumentKey(i)||(i=i.child(""));var a=new dg(new uh(i),0),o=new Gd(Jf);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),wh.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ff(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return wh.forEach(t.mutations,(function(i){var a=new dg(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new dg(t,0),r=this.gs.firstAfterOrEqual(n);return wh.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,wh.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),vg=function(){function e(t){ft(this,e),this.Es=t,this.docs=new Bd(uh.comparator),this.size=0}return pt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return wh.resolve(n?n.document.mutableCopy():Xd.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Xd.newInvalidDocument(e))})),wh.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=sv(),i=new uh(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||yh(ph(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return wh.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Mf()}},{key:"As",value:function(e,t){return wh.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new yg(this)}},{key:"getSize",value:function(e){return wh.resolve(this.size)}}]),e}(),yg=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).Yn=e,r}return pt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),wh.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Zm),mg=function(){function e(t){ft(this,e),this.persistence=t,this.Rs=new ov((function(e){return Zd(e)}),ep),this.lastRemoteSnapshotVersion=nh.min(),this.highestTargetId=0,this.bs=0,this.Ps=new hg,this.targetCount=0,this.vs=qm.Pn()}return pt(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),wh.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return wh.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return wh.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),wh.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),wh.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new qm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,wh.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),wh.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,wh.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),wh.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return wh.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return wh.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),wh.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),wh.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),wh.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return wh.resolve(n)}},{key:"containsKey",value:function(e,t){return wh.resolve(this.Ps.containsKey(t))}}]),e}(),gg=function(){function e(t,n){var r=this;ft(this,e),this.Vs={},this.overlays={},this.Ss=new Oh(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new mg(this),this.indexManager=new Em,this.remoteDocumentCache=new vg((function(e){return r.referenceDelegate.xs(e)})),this.yt=new By(n),this.Ns=new lg(this.yt)}return pt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fg,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new pg(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Df("MemoryPersistence","Starting transaction:",e);var i=new kg(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return wh.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),kg=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return pt(n)}(gh),bg=function(){function e(t){ft(this,e),this.persistence=t,this.Fs=new hg,this.$s=null}return pt(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Mf()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),wh.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),wh.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),wh.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wh.forEach(this.Ls,(function(r){var i=uh.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,nh.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return wh.or([function(){return wh.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),wg=function(){function e(t){ft(this,e),this.yt=t}return pt(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new _h("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0}),e.createObjectStore("documentMutations")}(e),_g(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=wh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),_g(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return wh.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ty});t.createIndex("collectionPathOverlayIndex",Cy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ny,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yy});t.createIndex("documentKeyIndex",my),t.createIndex("collectionGroupIndex",gy)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:xy}).createIndex("sequenceNumberIndex",Ey,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sy}).createIndex("documentKeyIndex",Iy,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Mm(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return wh.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return wh.forEach(r,(function(r){Ff(r.userId===n.userId);var i=Hy(t.yt,r);return Lm(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new ih(n),o=function(e){return[0,sy(e)]}(a);r.push(t.get(o).next((function(n){return n?wh.resolve():function(n){return t.put({targetId:0,path:sy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return wh.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_y});var n=t.store("collectionParents"),r=new Sm,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:sy(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new ih(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=lt(e,3),r=(n[0],n[1]),a=(n[2],fy(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Wy(r),a=Qy(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new uh(ih.fromString(i.document.name).popFirst(5)):i.noDocument?uh.fromSegments(i.noDocument.path):i.unknownDocument?uh.fromSegments(i.unknownDocument.path):Mf()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return wh.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=tg(this.yt),a=new gg(bg.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:mv();Hy(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),wh.forEach(r,(function(e,r){var o=new Cf(r),u=nm.re(n.yt,o),s=a.getIndexManager(o),c=Fm.re(o,n.yt,s,a.referenceDelegate);return new cg(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ly(t,Oh.at),e).next()}))}))}}]),e}();function _g(e){e.createObjectStore("targetDocuments",{keyPath:by}).createIndex("documentTargetsIndex",wy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ky,{unique:!0}),e.createObjectStore("targetGlobal")}var xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Eg=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(ft(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new jf(Vf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ym(this,i),this.ii=n+"main",this.yt=new By(s),this.ri=new xh(this.ii,this.Xs,new wg(this.yt)),this.Cs=new zm(this.referenceDelegate,this.yt),this.remoteDocumentCache=tg(this.yt),this.Ns=new Zy,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Of("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return pt(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new jf(Vf.FAILED_PRECONDITION,xg);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Oh(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Je(Xe().mark((function n(r){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Je(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ig(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Ih(t))return Df("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Df("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Sg(e).get("owner").next((function(e){return wh.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Ig(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i,a=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=My(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return wh.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=ct(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?wh.resolve(!0):Sg(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new jf(Vf.FAILED_PRECONDITION,xg);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ig(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Df("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Je(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ly(e,Oh.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ig(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Fm.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Tm(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return nm.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Df("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Py:14===i?Oy:13===i?Dy:12===i?Ry:11===i?Ay:void Mf();return this.ri.runTransaction(e,o,u,(function(i){return a=new Ly(i,r.Ss?r.Ss.next():Oh.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Of("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new jf(Vf.FAILED_PRECONDITION,mh);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Sg(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new jf(Vf.FAILED_PRECONDITION,xg)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sg(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Sg(e);return n.get("owner").next((function(e){return t.mi(e)?(Df("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):wh.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Of("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!It()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Df("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Of("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Mu){Of("Failed to set zombie client id.",Mu)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Mu){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return xh.C()}}]),e}();function Sg(e){return My(e,"owner")}function Ig(e){return My(e,"clientMetadata")}function Tg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Cg=function(){function e(t,n,r,i){ft(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return pt(e,null,[{key:"Ci",value:function(t,n){var r,i=mv(),a=mv(),o=ct(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ng=function(){function e(){ft(this,e),this.xi=!1}return pt(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(sp(t))return wh.resolve(null);var r=dp(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=vp(t,null,"F"),r=dp(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=mv.apply(void 0,vt(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,vp(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return sp(t)||r.isEqual(nh.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Rf()<=Zt.DEBUG&&Df("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gp(t)),i.Bi(e,o,t,dh(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Gd(wp(e));return t.forEach((function(t,r){kp(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Rf()<=Zt.DEBUG&&Df("QueryEngine","Using full collection scan to execute query:",gp(t)),this.Ni.getDocumentsMatchingQuery(e,t,vh.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ag=function(){function e(t,n,r,i){ft(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Bd(Jf),this.Ui=new ov((function(e){return Zd(e)}),ep),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return pt(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function Rg(e,t,n,r){return new Ag(e,t,n,r)}function Dg(e,t){return Og.apply(this,arguments)}function Og(){return Og=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=mv(),s=ct(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ct(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ct(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ct(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Og.apply(this,arguments)}function Pg(e,t){var n=Uf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=wh.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ff(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mv(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Lg(e){var t=Uf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Mg(e,t){var n=Uf(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(qh.EMPTY_BYTE_STRING,nh.min()).withLastLimboFreeSnapshotVersion(nh.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=sv(),s=mv();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Fg(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(nh.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return wh.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function Fg(e,t,n){var r=mv(),i=mv();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sv();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(nh.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Df("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Ug(e,t){var n=Uf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Vg(e,t){var n=Uf(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,wh.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new jy(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function jg(e,t,n){return Bg.apply(this,arguments)}function Bg(){return Bg=Je(Xe().mark((function e(t,n,r){var i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Uf(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ih(e.t1)){e.next=12;break}throw e.t1;case 12:Df("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Bg.apply(this,arguments)}function qg(e,t,n){var r=Uf(e),i=nh.min(),a=mv();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Uf(e),i=r.Ui.get(n);return void 0!==i?wh.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,dp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:nh.min(),n?a:mv())})).next((function(e){return Kg(r,bp(t),e),{documents:e,Hi:a}}))}))}function zg(e,t){var n=Uf(e),r=Uf(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function Gg(e,t){var n=Uf(e),r=n.Ki.get(t)||nh.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,dh(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Kg(n,t,e),e}))}function Kg(e,t,n){var r=e.Ki.get(t)||nh.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function Hg(e,t,n,r){return Wg.apply(this,arguments)}function Wg(){return Wg=Je(Xe().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Uf(t),o=mv(),u=sv(),s=ct(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,Vg(a,function(e){return dp(up(ih.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Fg(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Wg.apply(this,arguments)}function Qg(e,t){return $g.apply(this,arguments)}function $g(){return $g=Je(Xe().mark((function e(t,n){var r,i,a,o=arguments;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:mv(),e.next=3,Vg(t,dp($y(n.bundledQuery)));case 3:return i=e.sent,a=Uf(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Mv(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(qh.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$g.apply(this,arguments)}function Xg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Yg(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Zg=function(){function e(t,n,r,i){ft(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return pt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new jf(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Of("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ek=function(){function e(t,n,r){ft(this,e),this.targetId=t,this.state=n,this.error=r}return pt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new jf(i.error.code,i.error.message))),a?new e(t,i.state,r):(Of("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),tk=function(){function e(t,n){ft(this,e),this.clientId=t,this.activeTargetIds=n}return pt(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=kv(),o=0;i&&o<r.activeTargetIds.length;++o)i=Bh(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Of("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),nk=function(){function e(t,n){ft(this,e),this.clientId=t,this.onlineState=n}return pt(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Of("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),rk=function(){function e(){ft(this,e),this.activeTargetIds=kv()}return pt(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ik=function(){function e(t,n,r,i,a){ft(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Bd(Jf),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Xg(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new rk),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return pt(e,[{key:"start",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=ct(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Xg(this.persistenceKey,i)))&&(o=tk.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=ct(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Jg(this.persistenceKey,e));if(n){var r=ek.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Jg(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Df("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Df("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Df("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Df("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Of("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Je(Xe().mark((function e(){var r,i,a,o,u,s,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Oh.at;if(null!=e)try{var n=JSON.parse(e);Ff("number"==typeof n),t=n}catch(e){Of("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Oh.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Zg(this.currentUser,e,t,n),i=Yg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Yg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Jg(this.persistenceKey,e),i=new ek(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return tk.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zg.Zi(new Cf(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return ek.Zi(r,t)}},{key:"yr",value:function(e){return nk.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Df("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=kv();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ak=function(){function e(){ft(this,e),this.Lr=new rk,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return pt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new rk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ok=function(){function e(){ft(this,e)}return pt(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),uk=function(){function e(){var t=this;ft(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return pt(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Df("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ct(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Df("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ct(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ck=function(){function e(t){ft(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return pt(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),lk=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return pt(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new If;o.setWithCredentials(!0),o.listenOnce(wf.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case bf.NO_ERROR:var t=o.getResponseJson();Df("Connection","XHR received:",JSON.stringify(t)),i(t);break;case bf.TIMEOUT:Df("Connection",'RPC "'+e+'" timed out'),a(new jf(Vf.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:var n=o.getStatus();if(Df("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vf).indexOf(t)>=0?t:Vf.UNKNOWN}(u.status);a(new jf(s,u.message))}else a(new jf(Vf.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new jf(Vf.UNAVAILABLE,"Connection failed."));break;default:Mf()}}finally{Df("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=gf(),a=kf(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ef({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Df("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ck({Hr:function(e){l?Df("Connection","Not sending because WebChannel is closed:",e):(c||(Df("Connection","Opening WebChannel transport."),s.open(),c=!0),Df("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Sf.EventType.OPEN,(function(){l||Df("Connection","WebChannel transport opened.")})),h(s,Sf.EventType.CLOSE,(function(){l||(l=!0,Df("Connection","WebChannel transport closed"),f.io())})),h(s,Sf.EventType.ERROR,(function(e){l||(l=!0,Pf("Connection","WebChannel transport errored:",e),f.io(new jf(Vf.UNAVAILABLE,"The operation could not be completed")))})),h(s,Sf.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ff(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Df("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Zp[e];if(void 0!==t)return av(t)}(a),u=i.message;void 0===o&&(o=Vf.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new jf(o,u)),s.close()}else Df("Connection","WebChannel received:",n),f.ro(n)}})),h(a,_f.STAT_EVENT,(function(e){e.stat===xf.PROXY?Df("Connection","Detected buffering proxy"):e.stat===xf.NOPROXY&&Df("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){ft(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return pt(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Df("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Df("RestConnection","Received: ",e),e}),(function(t){throw Pf("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=sk[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function fk(){return"undefined"!=typeof window?window:null}function hk(){return"undefined"!=typeof document?document:null}function dk(e){return new Dv(e,!0)}var pk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ft(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return pt(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Df("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),vk=function(){function e(t,n,r,i,a,o,u,s){ft(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new pk(t,n)}return pt(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Vf.RESOURCE_EXHAUSTED?(Of(n.toString()),Of("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Vf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=lt(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new jf(Vf.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Df("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Df("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),yk=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return ft(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return pt(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Ff(void 0===t||"string"==typeof t),qh.fromBase64String(t||"")):(Ff(void 0===t||t instanceof Uint8Array),qh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Vf.UNKNOWN:av(e.code);return new jf(t,e.message||"")}(o);n=new Ev(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=jv(e,s.document.name),l=Mv(s.document.updateTime),f=s.document.createTime?Mv(s.document.createTime):nh.min(),h=new Qd({mapValue:{fields:s.document.fields}}),d=Xd.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new _v(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=jv(e,y.document),g=y.readTime?Mv(y.readTime):nh.min(),k=Xd.newNoDocument(m,g),b=y.removedTargetIds||[];n=new _v([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=jv(e,w.document),x=w.removedTargetIds||[];n=new _v([],x,_,null)}else{if(!("filter"in t))return Mf();t.filter;var E=t.filter;E.targetId;var S=E.count||0,I=new rv(S),T=E.targetId;n=new xv(T,I)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return nh.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?nh.min():t.readTime?Mv(t.readTime):nh.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=zv(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=tp(r)?{documents:Xv(e,r)}:{query:Yv(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Pv(e,t.resumeToken):t.snapshotVersion.compareTo(nh.min())>0&&(n.readTime=Ov(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mf()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=zv(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(vk),mk=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return ft(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return pt(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,tt(Ze(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ff(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Ff(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Mv(e.updateTime):Mv(t);return n.isEqual(nh.min())&&(n=Mv(t)),new Vp(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Mv(e.commitTime);return this.listener.Zo(n,t)}return Ff(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=zv(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qv(t.yt,e)}))};this.Bo(n)}}]),n}(vk),gk=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a){var o;return ft(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return pt(n,[{key:"su",value:function(){if(this.nu)throw new jf(Vf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=lt(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vf.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new jf(Vf.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=lt(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Vf.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new jf(Vf.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return pt((function e(){ft(this,e)}))}());var kk=function(){function e(t,n){ft(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return pt(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Of(t),this.ou=!1):Df("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),bk=pt((function e(t,n,r,i,a){var o=this;ft(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Rk(o),!e.t0){e.next=5;break}return Df("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Uf(t))._u.add(4),e.next=4,xk(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,wk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new kk(r,i)}));function wk(e){return _k.apply(this,arguments)}function _k(){return _k=Je(Xe().mark((function e(t){var n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rk(t)){e.next=18;break}n=ct(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),_k.apply(this,arguments)}function xk(e){return Ek.apply(this,arguments)}function Ek(){return Ek=Je(Xe().mark((function e(t){var n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ct(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ek.apply(this,arguments)}function Sk(e,t){var n=Uf(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Ak(n)?Nk(n):ob(n).ko()&&Tk(n,t))}function Ik(e,t){var n=Uf(e),r=ob(n);n.du.delete(t),r.ko()&&Ck(n,t),0===n.du.size&&(r.ko()?r.Fo():Rk(n)&&n.gu.set("Unknown"))}function Tk(e,t){e.yu.Ot(t.targetId),ob(e).zo(t)}function Ck(e,t){e.yu.Ot(t),ob(e).Ho(t)}function Nk(e){e.yu=new Iv({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),ob(e).start(),e.gu.uu()}function Ak(e){return Rk(e)&&!ob(e).No()&&e.du.size>0}function Rk(e){return 0===Uf(e)._u.size}function Dk(e){e.yu=void 0}function Ok(e){return Pk.apply(this,arguments)}function Pk(){return Pk=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Tk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Pk.apply(this,arguments)}function Lk(e,t){return Mk.apply(this,arguments)}function Mk(){return Mk=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dk(t),Ak(t)?(t.gu.hu(n),Nk(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Mk.apply(this,arguments)}function Fk(e,t,n){return Uk.apply(this,arguments)}function Uk(){return Uk=Je(Xe().mark((function e(t,n,r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Ev&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ct(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Df("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Vk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof _v?t.yu.Kt(n):n instanceof xv?t.yu.Jt(n):t.yu.jt(n),r.isEqual(nh.min())){e.next=29;break}return e.prev=14,e.next=17,Lg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(qh.EMPTY_BYTE_STRING,n.snapshotVersion)),Ck(e,t);var r=new jy(n.target,t,1,n.sequenceNumber);Tk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Df("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Vk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Uk.apply(this,arguments)}function Vk(e,t,n){return jk.apply(this,arguments)}function jk(){return jk=Je(Xe().mark((function e(t,n,r){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ih(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,xk(t);case 5:t.gu.set("Offline"),r||(r=function(){return Lg(t.localStore)}),t.asyncQueue.enqueueRetryable(Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Df("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,wk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Bk(e,t){return t().catch((function(n){return Vk(e,n,t)}))}function qk(e){return zk.apply(this,arguments)}function zk(){return zk=Je(Xe().mark((function e(t){var n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Uf(t),r=ub(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Gk(n)){e.next=19;break}return e.prev=3,e.next=6,Ug(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,Kk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Vk(n,e.t0);case 17:e.next=2;break;case 19:Hk(n)&&Wk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),zk.apply(this,arguments)}function Gk(e){return Rk(e)&&e.fu.length<10}function Kk(e,t){e.fu.push(t);var n=ub(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Hk(e){return Rk(e)&&!ub(e).No()&&e.fu.length>0}function Wk(e){ub(e).start()}function Qk(e){return $k.apply(this,arguments)}function $k(){return $k=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ub(t).eu();case 1:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function Xk(e){return Yk.apply(this,arguments)}function Yk(){return Yk=Je(Xe().mark((function e(t){var n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ub(t),r=ct(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Jk(e,t,n){return Zk.apply(this,arguments)}function Zk(){return Zk=Je(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Uy.from(i,n,r),e.next=3,Bk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,qk(t);case 5:case"end":return e.stop()}}),e)}))),Zk.apply(this,arguments)}function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ub(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!iv(i=n.code)||i===Vf.ABORTED){e.next=7;break}return r=t.fu.shift(),ub(t).Mo(),e.next=5,Bk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,qk(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Hk(t)&&Wk(t);case 5:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e,t){return rb.apply(this,arguments)}function rb(){return rb=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Uf(t)).asyncQueue.verifyOperationInProgress(),Df("RemoteStore","RemoteStore received new credentials"),i=Rk(r),r._u.add(3),e.next=6,xk(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,wk(r);case 12:case"end":return e.stop()}}),e)}))),rb.apply(this,arguments)}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uf(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,wk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,xk(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e){return e.pu||(e.pu=function(e,t,n){var r=Uf(e);return r.su(),new yk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Ok.bind(null,e),Zr:Lk.bind(null,e),Wo:Fk.bind(null,e)}),e.wu.push(function(){var t=Je(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Ak(e)?Nk(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Dk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function ub(e){return e.Iu||(e.Iu=function(e,t,n){var r=Uf(e);return r.su(),new mk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Qk.bind(null,e),Zr:eb.bind(null,e),tu:Xk.bind(null,e),Zo:Jk.bind(null,e)}),e.wu.push(function(){var t=Je(Xe().mark((function t(n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,qk(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Df("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var sb=function(){function e(t,n,r,i,a){ft(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Bf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return pt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jf(Vf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function cb(e,t){if(Of("AsyncQueue","".concat(t,": ").concat(e)),Ih(e))return new jf(Vf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var lb=function(){function e(t){ft(this,e),this.comparator=t?function(e,n){return t(e,n)||uh.comparator(e.key,n.key)}:function(e,t){return uh.comparator(e.key,t.key)},this.keyedMap=lv(),this.sortedSet=new Bd(this.comparator)}return pt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fb=function(){function e(){ft(this,e),this.Tu=new Bd(uh.comparator)}return pt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Mf():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),hb=function(){function e(t,n,r,i,a,o,u,s,c){ft(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return pt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,lb.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),db=pt((function e(){ft(this,e),this.Au=void 0,this.listeners=[]})),pb=pt((function e(){ft(this,e),this.queries=new ov((function(e){return mp(e)}),yp),this.onlineState="Unknown",this.Ru=new Set}));function vb(e,t){return yb.apply(this,arguments)}function yb(){return yb=Je(Xe().mark((function e(t,n){var r,i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uf(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new db),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=cb(e.t0,"Initialization of query '".concat(gp(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&wb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),yb.apply(this,arguments)}function mb(e,t){return gb.apply(this,arguments)}function gb(){return gb=Je(Xe().mark((function e(t,n){var r,i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uf(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function kb(e,t){var n,r=Uf(e),i=!1,a=ct(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ct(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&wb(r)}function bb(e,t,n){var r=Uf(e),i=r.queries.get(t);if(i){var a,o=ct(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function wb(e){e.Ru.forEach((function(e){e.next()}))}var _b=function(){function e(t,n,r){ft(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return pt(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ct(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new hb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=hb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),xb=function(){function e(t,n){ft(this,e),this.ku=t,this.byteLength=n}return pt(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),Eb=function(){function e(t){ft(this,e),this.yt=t}return pt(e,[{key:"Ji",value:function(e){return jv(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Hv(this.yt,e.document,!1):Xd.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Mv(e)}}]),e}(),Sb=function(){function e(t,n,r){ft(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ib(t)}return pt(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=ih.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Eb(this.yt),i=ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=ct(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||mv()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hg(this.localStore,new Eb(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=ct(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Qg(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ib(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Tb=pt((function e(t){ft(this,e),this.key=t})),Cb=pt((function e(t){ft(this,e),this.key=t})),Nb=function(){function e(t,n){ft(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=mv(),this.mutatedKeys=mv(),this.Gu=wp(t),this.Qu=new lb(this.Gu)}return pt(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new fb,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=kp(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mf()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new hb(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fb,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=mv(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Cb(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Tb(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=mv();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return hb.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),Ab=pt((function e(t,n,r){ft(this,e),this.query=t,this.targetId=n,this.view=r})),Rb=pt((function e(t){ft(this,e),this.key=t,this.nc=!1})),Db=function(){function e(t,n,r,i,a,o){ft(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new ov((function(e){return mp(e)}),yp),this.rc=new Map,this.oc=new Set,this.uc=new Bd(uh.comparator),this.cc=new Map,this.ac=new hg,this.hc={},this.lc=new Map,this.fc=qm.vn(),this.onlineState="Unknown",this.dc=void 0}return pt(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Ob(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iw(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Vg(r.localStore,dp(n));case 8:return u=e.sent,r.isPrimaryClient&&Sk(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Lb(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Lb(e,t,n,r,i){return Mb.apply(this,arguments)}function Mb(){return Mb=Je(Xe().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Je(Xe().mark((function e(t,n,r,i){var a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,qg(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(nw(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,qg(t.localStore,n,!0);case 3:return o=e.sent,u=new Nb(n,o.Hi),s=u.Wu(o.documents),c=wv.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),nw(t,r,l.Xu),f=new Ab(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}function Fb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=Je(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uf(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!yp(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,jg(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ik(r.remoteStore,i.targetId),ew(r,i.targetId)})).catch(kh);case 9:e.next=14;break;case 11:return ew(r,i.targetId),e.next=14,jg(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(e,t,n){return jb.apply(this,arguments)}function jb(){return jb=Je(Xe().mark((function e(t,n,r){var i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tw(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Uf(e),a=th.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mv());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=sv(),s=mv();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=ct(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Hp(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new $p(c.key,l,$d(l.value.mapValue),jp.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:fv(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Bd(Jf)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,aw(i,a.changes);case 9:return e.next=11,qk(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=cb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jb.apply(this,arguments)}function Bb(e,t){return qb.apply(this,arguments)}function qb(){return qb=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),e.prev=1,e.next=4,Mg(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Ff(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Ff(n.nc):e.removedDocuments.size>0&&(Ff(n.nc),n.nc=!1))})),e.next=8,aw(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,kh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),qb.apply(this,arguments)}function zb(e,t,n){var r=Uf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Uf(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ct(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&wb(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Gb(e,t,n){return Kb.apply(this,arguments)}function Kb(){return Kb=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s,c;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Uf(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Bd(uh.comparator)).insert(o,Xd.newNoDocument(o,nh.min())),s=mv().add(o),c=new bv(nh.min(),new Map,new Gd(Jf),u,s),e.next=9,Bb(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),iw(i),e.next=16;break;case 14:return e.next=16,jg(i.localStore,n,!1).then((function(){return ew(i,n,r)})).catch(kh);case 16:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}function Hb(e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=Je(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),i=n.batch.batchId,e.prev=1,e.next=4,Pg(r.localStore,n);case 4:return a=e.sent,Zb(r,i,null),Jb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,aw(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,kh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Wb.apply(this,arguments)}function Qb(e,t,n){return $b.apply(this,arguments)}function $b(){return $b=Je(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uf(t),e.prev=1,e.next=4,function(e,t){var n=Uf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ff(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Zb(i,n,r),Jb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,aw(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,kh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$b.apply(this,arguments)}function Xb(e,t){return Yb.apply(this,arguments)}function Yb(){return Yb=Je(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rk((r=Uf(t)).remoteStore)||Df("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Uf(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=cb(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Yb.apply(this,arguments)}function Jb(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Zb(e,t,n){var r=Uf(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function ew(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ct(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||tw(e,t)}))}function tw(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Ik(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),iw(e))}function nw(e,t,n){var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Tb?(e.ac.addReference(a.key,t),rw(e,a)):a instanceof Cb?(Df("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||tw(e,a.key)):Mf()}}catch(o){i.e(o)}finally{i.f()}}function rw(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Df("SyncEngine","New document in limbo: "+n),e.oc.add(r),iw(e))}function iw(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new uh(ih.fromString(t)),r=e.fc.next();e.cc.set(r,new Rb(n)),e.uc=e.uc.insert(n,r),Sk(e.remoteStore,new jy(dp(up(n.path)),r,2,Oh.at))}}function aw(e,t,n){return ow.apply(this,arguments)}function ow(){return ow=Je(Xe().mark((function e(t,n,r){var i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Uf(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Cg.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return wh.forEach(n,(function(t){return wh.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return wh.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ih(e.t0)){e.next=10;break}throw e.t0;case 10:Df("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ct(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function uw(e,t){return sw.apply(this,arguments)}function sw(){return sw=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Uf(t)).currentUser.isEqual(n)){e.next=11;break}return Df("SyncEngine","User change. New user:",n.toKey()),e.next=5,Dg(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new jf(Vf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,aw(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),sw.apply(this,arguments)}function cw(e,t){var n=Uf(e),r=n.cc.get(t);if(r&&r.nc)return mv().add(r.key);var i=mv(),a=n.rc.get(t);if(!a)return i;var o,u=ct(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=Je(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),e.next=3,qg(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&nw(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return dw.apply(this,arguments)}function dw(){return dw=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),e.abrupt("return",Gg(r.localStore,n).then((function(e){return aw(r,e)})));case 2:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t,n,r){return vw.apply(this,arguments)}function vw(){return vw=Je(Xe().mark((function e(t,n,r,i){var a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uf(t),e.next=3,function(e,t){var n=Uf(e),r=Uf(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):wh.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,qk(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Zb(a,n,i||null),Jb(a,n),function(e,t){Uf(Uf(e).mutationQueue).An(t)}(a.localStore,n)):Mf();case 11:return e.next=13,aw(a,o);case 13:e.next=16;break;case 15:Df("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function yw(e,t){return mw.apply(this,arguments)}function mw(){return mw=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Iw(r=Uf(t)),Tw(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,gw(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,ib(r.remoteStore,!0);case 9:o=ct(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Sk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ew(r,t),jg(r.localStore,t,!0)})),Ik(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,gw(r,c);case 21:return function(e){var t=Uf(e);t.cc.forEach((function(e,n){Ik(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Bd(uh.comparator)}(r),r.dc=!1,e.next=25,ib(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function gw(e,t,n){return kw.apply(this,arguments)}function kw(){return kw=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Uf(t),a=[],o=[],u=ct(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,Vg(i.localStore,dp(f[0]));case 11:l=e.sent,h=ct(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,lw(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,zg(i.localStore,c);case 36:return m=e.sent,e.next=39,Vg(i.localStore,m);case 39:return l=e.sent,e.next=42,Lb(i,bw(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),kw.apply(this,arguments)}function bw(e){return op(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ww(e){var t=Uf(e);return Uf(Uf(t.localStore).persistence).vi()}function _w(e,t,n,r){return xw.apply(this,arguments)}function xw(){return xw=Je(Xe().mark((function e(t,n,r,i){var a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Uf(t)).dc){e.next=3;break}return e.abrupt("return",void Df("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Gg(a.localStore,bp(o[0]));case 10:return u=e.sent,s=bv.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,qh.EMPTY_BYTE_STRING),e.next=14,aw(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,jg(a.localStore,n,!0);case 17:return ew(a,n,i),e.abrupt("break",20);case 19:Mf();case 20:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function Ew(e,t,n){return Sw.apply(this,arguments)}function Sw(){return Sw=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Iw(t)).dc){e.next=45;break}a=ct(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Df("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,zg(i.localStore,u);case 12:return s=e.sent,e.next=15,Vg(i.localStore,s);case 15:return c=e.sent,e.next=18,Lb(i,bw(s),c.targetId,!1,c.resumeToken);case 18:Sk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ct(r),e.prev=30,h=Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,jg(i.localStore,t,!1).then((function(){Ik(i.remoteStore,t),ew(i,t)})).catch(kh);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Sw.apply(this,arguments)}function Iw(e){var t=Uf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gb.bind(null,t),t.sc.Wo=kb.bind(null,t.eventManager),t.sc.wc=bb.bind(null,t.eventManager),t}function Tw(e){var t=Uf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qb.bind(null,t),t}function Cw(e,t,n){var r=Uf(e);(function(){var e=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Uf(e),r=Mv(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Ib(i)),a=new Sb(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,aw(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Uf(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Pf("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Nw=function(){function e(){ft(this,e),this.synchronizeTabs=!1}return pt(e,[{key:"initialize",value:function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=dk(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Rg(this.persistence,new Ng,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new gg(bg.Bs,this.yt)}},{key:"gc",value:function(e){return new ak}},{key:"terminate",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Aw=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return pt(n,[{key:"initialize",value:function(){var e=Je(Xe().mark((function e(t){var r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ze(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Tw(this.Ac.syncEngine);case 6:return e.next=8,qk(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Rg(this.persistence,new Ng,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new $m(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Dh(t,this.persistence);return new Rh(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pm.withCacheSize(this.cacheSizeBytes):Pm.DEFAULT;return new Eg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fk(),hk(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new ak}}]),n}(Nw),Rw=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return pt(n,[{key:"initialize",value:function(){var e=Je(Xe().mark((function e(t){var r,i=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ze(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof ik,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:pw.bind(null,r),$r:_w.bind(null,r),Br:Ew.bind(null,r),vi:ww.bind(null,r),Mr:hw.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yw(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=fk();if(!ik.C(t))throw new jf(Vf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ik(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Aw),Dw=function(){function e(){ft(this,e)}return pt(e,[{key:"initialize",value:function(){var e=Je(Xe().mark((function e(t,n){var r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return zb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=uw.bind(null,this.syncEngine),e.next=12,ib(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new pb}},{key:"createDatastore",value:function(e){var t,n=dk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new lk(t));return function(e,t,n,r){return new gk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return zb(o.syncEngine,e,0)},a=uk.C()?new uk:new ok,new bk(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Db(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uf(t),Df("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,xk(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ow(e,t,n){if(!n)throw new jf(Vf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pw(e,t,n,r){if(!0===t&&!0===r)throw new jf(Vf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Lw(e){if(!uh.isDocumentKey(e))throw new jf(Vf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mw(e){if(uh.isDocumentKey(e))throw new jf(Vf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Mf()}function Uw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jf(Vf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fw(e);throw new jf(Vf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Vw(e,t){if(t<=0)throw new jf(Vf.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var jw=new Map,Bw=function(){function e(t){var n;if(ft(this,e),void 0===t.host){if(void 0!==t.ssl)throw new jf(Vf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jf(Vf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Pw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return pt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),qw=function(){function e(t,n,r,i){ft(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bw({}),this._settingsFrozen=!1}return pt(e,[{key:"app",get:function(){if(!this._app)throw new jf(Vf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new jf(Vf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zf;switch(e.type){case"gapi":var t=e.client;return new Wf(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jf(Vf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=jw.get(e);t&&(Df("ComponentProvider","Removing Datastore"),jw.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function zw(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Uw(e,qw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Pf("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Cf.MOCK_USER;else{o=Pt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new jf(Vf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Cf(s)}e._authCredentials=new Gf(new qf(o,u))}}var Gw=function(){function e(t,n,r){ft(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return pt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Hw(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Kw=function(){function e(t,n,r){ft(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return pt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Hw=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this,e,r,up(i)))._path=i,a.type="collection",a}return pt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Gw(this.firestore,null,new uh(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Kw);function Ww(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qt(e),Ow("collection","path",t),e instanceof qw){var a=ih.fromString.apply(ih,[t].concat(r));return Mw(a),new Hw(e,null,a)}if(!(e instanceof Gw||e instanceof Hw))throw new jf(Vf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ih.fromString.apply(ih,[t].concat(r)));return Mw(o),new Hw(e.firestore,null,o)}function Qw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qt(e),1===arguments.length&&(t=Yf.R()),Ow("doc","path",t),e instanceof qw){var a=ih.fromString.apply(ih,[t].concat(r));return Lw(a),new Gw(e,null,new uh(a))}if(!(e instanceof Gw||e instanceof Hw))throw new jf(Vf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ih.fromString.apply(ih,[t].concat(r)));return Lw(o),new Gw(e.firestore,e instanceof Hw?e.converter:null,new uh(o))}function $w(e,t){return e=Qt(e),t=Qt(t),(e instanceof Gw||e instanceof Hw)&&(t instanceof Gw||t instanceof Hw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Xw(e,t){return e=Qt(e),t=Qt(t),e instanceof Kw&&t instanceof Kw&&e.firestore===t.firestore&&yp(e._query,t._query)&&e.converter===t.converter}function Yw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Je(Xe().mark((function r(){var i;return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Jw=function(){function e(t){ft(this,e),this.observer=t,this.muted=!1}return pt(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Of("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Zw=function(){function e(t,n){var r=this;ft(this,e),this.Pc=t,this.yt=n,this.metadata=new Bf,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return pt(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Je(Xe().mark((function e(){var t,n,r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new xb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Je(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Je(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),e_=function(){function e(t){ft(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return pt(e,[{key:"lookup",value:function(){var e=Je(Xe().mark((function e(t){var n,r=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new jf(Vf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),i=zv(r.yt)+"/documents",a={documents:n.map((function(e){return Vv(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Wv(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ff(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new tv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Je(Xe().mark((function e(){var t,n=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=uh.fromPath(t);n.mutations.push(new nv(r,n.precondition(r)))})),e.next=7,function(){var e=Je(Xe().mark((function e(t,n){var r,i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uf(t),i=zv(r.yt)+"/documents",a={writes:n.map((function(e){return Qv(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mf();t=nh.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new jf(Vf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nh.min())?jp.exists(!1):jp.updateTime(t):jp.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nh.min()))throw new jf(Vf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jp.updateTime(t)}return jp.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),t_=function(){function e(t,n,r,i,a){ft(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new pk(this.asyncQueue,"transaction_retry")}return pt(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Je(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new e_(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Vh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!iv(t)}return!1}}]),e}(),n_=function(){function e(t,n,r,i){var a=this;ft(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cf.UNAUTHENTICATED,this.clientId=Yf.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Df("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Df("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return pt(e,[{key:"getConfiguration",value:function(){var e=Je(Xe().mark((function e(){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new jf(Vf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Bf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Je(Xe().mark((function n(){var r;return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=cb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Df("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Dg(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=Je(Xe().mark((function e(t,n){var r,i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,u_(t);case 3:return r=e.sent,Df("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return nb(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return nb(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e){return s_.apply(this,arguments)}function s_(){return s_=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Df("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,r_(t,new Nw);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e){return l_.apply(this,arguments)}function l_(){return l_=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Df("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,a_(t,new Dw);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e){return u_(e).then((function(e){return e.persistence}))}function h_(e){return u_(e).then((function(e){return e.localStore}))}function d_(e){return c_(e).then((function(e){return e.remoteStore}))}function p_(e){return c_(e).then((function(e){return e.syncEngine}))}function v_(e){return c_(e).then((function(e){return e.datastore}))}function y_(e){return m_.apply(this,arguments)}function m_(){return m_=Je(Xe().mark((function e(t){var n,r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ob.bind(null,n.syncEngine),r.onUnlisten=Fb.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function i(){return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Jw({next:function(a){t.enqueueAndForget((function(){return mb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new jf(Vf.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new jf(Vf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new _b(up(n.path),a,{includeMetadataChanges:!0,Nu:!0});return vb(e,o)},i.next=3,y_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function k_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function i(){return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Jw({next:function(n){t.enqueueAndForget((function(){return mb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new jf(Vf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new _b(n,a,{includeMetadataChanges:!0,Nu:!0});return vb(e,o)},i.next=3,y_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var b_=function(){function e(){var t=this;ft(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new pk(this,"async_queue_retry"),this.Wc=function(){var e=hk();e&&Df("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=hk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return pt(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=hk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new Bf;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Je(Xe().mark((function e(){var t=this;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ih(e.t0)){e.next=12;break}throw e.t0;case 12:Df("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Of("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=sb.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Mf()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Je(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=ct(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ct(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function w_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ct(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var __=function(){function e(){ft(this,e),this._progressObserver={},this._taskCompletionResolver=new Bf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return pt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),x_=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a){var o;return ft(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new b_,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return pt(n,[{key:"_terminate",value:function(){return this._firestoreClient||S_(this),this._firestoreClient.terminate()}}]),n}(qw);function E_(e){return e._firestoreClient||S_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function S_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ph(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new n_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function I_(e,t,n){var r=new Bf;return e.asyncQueue.enqueue(Je(Xe().mark((function i(){var a;return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r_(e,n);case 3:return i.next=5,a_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Vf.FAILED_PRECONDITION||e.code===Vf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Pf("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function T_(e){return function(e){return e.asyncQueue.enqueue(Je(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f_(e);case 2:return n=t.sent,t.next=5,d_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Uf(e);return t._u.delete(0),wk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(E_(e=Uw(e,x_)))}function C_(e){return function(e){return e.asyncQueue.enqueue(Je(Xe().mark((function t(){var n,r;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f_(e);case 2:return n=t.sent,t.next=5,d_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Uf(t))._u.add(0),e.next=4,xk(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(E_(e=Uw(e,x_)))}function N_(e,t){var n=E_(e=Uw(e,x_)),r=new __;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Zw(e,t)}(function(e,t){if(e instanceof Uint8Array)return Yw(e,t);if(e instanceof ArrayBuffer)return Yw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,dk(t));e.asyncQueue.enqueueAndForget(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cw,t.next=3,p_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function A_(e,t){return function(e,t){return e.asyncQueue.enqueue(Je(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Uf(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,h_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(E_(e=Uw(e,x_)),t).then((function(t){return t?new Kw(e,null,t.query):null}))}function R_(e){if(e._initialized||e._terminated)throw new jf(Vf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var D_=function(){function e(t){ft(this,e),this._byteString=t}return pt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(qh.fromBase64String(t))}catch(t){throw new jf(Vf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(qh.fromUint8Array(t))}}]),e}(),O_=function(){function e(){ft(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new jf(Vf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oh(n)}return pt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var P_=pt((function e(t){ft(this,e),this._methodName=t})),L_=function(){function e(t,n){if(ft(this,e),!isFinite(t)||t<-90||t>90)throw new jf(Vf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new jf(Vf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return pt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Jf(this._lat,e._lat)||Jf(this._long,e._long)}}]),e}(),M_=/^__.*__$/,F_=function(){function e(t,n,r){ft(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return pt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new $p(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qp(e,this.data,t,this.fieldTransforms)}}]),e}(),U_=function(){function e(t,n,r){ft(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return pt(e,[{key:"toMutation",value:function(e,t){return new $p(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function V_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mf()}}var j_=function(){function e(t,n,r,i,a,o){ft(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return pt(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return ox(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(V_(this.sa)&&M_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),B_=function(){function e(t,n,r){ft(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||dk(t)}return pt(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new j_({sa:e,methodName:t,fa:n,path:oh.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function q_(e){var t=e._freezeSettings(),n=dk(e._databaseId);return new B_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function z_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);nx("Data must be an object, but it was:",o,r);var u,s,c=ex(r,o);if(a.merge)u=new Wd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ct(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=rx(t,d,n);if(!o.contains(p))throw new jf(Vf.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ux(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Wd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new F_(new Qd(c),u,s)}var G_=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(P_);function K_(e,t,n){return new j_({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var H_=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"_toFieldTransform",value:function(e){return new Up(e.path,new Ap)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(P_),W_=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e))._a=r,i}return pt(n,[{key:"_toFieldTransform",value:function(e){var t=K_(this,e,!0),n=this._a.map((function(e){return Z_(e,t)})),r=new Rp(n);return new Up(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(P_),Q_=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e))._a=r,i}return pt(n,[{key:"_toFieldTransform",value:function(e){var t=K_(this,e,!0),n=this._a.map((function(e){return Z_(e,t)})),r=new Op(n);return new Up(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(P_),$_=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e)).wa=r,i}return pt(n,[{key:"_toFieldTransform",value:function(e){var t=new Lp(e.yt,Sp(e.yt,this.wa));return new Up(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(P_);function X_(e,t,n,r){var i=e.da(1,t,n);nx("Data must be an object, but it was:",i,r);var a=[],o=Qd.empty();Fh(r,(function(e,r){var u=ax(t,e,n);r=Qt(r);var s=i.ca(u);if(r instanceof G_)a.push(u);else{var c=Z_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Wd(a);return new U_(o,u,i.fieldTransforms)}function Y_(e,t,n,r,i,a){var o=e.da(1,t,n),u=[rx(t,r,n)],s=[i];if(a.length%2!=0)throw new jf(Vf.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(rx(t,a[c])),s.push(a[c+1]);for(var l=[],f=Qd.empty(),h=u.length-1;h>=0;--h)if(!ux(l,u[h])){var d=u[h],p=s[h];p=Qt(p);var v=o.ca(d);if(p instanceof G_)l.push(d);else{var y=Z_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Wd(l);return new U_(f,m,o.fieldTransforms)}function J_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Z_(n,e.da(r?4:3,t))}function Z_(e,t){if(tx(e=Qt(e)))return nx("Unsupported field value:",t,e),ex(e,t);if(e instanceof P_)return function(e,t){if(!V_(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ct(e);try{for(a.s();!(n=a.n()).done;){var o=Z_(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Qt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sp(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=th.fromDate(e);return{timestampValue:Ov(t.yt,n)}}if(e instanceof th){var r=new th(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ov(t.yt,r)}}if(e instanceof L_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof D_)return{bytesValue:Pv(t.yt,e._byteString)};if(e instanceof Gw){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fv(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Fw(e)))}(e,t)}function ex(e,t){var n={};return Uh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fh(e,(function(e,r){var i=Z_(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function tx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof th||e instanceof L_||e instanceof D_||e instanceof Gw||e instanceof P_)}function nx(e,t,n){if(!tx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Fw(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function rx(e,t,n){if((t=Qt(t))instanceof O_)return t._internalPath;if("string"==typeof t)return ax(e,t);throw ox("Field path arguments must be of type string or ",e,!1,void 0,n)}var ix=new RegExp("[~\\*/\\[\\]]");function ax(e,t,n){if(t.search(ix)>=0)throw ox("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return mt(O_,vt(t.split(".")))._internalPath}catch(r){throw ox("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ox(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new jf(Vf.INVALID_ARGUMENT,u+e+s)}function ux(e,t){return e.some((function(e){return e.isEqual(t)}))}var sx=function(){function e(t,n,r,i,a){ft(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return pt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Gw(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(lx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),cx=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"data",value:function(){return tt(Ze(n.prototype),"data",this).call(this)}}]),n}(sx);function lx(e,t){return"string"==typeof t?ax(e,t):t instanceof O_?t._internalPath:t._delegate._internalPath}function fx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new jf(Vf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hx=pt((function e(){ft(this,e)})),dx=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n)}(hx);function px(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof hx&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof mx})).length,n=e.filter((function(e){return e instanceof vx})).length;if(t>1||t>0&&n>0)throw new jf(Vf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=ct(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var vx=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return pt(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Ax(e._query,t),new Kw(e.firestore,e.converter,pp(e._query,t))}},{key:"_parse",value:function(e){var t=q_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new jf(Vf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Nx(o,a);var s,c=[],l=ct(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Cx(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Cx(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Nx(o,a),u=J_(n,"where",o,"in"===a||"not-in"===a);return wd.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dx);function yx(e,t,n){var r=t,i=lx("where",e);return vx._create(i,r,n)}var mx=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return pt(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:_d.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=ct(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Ax(r,a),r=pp(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Kw(e.firestore,e.converter,pp(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(hx);var gx=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return pt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vd(t,n);return function(e,t){if(null===cp(e)){var n=lp(e);null!==n&&Rx(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Kw(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ap(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dx);function kx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=lx("orderBy",e);return gx._create(r,n)}var bx=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return pt(n,[{key:"_apply",value:function(e){return new Kw(e.firestore,e.converter,vp(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dx);var wx=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return pt(n,[{key:"_apply",value:function(e){var t=Tx(e,this.type,this._docOrFields,this._inclusive);return new Kw(e.firestore,e.converter,function(e,t){return new ap(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dx);function _x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wx._create("startAt",t,!0)}function xx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wx._create("startAfter",t,!1)}var Ex=function(e){rt(n,e);var t=ot(n);function n(e,r,i){var a;return ft(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return pt(n,[{key:"_apply",value:function(e){var t=Tx(e,this.type,this._docOrFields,this._inclusive);return new Kw(e.firestore,e.converter,function(e,t){return new ap(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dx);function Sx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ex._create("endBefore",t,!1)}function Ix(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ex._create("endAt",t,!0)}function Tx(e,t,n,r){if(n[0]=Qt(n[0]),n[0]instanceof sx)return function(e,t,n,r,i){if(!r)throw new jf(Vf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ct(hp(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ad(t,r.key));else{var c=r.data.field(s.field);if(Wh(c))throw new jf(Vf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new md(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=q_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new jf(Vf.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!fp(e)&&-1!==c.indexOf("/"))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ih.fromString(c));if(!uh.isDocumentKey(l))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new uh(l);u.push(ad(t,f))}else{var h=J_(n,r,c);u.push(h)}}return new md(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Cx(e,t,n){if("string"==typeof(n=Qt(n))){if(""===n)throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fp(t)&&-1!==n.indexOf("/"))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ih.fromString(n));if(!uh.isDocumentKey(r))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ad(e,new uh(r))}if(n instanceof Gw)return ad(e,n._key);throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Fw(n),"."))}function Nx(e,t){if(!Array.isArray(e)||0===e.length)throw new jf(Vf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new jf(Vf.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Ax(e,t){if(t.isInequality()){var n=lp(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=cp(e);null!==i&&Rx(e,r,i)}var a=function(e,t){var n,r=ct(e);try{for(r.s();!(n=r.n()).done;){var i,a=ct(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new jf(Vf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new jf(Vf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Rx(e,t,n){if(!n.isEqual(t))throw new jf(Vf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Dx=function(){function e(){ft(this,e)}return pt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mf()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fh(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new L_(Kh(e.latitude),Kh(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Qh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($h(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gh(e);return new th(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ih.fromString(e);Ff(uy(n));var r=new Lh(n.get(1),n.get(3)),i=new uh(n.popFirst(5));return r.isEqual(t)||Of("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ox(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Px=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).firestore=e,r}return pt(n,[{key:"convertBytes",value:function(e){return new D_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gw(this.firestore,null,t)}}]),n}(Dx),Lx=function(){function e(t,n){ft(this,e),this.hasPendingWrites=t,this.fromCache=n}return pt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Mx=function(e){rt(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return ft(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return pt(n,[{key:"exists",value:function(){return tt(Ze(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Fx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(lx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(sx),Fx=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tt(Ze(n.prototype),"data",this).call(this,e)}}]),n}(Mx),Ux=function(){function e(t,n,r,i){ft(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lx(i.hasPendingWrites,i.fromCache),this.query=r}return pt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Fx(n._firestore,n._userDataWriter,r.key,r,new Lx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new jf(Vf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Fx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Fx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Lx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Vx(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Vx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mf()}}function jx(e,t){return e instanceof Mx&&t instanceof Mx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ux&&t instanceof Ux&&e._firestore===t._firestore&&Xw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Bx(e){e=Uw(e,Gw);var t=Uw(e.firestore,x_);return g_(E_(t),e._key).then((function(n){return Jx(t,e,n)}))}var qx=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).firestore=e,r}return pt(n,[{key:"convertBytes",value:function(e){return new D_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gw(this.firestore,null,t)}}]),n}(Dx);function zx(e){e=Uw(e,Gw);var t=Uw(e.firestore,x_),n=E_(t),r=new qx(t);return function(e,t){var n=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je(Xe().mark((function e(t,n,r){var i,a;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Uf(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new jf(Vf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=cb(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,h_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Mx(t,r,e._key,n,new Lx(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Gx(e){e=Uw(e,Kw);var t=Uw(e.firestore,x_),n=E_(t),r=new qx(t);return function(e,t){var n=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je(Xe().mark((function e(t,n,r){var i,a,o,u,s;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qg(t,n,!0);case 3:i=e.sent,a=new Nb(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=cb(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,h_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ux(t,r,e,n)}))}function Kx(e,t,n){e=Uw(e,Gw);var r=Uw(e.firestore,x_),i=Ox(e.converter,t,n);return Yx(r,[z_(q_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,jp.none())])}function Hx(e,t,n){e=Uw(e,Gw);for(var r=Uw(e.firestore,x_),i=q_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Yx(r,[("string"==typeof(t=Qt(t))||t instanceof O_?Y_(i,"updateDoc",e._key,t,n,o):X_(i,"updateDoc",e._key,t)).toMutation(e._key,jp.exists(!0))])}function Wx(e){return Yx(Uw(e.firestore,x_),[new tv(e._key,jp.none())])}function Qx(e,t){var n=Uw(e.firestore,x_),r=Qw(e),i=Ox(e.converter,t);return Yx(n,[z_(q_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,jp.exists(!1))]).then((function(){return r}))}function $x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Qt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||w_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(w_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Gw)l=Uw(e.firestore,x_),f=up(e._key.path),c={next:function(t){n[s]&&n[s](Jx(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Uw(e,Kw);l=Uw(p.firestore,x_),f=p._query;var v=new qx(l);c={next:function(e){n[s]&&n[s](new Ux(l,v,p,e))},error:n[s+1],complete:n[s+2]},fx(e._query)}return function(e,t,n,r){var i=new Jw(r),a=new _b(t,i,n);return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vb,t.next=3,y_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mb,t.next=3,y_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(E_(l),f,h,c)}function Xx(e,t){return function(e,t){var n=new Jw(t);return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Uf(e).Ru.add(t),t.next()},t.next=3,y_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Je(Xe().mark((function t(){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Uf(e).Ru.delete(t)},t.next=3,y_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(E_(e=Uw(e,x_)),w_(t)?t:{next:t})}function Yx(e,t){return function(e,t){var n=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function r(){return Xe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Vb,r.next=3,p_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(E_(e),t)}function Jx(e,t,n){var r=n.docs.get(t._key),i=new qx(e);return new Mx(e,i,t._key,r,new Lx(n.hasPendingWrites,n.fromCache),t.converter)}var Zx={maxAttempts:5},eE=function(){function e(t,n){ft(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=q_(t)}return pt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=tE(e,this._firestore),i=Ox(r.converter,t,n),a=z_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,jp.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=tE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Qt(t))||t instanceof O_?Y_(this._dataReader,"WriteBatch.update",i._key,t,n,o):X_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,jp.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=tE(e,this._firestore);return this._mutations=this._mutations.concat(new tv(t._key,jp.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new jf(Vf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function tE(e,t){if((e=Qt(e)).firestore!==t)throw new jf(Vf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var nE=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,r))._firestore=e,i}return pt(n,[{key:"get",value:function(e){var t=this,r=tE(e,this._firestore),i=new qx(this._firestore);return tt(Ze(n.prototype),"get",this).call(this,e).then((function(e){return new Mx(t._firestore,i,r._key,e._document,new Lx(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ft(this,e),this._firestore=t,this._transaction=n,this._dataReader=q_(t)}return pt(e,[{key:"get",value:function(e){var t=this,n=tE(e,this._firestore),r=new Px(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Mf();var i=e[0];if(i.isFoundDocument())return new sx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new sx(t._firestore,r,n._key,null,n.converter);throw Mf()}))}},{key:"set",value:function(e,t,n){var r=tE(e,this._firestore),i=Ox(r.converter,t,n),a=z_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=tE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Qt(t))||t instanceof O_?Y_(this._dataReader,"Transaction.update",i._key,t,n,o):X_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=tE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function rE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new W_("arrayUnion",t)}function iE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Q_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Nf=e}(Kn),Un(new $t("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new x_(new Kf(e.getProvider("auth-internal")),new $f(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jf(Vf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lh(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Yn(Tf,"3.8.0",e),Yn(Tf,"3.8.0","esm2017")}();var aE,oE="SET_VALUES",uE="SET_ERRORS",sE="SET_VALID",cE="SET_AUTH",lE=function(){function e(t,n){var r=this;ft(this,e),this._delegate=t,this.firebase=n,Mn(t,new $t("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return pt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),$n(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Mn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Fn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),fE=(yt(aE={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),yt(aE,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),aE),hE=new Mt("app-compat","Firebase",fE);var dE=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Vt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Yn,setLogLevel:Zn,onLog:Jn,apps:null,SDK_VERSION:Kn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Un(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw hE.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&xt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Vt(n,e=e||Dn))throw hE.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(lE);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){xt(n,e)},createSubscribe:Kt,ErrorFactory:Mt,deepExtend:xt}),n}(),pE=new un("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){pE.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var vE=self.firebase.SDK_VERSION;vE&&vE.indexOf("LITE")>=0&&pE.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var yE=dE;!function(e){Yn("@firebase/app-compat","0.2.0",e)}();yE.registerVersion("firebase","9.15.0","app-compat");var mE="firebasestorage.googleapis.com",gE="storageBucket",kE=function(e){rt(n,e);var t=ot(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ft(this,n),(i=t.call(this,bE(e),"Firebase Storage: ".concat(r," (").concat(bE(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(nt(i),n.prototype),i}return pt(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return bE(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Lt);function bE(e){return"storage/"+e}function wE(){return new kE("unknown","An unknown error occurred, please check the error payload for server response.")}function _E(){return new kE("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function xE(){return new kE("canceled","User canceled the upload/download.")}function EE(){return new kE("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function SE(e){return new kE("invalid-argument",e)}function IE(){return new kE("app-deleted","The Firebase app was deleted.")}function TE(e){return new kE("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function CE(e,t){return new kE("invalid-format","String does not match format '"+e+"': "+t)}function NE(e){throw new kE("internal-error","Internal error: "+e)}var AE,RE=function(){function e(t,n){ft(this,e),this.bucket=t,this.path_=n}return pt(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new kE("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===mE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new kE("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),DE=function(){function e(t){ft(this,e),this.promise_=Promise.reject(t)}return pt(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function OE(e){return"string"===typeof e||e instanceof String}function PE(e){return LE()&&e instanceof Blob}function LE(){return"undefined"!==typeof Blob&&!It()}function ME(e,t,n,r){if(r<t)throw SE("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw SE("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function FE(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function UE(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function VE(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(AE||(AE={}));var jE=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];ft(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return pt(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=wE();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?IE():xE());else i(_E())}};this.canceled_?t(0,new BE(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new BE(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===AE.NO_ERROR,a=r.getStatus();if(n&&!VE(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new BE(o,r))}else{var u=r.getErrorCode()===AE.ABORT;t(!1,new BE(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),BE=pt((function e(t,n,r){ft(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function qE(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function zE(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function GE(e,t){t&&(e["X-Firebase-GMPID"]=t)}function KE(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function HE(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=UE(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return GE(c,t),qE(c,n),zE(c,a),KE(c,r),new jE(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function WE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function QE(){for(var e=WE(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(LE())return new Blob(n);throw new kE("unsupported-environment","This browser doesn't seem to support creating Blobs")}function $E(e){if("undefined"===typeof atob)throw new kE("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var XE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},YE=pt((function e(t,n){ft(this,e),this.data=t,this.contentType=n||null}));function JE(e,t){switch(e){case XE.RAW:return new YE(ZE(t));case XE.BASE64:case XE.BASE64URL:return new YE(eS(e,t));case XE.DATA_URL:return new YE(function(e){var t=new tS(e);return t.base64?eS(XE.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw CE(XE.DATA_URL,"Malformed data URL.")}return ZE(t)}(t.rest)}(t),new tS(t).contentType)}throw wE()}function ZE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function eS(e,t){switch(e){case XE.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw CE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case XE.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw CE(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=$E(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw CE(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var tS=pt((function e(t){ft(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw CE(XE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var nS=function(){function e(t,n){ft(this,e);var r=0,i="";PE(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return pt(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(PE(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(LE()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(QE.apply(null,i))}var a=n.map((function(e){return OE(e)?JE(XE.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function rS(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function iS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function aS(e,t){return t}var oS=pt((function e(t,n,r,i){ft(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||aS})),uS=null;function sS(){if(uS)return uS;var e=[];e.push(new oS("bucket")),e.push(new oS("generation")),e.push(new oS("metageneration")),e.push(new oS("name","fullPath",!0));var t=new oS("name");t.xform=function(e,t){return function(e){return!OE(e)||e.length<2?e:iS(e)}(t)},e.push(t);var n=new oS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new oS("timeCreated")),e.push(new oS("updated")),e.push(new oS("md5Hash",null,!0)),e.push(new oS("cacheControl",null,!0)),e.push(new oS("contentDisposition",null,!0)),e.push(new oS("contentEncoding",null,!0)),e.push(new oS("contentLanguage",null,!0)),e.push(new oS("contentType",null,!0)),e.push(new oS("metadata","customMetadata",!0)),uS=e}function cS(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new RE(n,r);return t._makeStorageReference(i)}})}(r,e),r}function lS(e,t,n){var r=rS(t);return null===r?null:cS(e,r,n)}function fS(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var hS="prefixes",dS="items";function pS(e,t,n){var r=rS(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[hS]){var i,a=ct(n[hS]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new RE(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[dS]){var s,c=ct(n[dS]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new RE(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var vS=pt((function e(t,n,r,i){ft(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function yS(e){if(!e)throw wE()}function mS(e,t){return function(n,r){var i=lS(e,r,t);return yS(null!==i),i}}function gS(e,t){return function(n,r){var i=lS(e,r,t);return yS(null!==i),function(e,t,n,r){var i=rS(t);if(null===i)return null;if(!OE(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return FE("/b/"+o(i)+"/o/"+o(a),n,r)+UE({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function kS(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new kE("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new kE("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new kE("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new kE("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function bS(e){var t=kS(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new kE("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function wS(e,t,n){var r=FE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new vS(r,"GET",mS(e,n),i);return a.errorHandler=bS(t),a}function _S(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=FE(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new vS(o,"GET",function(e,t){return function(n,r){var i=pS(e,t,r);return yS(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=kS(t),s}function xS(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ES(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=xS(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+fS(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=nS.getBlob(c,r,l);if(null===f)throw EE();var h={name:s.fullPath},d=FE(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new vS(d,"POST",mS(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=kS(t),v}var SS=pt((function e(t,n,r,i){ft(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function IS(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){yS(!1)}return yS(!!n&&-1!==(t||["active"]).indexOf(n)),n}var TS=262144;function CS(e,t,n,r,i,a,o,u){var s=new SS(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new kE("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw EE();var v=t.maxUploadRetryTime,y=new vS(n,"POST",(function(e,n){var i,o=IS(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?mS(t,a)(e,n):null,new SS(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=kS(e),y}var NS={STATE_CHANGED:"state_changed"},AS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function RS(e){switch(e){case"running":case"pausing":case"canceling":return AS.RUNNING;case"paused":return AS.PAUSED;case"success":return AS.SUCCESS;case"canceled":return AS.CANCELED;default:return AS.ERROR}}var DS=pt((function e(t,n,r){ft(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function OS(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var PS=function(){function e(){var t=this;ft(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=AE.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=AE.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=AE.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return pt(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw NE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw NE("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw NE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw NE("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw NE("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),LS=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(PS);function MS(){return new LS}var FS=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ft(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=sS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(VE(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=_E()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return pt(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=lt(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=xS(t,r,i),u={name:o.fullPath},s=FE(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=fS(o,n),f=e.maxUploadRetryTime,h=new vS(s,"POST",(function(e){var t;IS(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){yS(!1)}return yS(OE(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=kS(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,MS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new vS(n,"POST",(function(e){var t=IS(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){yS(!1)}n||yS(!1);var i=Number(n);return yS(!isNaN(i)),new SS(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=kS(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,MS,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=TS*this._chunkMultiplier,n=new SS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=CS(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,MS,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(TS*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=wS(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,MS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=ES(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,MS,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=xE(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=RS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new DS(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(RS(this._state)){case AS.SUCCESS:OS(this._resolve.bind(null,this.snapshot))();break;case AS.CANCELED:case AS.ERROR:OS(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(RS(this._state)){case AS.RUNNING:case AS.PAUSED:e.next&&OS(e.next.bind(e,this.snapshot))();break;case AS.SUCCESS:e.complete&&OS(e.complete.bind(e))();break;default:e.error&&OS(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),US=function(){function e(t,n){ft(this,e),this._service=t,this._location=n instanceof RE?n:RE.makeFromUrl(n,t.host)}return pt(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new RE(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return iS(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new RE(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw TE(e)}}]),e}();function VS(e,t,n){return jS.apply(this,arguments)}function jS(){return(jS=Je(Xe().mark((function e(t,n,r){var i,a,o,u;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,BS(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,vt(u.prefixes)),(a=n.items).push.apply(a,vt(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,VS(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BS(e,t){null!=t&&"number"===typeof t.maxResults&&ME("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=_S(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,MS)}function qS(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=FE(t.fullServerUrl(),e.host,e._protocol),a=fS(n,r),o=e.maxOperationRetryTime,u=new vS(i,"PATCH",mS(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=bS(t),u}(e.storage,e._location,t,sS());return e.storage.makeRequestWithTokens(n,MS)}function zS(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=FE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new vS(r,"GET",gS(e,n),i);return a.errorHandler=bS(t),a}(e.storage,e._location,sS());return e.storage.makeRequestWithTokens(t,MS).then((function(e){if(null===e)throw new kE("no-download-url","The given file does not have any download URLs.");return e}))}function GS(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=FE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new vS(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=bS(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,MS)}function KS(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new RE(e._location.bucket,n);return new US(e.storage,r)}function HS(e,t){if(e instanceof XS){var n=e;if(null==n._bucket)throw new kE("no-default-bucket","No default bucket found. Did you set the '"+gE+"' property when initializing the app?");var r=new US(n,n._bucket);return null!=t?HS(r,t):r}return void 0!==t?KS(e,t):e}function WS(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof XS)return new US(e,t);throw SE("To use ref(service, url), the first argument must be a Storage instance.")}return HS(e,t)}function QS(e,t){var n=null===t||void 0===t?void 0:t[gE];return null==n?null:RE.makeFromBucketSpec(n,e)}function $S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Pt(i,e.app.options.projectId))}var XS=function(){function e(t,n,r,i,a){ft(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=mE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?RE.makeFromBucketSpec(i,this._host):QS(this._host,this.app.options)}return pt(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=RE.makeFromBucketSpec(this._url,e):this._bucket=QS(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ME("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ME("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Je(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Je(Xe().mark((function e(){var t,n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new US(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new DE(IE());var o=HE(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Je(Xe().mark((function e(t,n){var r,i,a,o;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=lt(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),YS="@firebase/storage",JS="0.10.0",ZS="storage";function eI(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new FS(e,new nS(t),n)}(e=Qt(e),t,n)}function tI(e){return function(e){e._throwIfRoot("getMetadata");var t=wS(e.storage,e._location,sS());return e.storage.makeRequestWithTokens(t,MS)}(e=Qt(e))}function nI(e){return function(e){var t={prefixes:[],items:[]};return VS(e,t).then((function(){return t}))}(e=Qt(e))}function rI(e,t){return WS(e=Qt(e),t)}function iI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$S(e,t,n,r)}function aI(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new XS(r,i,a,n,Kn)}Un(new $t(ZS,aI,"PUBLIC").setMultipleInstances(!0)),Yn(YS,JS,""),Yn(YS,JS,"esm2017");var oI=function(){function e(t,n,r){ft(this,e),this._delegate=t,this.task=n,this.ref=r}return pt(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),uI=function(){function e(t,n){ft(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return pt(e,[{key:"snapshot",get:function(){return new oI(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new oI(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new oI(e,i,i._ref))}:{next:t.next?function(e){return t.next(new oI(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),sI=function(){function e(t,n){ft(this,e),this._delegate=t,this._service=n}return pt(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new cI(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new cI(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),cI=function(){function e(t,n){ft(this,e),this._delegate=t,this.storage=n}return pt(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return KS(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new uI(eI(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XE.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=JE(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new uI(new FS(this._delegate,new nS(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return nI(this._delegate).then((function(t){return new sI(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return BS(e=Qt(e),t)}(this._delegate,e||void 0).then((function(e){return new sI(e,t.storage)}))}},{key:"getMetadata",value:function(){return tI(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return qS(e=Qt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return zS(Qt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),GS(Qt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw TE(e)}}]),e}(),lI=function(){function e(t,n){ft(this,e),this.app=t,this._delegate=n}return pt(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(fI(e))throw SE("ref() expected a child path but got a URL, use refFromURL instead.");return new cI(rI(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!fI(e))throw SE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{RE.makeFromUrl(e,this._delegate.host)}catch(t){throw SE("refFromUrl() expected a valid full URL but got an invalid one.")}return new cI(rI(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};iI(this._delegate,e,t,n)}}]),e}();function fI(e){return/^[A-Za-z]+:\/\//.test(e)}function hI(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new lI(r,i)}!function(e){var t={TaskState:AS,TaskEvent:NS,StringFormat:XE,Storage:lI,Reference:cI};e.INTERNAL.registerComponent(new $t("storage-compat",hI,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.2.0")}(yE);function dI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new jf("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function pI(){if("undefined"===typeof Uint8Array)throw new jf("unimplemented","Uint8Arrays are not available in this environment.")}function vI(){if("undefined"==typeof atob)throw new jf("unimplemented","Blobs are unavailable in Firestore in this environment.")}var yI=function(){function e(t){ft(this,e),this._delegate=t}return pt(e,[{key:"toBase64",value:function(){return vI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return pI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return vI(),new e(D_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return pI(),new e(D_.fromUint8Array(t))}}]),e}();function mI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ct(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var gI=function(){function e(){ft(this,e)}return pt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){R_(e=Uw(e,x_));var n=E_(e),r=e._freezeSettings(),i=new Dw;return I_(n,i,new Aw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){R_(e=Uw(e,x_));var t=E_(e),n=e._freezeSettings(),r=new Dw;return I_(t,r,new Rw(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new jf(Vf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Bf;return e._queue.enqueueAndForgetEvenWhileRestricted(Je(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Je(Xe().mark((function e(t){var n;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xh.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,xh.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Tg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),kI=function(){function e(t,n,r){var i=this;ft(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Lh||(this._appCompat=t)}return pt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Pf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zw(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return T_(this._delegate)}},{key:"disableNetwork",value:function(){return C_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Pw("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function n(){return Xe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Xb,n.next=3,p_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(E_(e=Uw(e,x_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Xx(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new jf("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new OI(this,Ww(this._delegate,e))}catch(t){throw SI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new EI(this,Qw(this._delegate,e))}catch(t){throw SI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new AI(this,function(e,t){if(e=Uw(e,qw),Ow("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new jf(Vf.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Kw(e,null,function(e){return new ap(ih.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw SI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Uw(e,x_);var r=Object.assign(Object.assign({},Zx),n);return function(e){if(e.maxAttempts<1)throw new jf(Vf.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Bf;return e.asyncQueue.enqueueAndForget(Je(Xe().mark((function i(){var a;return Xe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,v_(e);case 2:a=i.sent,new t_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(E_(e),(function(n){return t(new nE(e,n))}),r)}(this._delegate,(function(n){return e(new wI(t,n))}))}},{key:"batch",value:function(){var e=this;return E_(this._delegate),new _I(new eE(this._delegate,(function(t){return Yx(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return N_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return A_(this._delegate,e).then((function(e){return e?new AI(t,e):null}))}}]),e}(),bI=function(e){rt(n,e);var t=ot(n);function n(e){var r;return ft(this,n),(r=t.call(this)).firestore=e,r}return pt(n,[{key:"convertBytes",value:function(e){return new yI(new D_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return EI.forKey(t,this.firestore,null)}}]),n}(Dx);var wI=function(){function e(t,n){ft(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return pt(e,[{key:"get",value:function(e){var t=this,n=PI(e);return this._delegate.get(n).then((function(e){return new CI(t._firestore,new Mx(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=PI(e);return n?(dI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PI(e);return this._delegate.delete(t),this}}]),e}(),_I=function(){function e(t){ft(this,e),this._delegate=t}return pt(e,[{key:"set",value:function(e,t,n){var r=PI(e);return n?(dI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),xI=function(){function e(t,n,r){ft(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return pt(e,[{key:"fromFirestore",value:function(e,t){var n=new Fx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new bI(t),n),i.set(n,a)),a}}]),e}();xI.INSTANCES=new WeakMap;var EI=function(){function e(t,n){ft(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return pt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new OI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new OI(this.firestore,Ww(this._delegate,e))}catch(t){throw SI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Qt(e))instanceof Gw&&$w(this._delegate,e)}},{key:"set",value:function(e,t){t=dI("DocumentReference.set",t);try{return t?Kx(this._delegate,e,t):Kx(this._delegate,e)}catch(n){throw SI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Hx(this._delegate,e):Hx.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw SI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Wx(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=II(n),a=TI(n,(function(t){return new CI(e.firestore,new Mx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return $x(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Uw(e,Gw);var t=Uw(e.firestore,x_);return g_(E_(t),e._key,{source:"server"}).then((function(n){return Jx(t,e,n)}))}(this._delegate):Bx(this._delegate),t.then((function(e){return new CI(n.firestore,new Mx(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(xI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new jf("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Gw(n._delegate,r,new uh(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Gw(n._delegate,r,t))}}]),e}();function SI(e,t,n){return e.message=e.message.replace(t,n),e}function II(e){var t,n=ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!mI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function TI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=mI(e[0])?e[0]:mI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var CI=function(){function e(t,n){ft(this,e),this._firestore=t,this._delegate=n}return pt(e,[{key:"ref",get:function(){return new EI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return jx(this._delegate,e._delegate)}}]),e}(),NI=function(e){rt(n,e);var t=ot(n);function n(){return ft(this,n),t.apply(this,arguments)}return pt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Mf()}(void 0!==t),t}}]),n}(CI),AI=function(){function e(t,n){ft(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return pt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,px(this._delegate,yx(t,n,r)))}catch(i){throw SI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,px(this._delegate,kx(t,n)))}catch(r){throw SI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,px(this._delegate,function(e){return Vw("limit",e),bx._create("limit",e,"F")}(t)))}catch(n){throw SI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,px(this._delegate,function(e){return Vw("limitToLast",e),bx._create("limitToLast",e,"L")}(t)))}catch(n){throw SI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,px(this._delegate,_x.apply(void 0,arguments)))}catch(t){throw SI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,px(this._delegate,xx.apply(void 0,arguments)))}catch(t){throw SI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,px(this._delegate,Sx.apply(void 0,arguments)))}catch(t){throw SI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,px(this._delegate,Ix.apply(void 0,arguments)))}catch(t){throw SI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Xw(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Gx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Uw(e,Kw);var t=Uw(e.firestore,x_),n=E_(t),r=new qx(t);return k_(n,e._query,{source:"server"}).then((function(n){return new Ux(t,r,e,n)}))}(this._delegate):function(e){e=Uw(e,Kw);var t=Uw(e.firestore,x_),n=E_(t),r=new qx(t);return fx(e._query),k_(n,e._query).then((function(n){return new Ux(t,r,e,n)}))}(this._delegate),t.then((function(e){return new DI(n.firestore,new Ux(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=II(n),a=TI(n,(function(t){return new DI(e.firestore,new Ux(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return $x(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(xI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),RI=function(){function e(t,n){ft(this,e),this._firestore=t,this._delegate=n}return pt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new NI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),DI=function(){function e(t,n){ft(this,e),this._firestore=t,this._delegate=n}return pt(e,[{key:"query",get:function(){return new AI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new NI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new RI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new NI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return jx(this._delegate,e._delegate)}}]),e}(),OI=function(e){rt(n,e);var t=ot(n);function n(e,r){var i;return ft(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return pt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new EI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new EI(this.firestore,void 0===e?Qw(this._delegate):Qw(this._delegate,e))}catch(t){throw SI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return Qx(this._delegate,e).then((function(e){return new EI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return $w(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(xI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(AI);function PI(e){return Uw(e,Gw)}var LI,MI=function(){function e(){ft(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=mt(O_,n)}return pt(e,[{key:"isEqual",value:function(e){return(e=Qt(e))instanceof O_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(oh.keyField().canonicalString())}}]),e}(),FI=function(){function e(t){ft(this,e),this._delegate=t}return pt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new H_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new G_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=rE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=iE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),UI={Firestore:kI,GeoPoint:L_,Timestamp:th,Blob:yI,Transaction:wI,WriteBatch:_I,DocumentReference:EI,DocumentSnapshot:CI,Query:AI,QueryDocumentSnapshot:NI,QuerySnapshot:DI,CollectionReference:OI,FieldPath:MI,FieldValue:FI,setLogLevel:function(e){!function(e){Af.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new $t("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},UI)))})(LI=yE,(function(e,t){return new kI(e,t,new gI)})),LI.registerVersion("@firebase/firestore-compat","0.3.0");yE.initializeApp({apiKey:"AIzaSyDkR1Q5lfBtlwNRMxBC6iDx0e_JiXRxtEo",authDomain:"fotoalbom-1fd85.firebaseapp.com",projectId:"fotoalbom-1fd85",storageBucket:"fotoalbom-1fd85.appspot.com",messagingSenderId:"1066284231517",appId:"1:1066284231517:web:ed6c008bb3268bd4a796b4"});var VI=yE.storage(),jI=yE.firestore(),BI=yE.firestore.FieldValue.serverTimestamp,qI="SET_MODAL_VISIBLE",zI="SET_MODAL_IMG_VISIBLE",GI="SET_SELECTED_FOTO",KI="SET_IS_FILE_LOADING",HI="GET_USER",WI="GET_USER_FAILED",QI="GET_USER_SUCCESS",$I="LOGOUT",XI="LOGOUT_FAILED",YI="LOGOUT_SUCCESS",JI="GET_PHOTOS",ZI="GET_PHOTOS_FAILED",eT="GET_PHOTOS_SUCCESS",tT=function(){return function(e){e({type:qI,payload:!1}),e({type:zI,payload:!1})}};function nT(e){e({type:cE,payload:!1})}function rT(e){e({type:WI}),nT(e)}var iT=function(){return function(e){e({type:HI}),function(e,t,n,r){Qt(e).onAuthStateChanged(t,n,r)}(wu(),function(){var t=Je(Xe().mark((function t(n){var r,i;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}return r=Qw(jI,"users",n.email),t.next=4,Bx(r);case 4:(i=t.sent).exists()?e({type:QI,payload:i.data()}):(rT(e),nT(e)),t.next=10;break;case 8:rT(e),nT(e);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}};var aT=function(){return function(e){e({type:$I}),function(e){return Qt(e).signOut()}(wu()).then((function(){e({type:YI}),e({type:cE,payload:!1}),e({type:QI,payload:null})})).catch((function(t){!function(e){e({type:XI})}(e)}))}},oT=n(184),uT=function(){var e=E(),t=v((function(e){return e.user})),n=t.user,r=t.getUserRequest;return(0,oT.jsx)("header",{className:ze,children:(0,oT.jsxs)("div",{className:Ge,children:[(0,oT.jsx)(Ve,{to:"/foto-albom",className:We,children:(0,oT.jsx)("h1",{children:"Fire Gram"})}),n&&(0,oT.jsx)(Ve,{to:"/foto-albom/my-photos",className:Ke,children:"\u041c\u043e\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),n&&"admin@mail.ru"===n.email&&(0,oT.jsx)(Ve,{to:"/foto-albom/moderators",className:Ke,children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u044b"}),n&&(n.moderator||"admin@mail.ru"===n.email)&&(0,oT.jsx)(Ve,{to:"/foto-albom/photo-verification",className:Ke,children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a"}),r?(0,oT.jsx)(oT.Fragment,{}):n?(0,oT.jsxs)("div",{children:[(0,oT.jsx)("span",{children:n.email}),(0,oT.jsx)("button",{onClick:function(){e(aT())},className:Qe,children:"\u0412\u044b\u0439\u0442\u0438"})]}):(0,oT.jsxs)("div",{children:[(0,oT.jsx)(Ve,{to:"/foto-albom/login",className:Ke,children:"\u0412\u043e\u0439\u0442\u0438"}),(0,oT.jsx)(Ve,{to:"/foto-albom/register",className:"".concat(Ke," ").concat(He),children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})})},sT={},cT="main_table__-AQiY",lT="main_header__title_container__63uCB",fT="main_header__subtitle__4eNXr",hT="main_header__text__Op1mL",dT="main_header__button__91iMi",pT="main_loader_container__41jd8",vT="main_error_text__30c1X",yT="main_success_notice_text__gBcE3",mT="TablePhotos_picture__IKyiT",gT="TablePhotos_deleteButton__lux5B",kT="TablePhotos_verifyButton__uhofF",bT="TablePhotos_buttonContainer__4AFQS",wT="TablePhotos_likes_container__I1sjX",_T="TablePhotos_likes__ie0Uz",xT="TablePhotos_likesButton__rlV0k",ET="TablePhotos_likesButton_active__yXwFr",ST="TablePhotos_cards_auth_button__kdOOx",IT="TablePhotos_cards_auth_button_active__dR7Gr",TT="TablePhotos_owner_title__-hGXP",CT=function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wx(Qw(jI,"images","".concat(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),NT=function(){var e=Je(Xe().mark((function e(t,n,r){var i;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=BI(),e.next=3,Qx(Ww(jI,"images"),{url:t,createdAt:i,verificated:1,owner:n,ownerEmail:r,likes:[]});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),AT=function(){var e=Je(Xe().mark((function e(t,n){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=BI(),e.next=3,Kx(Qw(jI,"users","".concat(t)),{moderator:!1,createdAt:r,email:t,id:n});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RT=function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hx(Qw(jI,"images","".concat(t)),{verificated:2});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DT=function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hx(Qw(jI,"users","".concat(t)),{moderator:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),OT=function(){var e=Je(Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hx(Qw(jI,"users","".concat(t)),{moderator:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PT=function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hx(Qw(jI,"images","".concat(t)),{likes:rE("".concat(n))});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),LT=function(){var e=Je(Xe().mark((function e(t,n){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hx(Qw(jI,"images","".concat(t)),{likes:iE("".concat(n))});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MT=function(e,t){return Math.ceil(e/t)},FT=function(e,t){return e.slice(1===t?0:8*(t-1),8*t)},UT="DEL_IMAGE",VT="DEL_IMAGE_FAILED",jT="DEL_IMAGE_SUCCESS",BT="LIKE_IMAGE",qT="LIKE_IMAGE_FAILED",zT="LIKE_IMAGE_SUCCESS",GT="DIS_LIKE_IMAGE",KT="DIS_LIKE_IMAGE_FAILED",HT="DIS_LIKE_IMAGE_SUCCESS",WT="VERIFY_IMAGE",QT="VERIFY_IMAGE_FAILED",$T="VERIFY_IMAGE_SUCCESS";var XT=function(e){return function(t){t({type:UT}),CT(e).then((function(){t({type:jT})})).catch((function(e){!function(e){e({type:VT}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}})}(t)}))}},YT=function(e,t){return function(n){n({type:BT}),PT(e,t).then((function(){n({type:zT})})).catch((function(e){!function(e){e({type:qT}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430!"}})}(n)}))}},JT=function(e,t){return function(n){n({type:GT}),LT(e,t).then((function(){n({type:HT})})).catch((function(e){!function(e){e({type:KT}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430!"}})}(n)}))}},ZT=function(e){return function(t){t({type:WT}),RT(e).then((function(){t({type:$T})})).catch((function(e){!function(e){e({type:QT}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438!"}})}(t)}))}},eC=function(e){var n=e.cards,r=E(),i=v((function(e){return e.auth})).auth,a=v((function(e){return e.user})).user,o=function(){r(XT(n.id))},u=Re(),s=(0,t.useRef)();return(0,oT.jsxs)("div",{style:{position:"relative"},children:[(0,oT.jsx)("div",{style:{backgroundImage:"url(".concat(n.url,")")},className:mT,onClick:function(){r({type:GI,payload:n}),r({type:zI,payload:!0})}}),(0,oT.jsx)("div",{className:TT,children:n.ownerEmail}),2===n.verificated&&i&&(n.owner===a.id||a.moderator||"admin@mail.ru"===a.email)&&(0,oT.jsx)("div",{className:gT,onClick:o}),1===n.verificated&&(0,oT.jsxs)("div",{className:bT,children:[(0,oT.jsx)("button",{className:kT,onClick:function(){r(ZT(n.id))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,oT.jsx)("button",{style:{borderLeft:"none"},className:kT,onClick:o,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),2===n.verificated&&(0,oT.jsxs)(oT.Fragment,{children:[(0,oT.jsxs)("div",{className:wT,children:[(0,oT.jsx)("span",{className:_T,children:n.likes.length}),(0,oT.jsx)("button",{className:a&&n.likes.includes(a.id)?"".concat(xT," ").concat(ET):"".concat(xT),onClick:function(){if(i&&n.likes.includes(a.id))r(JT(n.id,a.id));else if(i&&!n.likes.includes(a.id))r(YT(n.id,a.id));else{if(i)return;u.push("/foto-albom/login")}},onPointerEnter:i?null:function(){s.current.className=IT},onPointerLeave:i?null:function(){s.current.className=ST}})]}),(0,oT.jsx)("div",{ref:s,className:ST,children:"\u0412\u043e\u0439\u0442\u0438, \u0447\u0442\u043e\u0431\u044b \u043b\u0430\u0439\u043a\u043d\u0443\u0442\u044c"})]})]})},tC="Loader_loader__+lRPl",nC="Loader_loader__full_page__WBaq1",rC=function(e){var t=e.width,n=e.height,r=e.fullPage;return(0,oT.jsx)("div",{style:{width:t,height:n},className:r?"".concat(tC," ").concat(nC):tC})},iC="SET_FILE",aC="SET_FILE_UPLOAD_ERROR",oC="SET_IS_UPLOAD_FILE",uC="SET_IMAGE_SUCCESS",sC="ADD_IMAGE_TO_BASE",cC="ADD_IMAGE_TO_BASE_FAILED",lC="ADD_IMAGE_TO_BASE_SUCCESS";var fC=function(e,t,n){return function(r){r({type:sC}),NT(e,t,n).then((function(){r({type:lC})})).catch((function(e){!function(e){e({type:cC})}(r)}))}},hC="Pagination_buttons_container__qRcPi",dC="Pagination_buttons__E8nXy",pC="Pagination_buttons_disabled__fpqUJ",vC="SET_PAGE_NUMBER",yC=function(e){var n=e.totalPage,r=E(),i=function(e){for(var t=[],n=0;n<e;n++)t.push(n+1);return t}(n),a=lt((0,t.useState)(1),2),o=a[0],u=a[1];return(0,t.useEffect)((function(){r({type:vC,payload:o})}),[r,o]),(0,oT.jsx)("div",{className:hC,children:i.map((function(e){return(0,oT.jsx)("button",{onClick:function(){return u(e)},className:e!==o?dC:"".concat(dC," ").concat(pC),disabled:e===o,style:{marginLeft:"2px"},children:e},e)}))})},mC=function(e){var n=e.photos,r=E(),i=v((function(e){return e.getPhotos})),a=i.getPhotosRequest,o=i.getPhotosFailed,u=v((function(e){return e.addImageToBase})).addImageToBaseSuccess,s=v((function(e){return e.Pagination})).pageNumber,c=FT(n,s),l=MT(n.length,8);return(0,t.useEffect)((function(){u&&setTimeout((function(){r({type:uC,payload:!1})}),3e3)}),[u,r]),(0,oT.jsxs)(oT.Fragment,{children:[(0,oT.jsxs)("div",{className:lT,children:[(0,oT.jsx)("h2",{className:fT,children:"\u0422\u0432\u043e\u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438"}),(0,oT.jsx)("p",{className:hT,children:"\u041d\u0435\u0442 \u043d\u0438\u043a\u043e\u0433\u043e, \u043a\u0442\u043e \u0432\u043e\u0437\u043b\u044e\u0431\u0438\u043b \u0431\u044b, \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0435\u043b \u0438 \u0432\u043e\u0437\u0436\u0430\u0436\u0434\u0430\u043b \u0431\u044b \u0441\u0430\u043c\u043e \u0441\u0442\u0440\u0430\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u0442\u043e, \u0447\u0442\u043e \u044d\u0442\u043e \u0441\u0442\u0440\u0430\u0434\u0430\u043d\u0438\u0435"}),(0,oT.jsx)("button",{className:dT,onClick:function(){r({type:qI,payload:!0})}}),u&&(0,oT.jsx)("span",{className:yT,children:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e! \u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e."})]}),(0,oT.jsx)("div",{className:cT,children:c&&c.map((function(e,t){return(0,oT.jsx)(eC,{cards:e},e.id)}))}),o&&(0,oT.jsx)("div",{className:pT,children:(0,oT.jsx)("p",{className:vT,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"})}),a&&(0,oT.jsx)("div",{className:pT,children:(0,oT.jsx)(rC,{width:50,height:50,fullPage:!1})}),n.length>8&&(0,oT.jsx)(yC,{totalPage:l})]})},gC="Auth_form_container__3EYoo",kC="Auth_form__UlHVT",bC="Auth_title__xzSKM",wC="Auth_input_text__Sc913",_C="Auth_input_submit__yKRTu",xC="Auth_input_submit_disabled__MaAPR",EC="Auth_error_text__9D27Q",SC="Auth_error_text_type_submit__M+eYp",IC="Auth_input_container__tKrlp",TC="Auth_loader_container__lrvzC";function CC(){var e=E(),n=v((function(e){return e.auth})),r=n.values,i=n.errors,a=n.valid,o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,u=function(t,n){function r(){e({type:uE,payload:cn(cn({},i),{},yt({},t,""))})}switch(t){case"name":return n.length<2?(e({type:uE,payload:cn(cn({},i),{},yt({},t,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 2-\u0443\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"))}),!1):(r(),!0);case"email":return o.test(String(n))?(r(),!0):(e({type:uE,payload:cn(cn({},i),{},yt({},t,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"))}),!1);case"password":return n.length<6||n.length>20?(e({type:uE,payload:cn(cn({},i),{},yt({},t,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0442 6 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"))}),!1):(r(),!0)}},s=(0,t.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{email:"",password:""},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{email:"",password:"",submit:""},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{email:!1,password:!1};e({type:uE,payload:n}),e({type:oE,payload:t}),e({type:sE,payload:r})}),[e]);return{handleChange:function(t){var n=t.target,i=n.name,o=n.value;e({type:oE,payload:cn(cn({},r),{},yt({},i,o))}),e({type:sE,payload:cn(cn({},a),{},yt({},i,u(i,o)))})},resetForm:s}}var NC=function(e){var n=e.title,r=e.buttonTitle,i=e.handleClick,a=e.request,o=v((function(e){return e.auth})),u=o.values,s=o.errors,c=o.valid,l=De(),f=CC(),h=f.handleChange,d=f.resetForm;return(0,t.useEffect)((function(){d()}),[]),(0,oT.jsxs)("div",{className:gC,children:[(0,oT.jsx)("h1",{className:bC,children:n}),(0,oT.jsxs)("form",{className:kC,onSubmit:i,children:[(0,oT.jsxs)("div",{className:IC,children:[(0,oT.jsx)("input",{type:"email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:h,value:u.email||"",className:wC}),0!==u.email.length&&(0,oT.jsx)("span",{className:EC,children:s.email})]}),"/moderators"!==l.pathname&&(0,oT.jsxs)("div",{className:IC,children:[(0,oT.jsx)("input",{type:"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:h,value:u.password||"",className:wC}),0!==u.password.length&&(0,oT.jsx)("span",{className:EC,children:s.password})]}),(0,oT.jsxs)("div",{className:IC,children:[(0,oT.jsx)("input",{type:"submit",disabled:"/moderators"!==l.pathname?!c.email||!c.password:!c.email,value:r,className:"/moderators"!==l.pathname?c.email&&c.password?"".concat(_C):"".concat(_C," ").concat(xC):c.email?"".concat(_C):"".concat(_C," ").concat(xC)}),(0,oT.jsx)("span",{className:"".concat(EC," ").concat(SC),children:s.submit})]})]}),a&&(0,oT.jsx)("div",{className:TC,children:(0,oT.jsx)(rC,{width:30,height:30,fullPage:!1})})]})},AC="LOGIN",RC="LOGIN_FAILED",DC="LOGIN_SUCCESS";function OC(e,t){e({type:RC}),e({type:uE,payload:{email:"",password:"",submit:t}})}var PC=function(e,t){return function(n){n({type:AC}),function(e,t,n){return Na(Qt(e),la.credential(t,n))}(wu(),e,t).then((function(e){var t=e.user;t&&t.accessToken?n({type:DC,payload:t}):OC(n)})).catch((function(e){var t;t=e.message.includes("wrong-password")?"\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c.":e.message.includes("user-not-found")?"\u041e\u0448\u0438\u0431\u043a\u0430! \u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.":e.message.includes("too-many-requests")?"\u041e\u0448\u0438\u0431\u043a\u0430! \u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u044b\u0445 \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0432\u0445\u043e\u0434\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435.":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!",OC(n,t)}))}},LC=function(){var e=E(),t=v((function(e){return e.auth})),n=t.values,r=t.auth,i=v((function(e){return e.login})).loginRequest;return r?(0,oT.jsx)(ke,{to:"/foto-albom"}):(0,oT.jsx)(NC,{title:"\u0412\u0445\u043e\u0434",buttonTitle:"\u0412\u043e\u0439\u0442\u0438",handleClick:function(t){t.preventDefault(),e({type:uE,payload:{submit:""}}),e(PC(n.email,n.password))},request:i})},MC="REGISTER",FC="REGISTER_FAILED",UC="REGISTER_SUCCESS",VC="ADD_USER_TO_BASE",jC="ADD_USER_TO_BASE_FAILED",BC="ADD_USER_TO_BASE_SUCCESS";function qC(e,t){e({type:FC}),e({type:uE,payload:{submit:t}})}var zC=function(e,t){return function(n){n({type:VC}),AT(e,t).then((function(){n({type:BC})})).catch((function(e){!function(e){e({type:jC}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438!"}})}(n)}))}},GC=function(e,t){return function(n){n({type:MC}),function(e,t,n){return Ra.apply(this,arguments)}(wu(),e,t).then((function(t){var r=t.user;r&&r.accessToken?(n({type:UC,payload:r}),n(zC(e,r.uid))):qC(n)})).catch((function(e){var t;t=e.message.includes("email-already-in-use")?"\u041e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0434\u0430\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438!",qC(n,t)}))}},KC=function(){var e=E(),t=v((function(e){return e.auth})),n=t.values,r=t.auth,i=v((function(e){return e.register})).registerRequest;return r?(0,oT.jsx)(ke,{to:"/foto-albom"}):(0,oT.jsx)(NC,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonTitle:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",handleClick:function(t){t.preventDefault(),e(GC(n.email,n.password))},request:i})},HC="photo-verification_table__XyBhZ",WC=function(e,n,r,i){var a=E();(0,t.useEffect)((function(){a({type:e});var t=$x(i,(function(e){var t=[];e.forEach((function(e){t.push(cn(cn({},e.data()),{},{id:e.id}))})),a({type:n,payload:t,lastVisible:e.docs[e.docs.length-1]})}),(function(e){a({type:r,payload:e})}));return function(){t()}}),[a,e,r,n])},QC="GET_NOT_VERIFY_PHOTOS",$C="GET_NOT_VERIFY_PHOTOS_FAILED",XC="GET_NOT_VERIFY_PHOTOS_SUCCESS",YC=function(){var e=v((function(e){return e.user})).user,t=v((function(e){return e.getNotVerifyPhotos})).notVerifyPhotos,n=v((function(e){return e.Pagination})).pageNumber,r=t&&FT(t,n),i=t&&MT(t.length,8),a=px(Ww(jI,"images"),yx("verificated","<=",1),kx("verificated","desc"));return WC(QC,XC,$C,a),"admin@mail.ru"===e.email||e.moderator?(0,oT.jsxs)(oT.Fragment,{children:[(0,oT.jsx)("div",{className:HC,children:r&&0!==r.length?r.map((function(e,t){return(0,oT.jsx)(eC,{cards:e},e.id)})):(0,oT.jsx)("span",{children:"\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0434\u043b\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438."})}),t.length>8&&(0,oT.jsx)(yC,{totalPage:i})]}):(0,oT.jsx)(ke,{to:{pathname:"/foto-albom"}})};function JC(e,t){if(null==e)return{};var n,r,i=oe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ZC="Modal_modal__DJDMv",eN="Modal_modalCloseButton__Hazzk",tN="ModalOverlay_ModalOverlay__bubMx",nN="ModalOverlay_active__ZKYQ4",rN=function(e){var t=e.modalVisible,n=e.children,r=E(),i=v((function(e){return e.app})).isFileLoading,a=[tN];t&&a.push(nN);return(0,oT.jsx)("div",{className:a.join(" "),onClick:function(){i||r(tT())},children:n})},iN=["modalVisible"],aN=document.getElementById("modals"),oN=function(e){var n=e.modalVisible,r=JC(e,iN),i=E(),a=v((function(e){return e.app})).isFileLoading;(0,t.useEffect)((function(){function e(e){"Escape"!==e.key||a||i(tT())}if(n)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n,a]);return o.createPortal((0,oT.jsx)(rN,{modalVisible:n,children:(0,oT.jsxs)("div",{className:ZC,onClick:function(e){e.stopPropagation()},children:[r.children,(0,oT.jsx)("button",{className:eN,disabled:a&&!0,onClick:function(){i(tT())}})]})}),aN)},uN=function(e){var n=E(),r=lt((0,t.useState)(0),2),i=r[0],a=r[1],o=lt((0,t.useState)(null),2),u=o[0],s=o[1],c=lt((0,t.useState)(null),2),l=c[0],f=c[1],h=v((function(e){return e.user})).user;return(0,t.useEffect)((function(){var t=VI.ref(e.name),r=t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a(t)}),(function(e){s(e)}),Je(Xe().mark((function e(){var r;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,f(r),n(fC(r,h.id,h.email));case 5:case"end":return e.stop()}}),e)}))));return function(){r()}}),[e]),{progress:i,error:u,url:l}},sN="ProgressBar_progressLine__ocFuI",cN="ProgressBar_progressLineContainer__q3VUH",lN="ProgressBar_percent__91Pvd",fN="ProgressBar_percent_begin__2+WHF",hN=function(){var e=E(),n=v((function(e){return e.addCardModal})).file,r=uN(n),i=r.progress,a=r.url;return(0,t.useEffect)((function(){a?(e({type:iC,payload:null}),e({type:oC,payload:!1}),e(tT()),e({type:KI,payload:!1})):e({type:KI,payload:!0})}),[e,a]),(0,oT.jsx)("div",{className:cN,children:(0,oT.jsx)("div",{className:sN,style:{width:i+"%"},children:(0,oT.jsxs)("span",{className:i>8?lN:"".concat(lN," ").concat(fN),children:[(0,oT.jsx)(rC,{width:8,height:8,fullPage:!1}),Math.floor(i),"%"]})})})},dN="AddCardModal_form__XY9Mv",pN="AddCardModal_input__s++xW",vN="AddCardModal_formText__p6t21",yN="AddCardModal_errorText__ijyRJ",mN="AddCardModal_uploadFileButton__TZ4dD",gN="AddCardModal_uploadFileButton_disabled__oihpP",kN="AddCardModal_inputArea__AYzyn",bN="AddCardModal_unSelectFileButton__jJDuK",wN="AddCardModal_text__YI4Qp",_N="AddCardModal_attention__container__CPVu9",xN="AddCardModal_attention__auth_container__Z7god",EN="AddCardModal_attention__link_text__rMmxF",SN="AddCardByLink_form__174jA",IN="AddCardByLink_input__Fi3wQ",TN="AddCardByLink_button__tX3eO",CN="AddCardByLink_button_disabled__xwNVA",NN="AddCardByLink_error__3BwGe",AN="SET_ADD_CARD_BY_LINK_VALUE",RN="SET_ADD_CARD_BY_LINK_ERROR",DN=function(){var e=E(),n=v((function(e){return e.addCardByLink})),r=n.value,i=n.error,a=v((function(e){return e.user})).user,o=/^(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|png)/;(0,t.useEffect)((function(){o.test(r)||0===r.length?e({type:RN,payload:""}):e({type:RN,payload:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 .jpeg \u0438\u043b\u0438 .png"})}),[r]);return(0,oT.jsxs)("form",{className:SN,children:[(0,oT.jsx)("input",{className:IN,type:"text",value:r,onChange:function(t){e({type:AN,payload:t.target.value})},placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 c\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),i&&(0,oT.jsx)("span",{className:NN,children:i}),(0,oT.jsx)("button",{disabled:0!==i.length||0===r.length,onClick:function(t){t.preventDefault(),e(fC(r,a.id,a.email)),e(tT()),e({type:AN,payload:""})},className:0!==i.length||0===r.length?"".concat(TN," ").concat(CN):TN,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},ON=function(){var e=E(),n=v((function(e){return e.addCardModal})),r=n.file,i=n.fileUploadError,a=n.isUploadFile,o=v((function(e){return e.auth})).auth,u=function(){e(tT())},s=(0,t.useRef)(null),c=["image/png","image/jpeg"];return(0,oT.jsx)(oT.Fragment,{children:o?(0,oT.jsxs)(oT.Fragment,{children:[(0,oT.jsxs)("form",{className:dN,children:[(0,oT.jsxs)("label",{className:kN,children:[(0,oT.jsx)("input",{className:pN,type:"file",onChange:function(t){var n=t.target.files[0];n&&c.includes(n.type)?(e({type:iC,payload:n}),e({type:aC,payload:""})):(e({type:iC,payload:null}),e({type:aC,payload:'\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 "png" \u0438 "jpeg"'}))},ref:s}),r&&(0,oT.jsxs)(oT.Fragment,{children:[(0,oT.jsx)("p",{className:vN,children:r.name}),(0,oT.jsx)("button",{onClick:function(t){t.preventDefault(),s.current.value="",e({type:iC,payload:null})},className:bN})]}),i&&(0,oT.jsx)("p",{className:"".concat(vN," ").concat(yN),children:i})]}),(0,oT.jsx)("button",{disabled:!(!i&&r),className:i||!r?"".concat(mN," ").concat(gN):mN,onClick:function(t){t.preventDefault(),e({type:oC,payload:!0}),s.current.value=""},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),r&&a&&(0,oT.jsx)(hN,{})]}),(0,oT.jsx)("p",{className:wN,children:"\u0418\u043b\u0438"}),(0,oT.jsx)(DN,{})]}):(0,oT.jsxs)("div",{className:_N,children:[(0,oT.jsx)("span",{children:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f!"}),(0,oT.jsxs)("div",{className:xN,children:[(0,oT.jsx)(Ve,{to:"/foto-albom/login",onClick:u,className:EN,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),"\u0438\u043b\u0438",(0,oT.jsx)(Ve,{to:"/foto-albom/register",onClick:u,className:EN,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})})},PN="FullSizeImg_picture__ojXd-",LN=function(){var e=v((function(e){return e.app})).selectedFoto;return e?(0,oT.jsx)("img",{src:e.url,alt:"",className:PN}):null},MN="ModeratedUser_container__rnHZq",FN="ModeratedUser_delButon__X+RHF",UN="ModeratedUser_text__C4HPW",VN="UN_MODERATE_USER",jN="UN_MODERATE_USER_FAILED",BN="UN_MODERATE_USER_SUCCESS";var qN=function(e){return function(t){t({type:VN}),DT(e).then((function(){t({type:BN})})).catch((function(e){!function(e){e({type:jN}),e({type:uE,payload:{submit:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430!"}})}(t)}))}},zN=function(e){var t=e.user,n=E();return(0,oT.jsxs)("li",{className:MN,children:[(0,oT.jsx)("span",{className:UN,children:t.email}),(0,oT.jsx)("button",{className:FN,onClick:function(){n(qN(t.email))}})]})},GN="GET_MODERATED_USERS",KN="GET_MODERATED_USERS_FAILED",HN="GET_MODERATED_USERS_SUCCESS",WN="MODERATE_USER",QN="MODERATE_USER_FAILED",$N="MODERATE_USER_SUCCESS";var XN=function(e){return function(t){t({type:WN}),OT(e).then((function(){t({type:$N})})).catch((function(e){var n;n=e.message.includes("No document to update")?"\u041e\u0448\u0438\u0431\u043a\u0430! \u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u044f \u043d\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430!",function(e,t){e({type:QN}),e({type:uE,payload:{email:"",password:"",submit:t}})}(t,n)}))}},YN="moderators_container__poTW1",JN="moderators_list__XjO82",ZN="moderators_error_text__iOGFC",eA="moderators_loader__container__d8VVa",tA=function(){var e=E(),n=v((function(e){return e.getModeratedUsers})),r=n.moderatedUsers,i=n.getModeratedUsersRequest,a=n.getModeratedUsersFailed,o=v((function(e){return e.auth})).values,u=v((function(e){return e.moderateUser})),s=u.moderateUserRequest,c=u.moderateUserSuccess,l=v((function(e){return e.user})).user,f=CC().resetForm,h=px(Ww(jI,"users"),yx("moderator","==",!0));WC(GN,HN,KN,h);var d=r.map((function(e){return e.email}));(0,t.useEffect)((function(){c&&f()}),[c,f]);return console.log(l.email),"admin@mail.ru"===l.email?(0,oT.jsxs)("div",{className:YN,children:[(0,oT.jsxs)("div",{children:[(0,oT.jsx)("h3",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432:"}),a?(0,oT.jsx)("p",{className:ZN,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}):i?(0,oT.jsx)("div",{className:eA,children:(0,oT.jsx)(rC,{width:30,height:30,fullPage:!1})}):(0,oT.jsx)("ul",{className:JN,children:0!==r&&r.map((function(e,t){return(0,oT.jsx)(zN,{user:e},e.id)}))})]}),(0,oT.jsx)("div",{children:(0,oT.jsx)(NC,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430:",buttonTitle:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",handleClick:function(t){t.preventDefault(),f(),d.includes(o.email)?e({type:uE,payload:{submit:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432."}}):e(XN(o.email))},request:s})})]}):(0,oT.jsx)(ke,{to:{pathname:"/foto-albom"}})},nA=function(e){var t=e.photos,n=v((function(e){return e.Pagination})).pageNumber,r=v((function(e){return e.getPhotos})),i=r.getPhotosRequest,a=r.getPhotosFailed,o=FT(t,n),u=MT(t.length,8);return(0,oT.jsxs)(oT.Fragment,{children:[i?(0,oT.jsx)("div",{className:pT,children:(0,oT.jsx)(rC,{width:30,height:30,fullPage:!1})}):a?(0,oT.jsx)("p",{className:vT,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a."}):(0,oT.jsx)("div",{className:cT,children:o&&0!==o.length?o.map((function(e,t){return(0,oT.jsx)(eC,{cards:e},e.id)})):(0,oT.jsx)("span",{children:"\u041d\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a."})}),t.length>8&&(0,oT.jsx)(yC,{totalPage:u})]})},rA="ProtectedRoute_loader_container__AFcpc",iA=["children"],aA=function(e){var t=e.children,n=JC(e,iA),r=v((function(e){return e.auth})).auth;return null===r?(0,oT.jsx)("div",{className:rA,children:(0,oT.jsx)(rC,{width:50,height:50,fullPage:!1})}):(0,oT.jsx)(xe,cn(cn({},n),{},{render:function(e){var n=e.location;return r?t:(0,oT.jsx)(ke,{to:{pathname:"/foto-albom",state:{from:n}}})}}))},oA=function(){var e=v((function(e){return e.user})),n=e.user,r=e.getUserRequest,i=v((function(e){return e.app})),a=i.modalVisible,o=i.modalImgVisible,u=v((function(e){return e.getPhotos})).photos,s=De(),c=Re();console.log(s.pathname);var l=px(Ww(jI,"images"),yx("verificated",">",1),kx("verificated","desc"));WC(JI,eT,ZI,l);var f=(0,t.useMemo)((function(){return n&&u&&u.filter((function(e){return e.owner===n.id}))}),[u,n]);return(0,t.useEffect)((function(){"/"===s.pathname&&c.push("/foto-albom")}),[c,s.pathname]),(0,oT.jsxs)("main",{className:sT.table,children:[(0,oT.jsxs)(Ne,{children:[(0,oT.jsx)(xe,{path:"/foto-albom",exact:!0,children:(0,oT.jsx)(mC,{photos:u})}),(0,oT.jsx)(aA,{path:"/foto-albom/moderators",exact:!0,children:(0,oT.jsx)(tA,{})}),(0,oT.jsx)(aA,{path:"/foto-albom/photo-verification",exact:!0,children:(0,oT.jsx)(YC,{})}),(0,oT.jsx)(xe,{path:"/foto-albom/login",exact:!0,children:!r&&(0,oT.jsx)(LC,{})}),(0,oT.jsx)(xe,{path:"/foto-albom/register",exact:!0,children:!r&&(0,oT.jsx)(KC,{})}),(0,oT.jsx)(aA,{path:"/foto-albom/my-photos",exact:!0,children:(0,oT.jsx)(nA,{photos:f})})]}),(0,oT.jsx)(oN,{modalVisible:a,children:(0,oT.jsx)(ON,{})}),(0,oT.jsx)(oN,{modalVisible:o,children:(0,oT.jsx)(LN,{})})]})};var uA=function(){var e=E(),n=v((function(e){return e.user})).user,r=v((function(e){return e.delImage})).delImageRequest,i=v((function(e){return e.likeImage})).likeImageRequest,a=v((function(e){return e.disLikeImage})).disLikeImageRequest,o=v((function(e){return e.logout})).logoutRequest,u=v((function(e){return e.verifyImage})).verifyImageRequest,s=v((function(e){return e.unModerateUser})).unModerateUserRequest;return(0,t.useEffect)((function(){e(iT())}),[e]),(0,t.useEffect)((function(){n&&e({type:cE,payload:!0})}),[n,e]),(0,oT.jsxs)(Oe,{children:[(r||i||a||o||s||u)&&(0,oT.jsx)("div",{className:qe,children:(0,oT.jsx)(rC,{width:60,height:60,fullPage:!0})}),(0,oT.jsxs)("div",{style:{padding:"0 30px 20px 30px"},children:[(0,oT.jsx)(uT,{}),(0,oT.jsx)(oA,{})]})]})},sA=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function cA(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var lA="function"===typeof Symbol&&Symbol.observable||"@@observable",fA=function(){return Math.random().toString(36).substring(7).split("").join(".")},hA={INIT:"@@redux/INIT"+fA(),REPLACE:"@@redux/REPLACE"+fA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+fA()}};function dA(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function pA(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(cA(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(cA(1));return n(pA)(e,t)}if("function"!==typeof e)throw new Error(cA(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(cA(3));return a}function f(e){if("function"!==typeof e)throw new Error(cA(4));if(s)throw new Error(cA(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(cA(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!dA(e))throw new Error(cA(7));if("undefined"===typeof e.type)throw new Error(cA(8));if(s)throw new Error(cA(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(cA(10));i=e,h({type:hA.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(cA(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[lA]=function(){return this},e}return h({type:hA.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[lA]=p,r}function vA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function yA(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var mA=yA();mA.withExtraArgument=yA;var gA=mA,kA={modalVisible:!1,modalImgVisible:!1,selectedFoto:null,isFileLoading:!1},bA={getUserRequest:!1,getUserFailed:!1,user:null},wA={logoutRequest:!1,logoutFailed:!1},_A={getPhotosRequest:!1,getPhotosFailed:!1,photos:[],errorMessage:""},xA={value:"",error:""},EA={file:null,fileUploadError:null,isUploadFile:!1},SA={addImageToBaseRequest:!1,addImageToBaseFailed:!1,addImageToBaseSuccess:!1},IA={auth:null,values:{email:"",password:""},errors:{email:"",password:"",submit:""},valid:{email:!1,password:!1}},TA={registerRequest:!1,registerFailed:!1,data:{}},CA={addUserToBaseRequest:!1,addUserToBaseFailed:!1},NA={loginRequest:!1,loginFailed:!1,user:{}},AA={getModeratedUsersRequest:!1,getModeratedUsersFailed:!1,moderatedUsers:[],errorMessage:""},RA={moderateUserRequest:!1,moderateUserSuccess:!1,moderateUserFailed:!1},DA={delImageRequest:!1,delImageFailed:!1},OA={likeImageRequest:!1,likeImageFailed:!1},PA={disLikeImageRequest:!1,disLikeImageFailed:!1},LA={verifyImageRequest:!1,verifyImageFailed:!1},MA={unModerateUserRequest:!1,unModerateUserFailed:!1},FA={getNotVerifyPhotosRequest:!1,getNotVerifyPhotosFailed:!1,notVerifyPhotos:[]},UA={pageNumber:1},VA=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:hA.INIT}))throw new Error(cA(12));if("undefined"===typeof n(void 0,{type:hA.PROBE_UNKNOWN_ACTION()}))throw new Error(cA(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(cA(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qI:return cn(cn({},e),{},{modalVisible:t.payload});case zI:return cn(cn({},e),{},{modalImgVisible:t.payload});case GI:return cn(cn({},e),{},{selectedFoto:t.payload});case KI:return cn(cn({},e),{},{isFileLoading:t.payload});default:return e}},addCardByLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case AN:return cn(cn({},e),{},{value:t.payload});case RN:return cn(cn({},e),{},{error:t.payload});default:return e}},addCardModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:EA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case iC:return cn(cn({},e),{},{file:t.payload});case aC:return cn(cn({},e),{},{fileUploadError:t.payload});case oC:return cn(cn({},e),{},{isUploadFile:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cE:return cn(cn({},e),{},{auth:t.payload});case oE:return cn(cn({},e),{},{values:t.payload});case uE:return cn(cn({},e),{},{errors:t.payload});case sE:return cn(cn({},e),{},{valid:t.payload});default:return e}},addUserToBase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case VC:return cn(cn({},e),{},{addUserToBaseRequest:!0,addUserToBaseFailed:!1});case BC:return cn(cn({},e),{},{addUserToBaseRequest:!1});case jC:return cn(cn({},e),{},{addUserToBaseFailed:!0,addUserToBaseRequest:!1});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case MC:return cn(cn({},e),{},{registerRequest:!0,registerFailed:!1});case UC:return cn(cn({},e),{},{registerRequest:!1,data:t.payload});case FC:return cn(cn({},e),{},{registerFailed:!0,registerRequest:!1});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case AC:return cn(cn({},e),{},{loginRequest:!0,loginFailed:!1});case DC:return cn(cn({},e),{},{loginRequest:!1,user:t.payload});case RC:return cn(cn({},e),{},{loginFailed:!0,loginRequest:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case HI:return cn(cn({},e),{},{getUserRequest:!0,getUserFailed:!1});case QI:return cn(cn({},e),{},{getUserRequest:!1,user:t.payload});case WI:return cn(cn({},e),{},{getUserFailed:!0,getUserRequest:!1});default:return e}},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $I:return cn(cn({},e),{},{logoutRequest:!0,logoutFailed:!1});case YI:return cn(cn({},e),{},{logoutRequest:!1});case XI:return cn(cn({},e),{},{logoutFailed:!0,logoutRequest:!1});default:return e}},getModeratedUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case GN:return cn(cn({},e),{},{getModeratedUsersRequest:!0,getModeratedUsersFailed:!1});case HN:return cn(cn({},e),{},{getModeratedUsersRequest:!1,moderatedUsers:t.payload});case KN:return cn(cn({},e),{},{getModeratedUsersFailed:!0,getModeratedUsersRequest:!1,errorMessage:t.payload});default:return e}},moderateUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case WN:return cn(cn({},e),{},{moderateUserRequest:!0,moderateUserSuccess:!1,moderateUserFailed:!1});case $N:return cn(cn({},e),{},{moderateUserRequest:!1,moderateUserSuccess:!0});case QN:return cn(cn({},e),{},{moderateUserFailed:!0,moderateUserSuccess:!1,moderateUserRequest:!1});default:return e}},getPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case JI:return cn(cn({},e),{},{getPhotosRequest:!0,getPhotosFailed:!1});case eT:return cn(cn({},e),{},{getPhotosRequest:!1,photos:t.payload,lastVisible:t.lastVisible});case ZI:return cn(cn({},e),{},{getPhotosFailed:!0,getPhotosRequest:!1,errorMessage:t.payload});default:return e}},getNotVerifyPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case QC:return cn(cn({},e),{},{getNotVerifyPhotosRequest:!0,getNotVerifyPhotosFailed:!1});case XC:return cn(cn({},e),{},{getNotVerifyPhotosRequest:!1,notVerifyPhotos:t.payload});case $C:return cn(cn({},e),{},{getNotVerifyPhotosFailed:!0,getNotVerifyPhotosRequest:!1});default:return e}},addImageToBase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sC:return cn(cn({},e),{},{addImageToBaseRequest:!0,addImageToBaseFailed:!1,addImageToBaseSuccess:!1});case lC:return cn(cn({},e),{},{addImageToBaseRequest:!1,addImageToBaseSuccess:!0});case cC:return cn(cn({},e),{},{addImageToBaseFailed:!0,addImageToBaseRequest:!1,addImageToBaseSuccess:!1});case uC:return cn(cn({},e),{},{addImageToBaseSuccess:t.payload});default:return e}},delImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case UT:return cn(cn({},e),{},{delImageRequest:!0,delImageFailed:!1});case jT:return cn(cn({},e),{},{delImageRequest:!1});case VT:return cn(cn({},e),{},{delImageFailed:!0,delImageRequest:!1});default:return e}},likeImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case BT:return cn(cn({},e),{},{likeImageRequest:!0,likeImageFailed:!1});case zT:return cn(cn({},e),{},{likeImageRequest:!1});case qT:return cn(cn({},e),{},{likeImageFailed:!0,likeImageRequest:!1});default:return e}},disLikeImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case GT:return cn(cn({},e),{},{disLikeImageRequest:!0,disLikeImageFailed:!1});case HT:return cn(cn({},e),{},{disLikeImageRequest:!1});case KT:return cn(cn({},e),{},{disLikeImageFailed:!0,disLikeImageRequest:!1});default:return e}},verifyImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case WT:return cn(cn({},e),{},{verifyImageRequest:!0,verifyImageFailed:!1});case $T:return cn(cn({},e),{},{verifyImageRequest:!1});case QT:return cn(cn({},e),{},{verifyImageFailed:!0,verifyImageRequest:!1});default:return e}},unModerateUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case VN:return cn(cn({},e),{},{unModerateUserRequest:!0,unModerateUserFailed:!1});case BN:return cn(cn({},e),{},{unModerateUserRequest:!1});case jN:return cn(cn({},e),{},{unModerateUserFailed:!0,unModerateUserRequest:!1});default:return e}},Pagination:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UA,t=arguments.length>1?arguments[1]:void 0;return t.type===vC?cn(cn({},e),{},{pageNumber:t.payload}):e}}),jA=("object"===typeof window&&window.window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):vA)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(cA(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=vA.apply(void 0,a)(n.dispatch),cn(cn({},n),{},{dispatch:r})}}}(gA)),BA=pA(VA,jA);r.createRoot(document.getElementById("root")).render((0,oT.jsx)(t.StrictMode,{children:(0,oT.jsx)(k,{store:BA,children:(0,oT.jsx)(uA,{})})})),sA()}()}();
//# sourceMappingURL=main.2ce80c38.js.map